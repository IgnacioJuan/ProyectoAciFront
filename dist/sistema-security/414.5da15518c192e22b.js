"use strict";(self.webpackChunksistema_security=self.webpackChunksistema_security||[]).push([[414],{7414:(Pe,U,l)=>{l.r(U),l.d(U,{UserModule:()=>Ne});var h=l(6895),x=l(5861),S=l(1282),Z=l(9541),D=l(8584),k=l(5226),d=l.n(k),e=l(4650),b=l(4120),I=l(9921),_=l(5412),q=l(2068),g=l(4859),a=l(4006),f=l(7392),O=l(6709),p=l(3626);function N(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Criterio"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verCriterio?"":"none")}}function P(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("display",i.verCriterio&&i.getRowSpan3("Criterio",o)?"":"none")("background-color",t.randomCelda),e.uIk("rowspan",i.getRowSpan3("Criterio",o)),e.xp6(1),e.hij(" ",t.criterionomj," ")}}function j(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Subcriterio"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verSubcriterio?"":"none")}}function E(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("background-color",t.randomColor)("display",i.verSubcriterio&&i.getRowSpan3("Subcriterio",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Subcriterio",o)),e.xp6(1),e.hij(" ",t.subcrierioj," ")}}function J(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Indicador"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verIndicador?"":"none")}}function F(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("background-color",t.Colores)("display",i.verIndicador&&i.getRowSpan3("Indicador",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Indicador",o)),e.xp6(1),e.AsE(" ",t.ind_nombrej," ",i.calcularRowSpanValue(o)," ")}}function R(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Peso"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verPeso?"":"none")}}function Q(r,n){if(1&r&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("display",i.verPeso&&i.getRowSpan3("Peso",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Peso",o)),e.xp6(1),e.hij(" ",t.pes," ")}}function L(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"% Obtenido"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verObtenido?"":"none")}}const Y=function(r,n,t,o){return{rojo:r,naranja:n,amarillo:t,verde:o}};function z(r,n){if(1&r&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("display",i.verObtenido&&i.getRowSpan3("Obtenido",o)?"":"none"),e.Q6J("ngClass",e.l5B(5,Y,t.obt>=0&&t.obt<=25,t.obt>25&&t.obt<=50,t.obt>50&&t.obt<=75,t.obt>75&&t.obt<=100)),e.uIk("rowspan",i.getRowSpan3("Obtenido",o)),e.xp6(1),e.hij(" ",t.obt," ")}}function $(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"% Utilidad"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verUtilidad?"":"none")}}function B(r,n){if(1&r&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("display",i.verUtilidad&&i.getRowSpan3("Utilidad",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Utilidad",o)),e.xp6(1),e.hij(" ",t.uti," ")}}function G(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Valor"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verValor?"":"none")}}function V(r,n){if(1&r&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("display",i.verValor&&i.getRowSpan3("Valor",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Valor",o)),e.xp6(1),e.hij(" ",t.val," ")}}function H(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Evidencia"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verEvidencia?"":"none")}}function K(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("background-color",t.indicol)("display",i.verEvidencia&&i.getRowSpan3("Evidencia",o)?"":"none"),e.uIk("rowspan",i.getRowSpan3("Evidencia",o)),e.xp6(1),e.hij(" ",t.descrip," ")}}function X(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"th",34)(1,"div",38)(2,"span"),e._uU(3,"Archivos"),e.qZA(),e.TgZ(4,"mat-checkbox",39),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.todosSeleccionados=i)})("change",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.seleccionarTodosArchivos())}),e.qZA(),e.TgZ(5,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.descargarArchivosSeleccionados())}),e._UZ(6,"i",41),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Udp("display",t.verArchivo?"":"none"),e.xp6(4),e.Q6J("ngModel",t.todosSeleccionados)}}function W(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"td",42)(1,"mat-checkbox",43),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.KtG(c.isSelected=i)}),e.qZA(),e.TgZ(2,"a",44),e._uU(3),e.qZA()()}if(2&r){const t=n.$implicit,o=e.oxw(2);e.Udp("display",o.verArchivo?"":"none"),e.xp6(1),e.Q6J("ngModel",t.isSelected),e.xp6(1),e.s9C("href",t.archivo_enlace,e.LSH),e.xp6(1),e.Oqu(t.archivo_nombre)}}function ee(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Id ind"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.ocultar?"":"none")}}function oe(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=e.oxw(2);e.Udp("display",o.ocultar&&o.rowSpanValue?"":"none"),e.uIk("rowspan",o.rowSpanValue),e.xp6(1),e.hij(" ",t.id_indicardorj," ")}}function te(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Tipo"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.verTipo?"":"none")}}function re(r,n){if(1&r&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&r){const t=n.$implicit,o=e.oxw(2);e.Udp("display",o.verTipo&&o.rowSpanValue?"":"none"),e.uIk("rowspan",o.rowSpanValue),e.xp6(1),e.hij(" ",t.tip," ")}}function ie(r,n){if(1&r&&(e.TgZ(0,"th",34),e._uU(1,"Calificar"),e.qZA()),2&r){const t=e.oxw(2);e.Udp("display",t.cali?"":"none")}}function ne(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"td",45)(1,"button",46),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.calificar(s.tip,s.id_indicardorj,s.pes))}),e.TgZ(2,"mat-icon",47),e._uU(3,"open_in_new"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Udp("display",t.cali&&t.rowSpanValue?"":"none"),e.uIk("rowspan",t.rowSpanValue)}}function ae(r,n){1&r&&e._UZ(0,"tr",48)}function se(r,n){1&r&&e._UZ(0,"tr",49)}function le(r,n){if(1&r&&(e.TgZ(0,"div",50)(1,"div",51)(2,"div",51),e._uU(3),e.ALo(4,"number"),e.qZA(),e.TgZ(5,"div",52),e._uU(6),e.qZA(),e.TgZ(7,"div",53),e._uU(8),e.ALo(9,"number"),e.ALo(10,"number"),e.qZA()()()),2&r){const t=n.$implicit,o=n.index,i=e.oxw(2);e.Udp("background-color",i.coloresTarjetas[o])("border",i.borderStyles[o]),e.xp6(3),e.hij("",e.xi3(4,8,t.total/t.faltante*100,"1.0-2"),"%"),e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.AsE("Total: ",e.xi3(9,11,t.total,"1.2-4")," de ",e.xi3(10,14,t.faltante,"1.2-4"),"")}}function ce(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showCriterio())}),e._uU(5," Criterio "),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSubcriterio())}),e._uU(7," Subcriterio "),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showIndicador())}),e._uU(9," Indicador "),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showEvidencia())}),e._uU(11," Evidencia "),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showPeso())}),e._uU(13," Peso "),e.qZA(),e.TgZ(14,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showObtenido())}),e._uU(15," % Obte "),e.qZA(),e.TgZ(16,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showUtilidad())}),e._uU(17," % Util "),e.qZA(),e.TgZ(18,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showValor())}),e._uU(19," Valor "),e.qZA(),e.TgZ(20,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showArchivo())}),e._uU(21," Archivo "),e.qZA(),e.TgZ(22,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showTipo())}),e._uU(23," Tipo "),e.qZA()(),e.TgZ(24,"div",6)(25,"table",7),e.ynx(26,8),e.YNc(27,N,2,2,"th",9),e.YNc(28,P,2,6,"td",10),e.BQk(),e.ynx(29,11),e.YNc(30,j,2,2,"th",9),e.YNc(31,E,2,6,"td",12),e.BQk(),e.ynx(32,13),e.YNc(33,J,2,2,"th",9),e.YNc(34,F,2,7,"td",12),e.BQk(),e.ynx(35,14),e.YNc(36,R,2,2,"th",9),e.YNc(37,Q,2,4,"td",15),e.BQk(),e.ynx(38,16),e.YNc(39,L,2,2,"th",9),e.YNc(40,z,2,10,"td",17),e.BQk(),e.ynx(41,18),e.YNc(42,$,2,2,"th",9),e.YNc(43,B,2,4,"td",15),e.BQk(),e.ynx(44,19),e.YNc(45,G,2,2,"th",9),e.YNc(46,V,2,4,"td",15),e.BQk(),e.ynx(47,20),e.YNc(48,H,2,2,"th",9),e.YNc(49,K,2,6,"td",12),e.BQk(),e.ynx(50,21),e.YNc(51,X,7,3,"th",9),e.YNc(52,W,4,5,"td",22),e.BQk(),e.ynx(53,23),e.YNc(54,ee,2,2,"th",9),e.YNc(55,oe,2,4,"td",24),e.BQk(),e.ynx(56,25),e.YNc(57,te,2,2,"th",9),e.YNc(58,re,2,4,"td",24),e.BQk(),e.ynx(59,26),e.YNc(60,ie,2,2,"th",9),e.YNc(61,ne,4,3,"td",27),e.BQk(),e.YNc(62,ae,1,0,"tr",28),e.YNc(63,se,1,0,"tr",29),e.qZA()()(),e.TgZ(64,"div",30)(65,"h2"),e._uU(66,"Avance del Criterio Asignado"),e.qZA(),e.TgZ(67,"div",31),e.YNc(68,le,11,17,"div",32),e.qZA(),e.TgZ(69,"h2"),e._uU(70,"Grafica del Criterio Asignado"),e.qZA(),e.TgZ(71,"canvas",33),e.NdJ("chartClick",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.chartClicked(i))}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngClass",t.verCriterio?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verSubcriterio?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verIndicador?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verEvidencia?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verPeso?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verObtenido?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verUtilidad?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verValor?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verArchivo?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verTipo?"selected":""),e.xp6(3),e.Q6J("dataSource",t.datacrite),e.xp6(37),e.Q6J("matHeaderRowDef",t.displayedColumns3),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns3),e.xp6(5),e.Q6J("ngForOf",t.listain),e.xp6(3),e.Q6J("data",t.barChartData)("options",t.barChartOptions)("plugins",t.barChartPlugins)("type",t.barChartType)}}function de(r,n){if(1&r&&(e.TgZ(0,"h2",61),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij("Bienvenido, ",t.user.persona.primer_nombre,".")}}function ue(r,n){if(1&r&&(e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"div",57)(4,"h1",58),e._uU(5),e.qZA(),e.TgZ(6,"h3",59),e._uU(7),e.qZA(),e.YNc(8,de,2,1,"h2",60),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(5),e.Oqu(t.time),e.xp6(2),e.Oqu(t.day),e.xp6(1),e.Q6J("ngIf",null!=t.user&&(null==t.user.persona?null:t.user.persona.primer_nombre))}}let pe=(()=>{class r{constructor(t,o,i,s){this.login=t,this.service=o,this.dialog=i,this.httpCriterios=s,this.time="",this.day="",this.coloresAsignados={},this.isLoggedIn=!1,this.todosSeleccionados=!1,this.verdash=!1,this.ocultar=!1,this.verTipo=!0,this.rowSpanValue=0,this.spans3=[],this.user=null,this.rol=null,this.seleccionados={},this.verEvidencia=!1,this.verIndicador=!0,this.verPeso=!0,this.verObtenido=!0,this.verUtilidad=!1,this.verArchivo=!1,this.verValor=!0,this.verSubcriterio=!0,this.verCriterio=!1,this.crite=[],this.datos=[],this.listain=[],this.displayedColumns3=["Criterio","Subcriterio","Indicador","Evidencia","Peso","Obtenido","Utilidad","Valor","Archivos","Idind","Tipo","Calificar"],this.datacrite=[],this.cali=!0,this.borderStyles=[],this.listaIndicadores=[],this.valoresp=[],this.coloresTarjetas=[],this.barChartOptions={responsive:!0,scales:{x:{type:"category",ticks:{autoSkip:!1,maxRotation:45,minRotation:45,color:"black"}},y:{}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end",color:"black"}}},this.barChartType="bar",this.barChartPlugins=[S.Z],this.barChartData={labels:[],datasets:[{data:[],label:"V/Obtenido",backgroundColor:"rgba(56,116,188,255)"},{data:[],label:"V/por obtener",backgroundColor:"rgba(184,54,51,255)"}]}}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.id=this.user.id,this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),setInterval(()=>this.updateClock(),1e3),this.rol=this.login.getUserRole(),console.log("ROL "+this.rol),this.modeloMax()}chartClicked({event:t,active:o}){console.log(t,o)}chartHovered({event:t,active:o}){console.log(t,o)}showTipo(){this.verTipo=!this.verTipo}showArchivo(){this.verArchivo=!this.verArchivo}showValor(){this.verValor=!this.verValor}showUtilidad(){this.verUtilidad=!this.verUtilidad}showObtenido(){this.verObtenido=!this.verObtenido}showCriterio(){this.verCriterio=!this.verCriterio}showSubcriterio(){this.verSubcriterio=!this.verSubcriterio}showIndicador(){this.verIndicador=!this.verIndicador}showPeso(){this.verPeso=!this.verPeso}showEvidencia(){this.verEvidencia=!this.verEvidencia}cargarDatos(){"ADMIN"===this.rol?this.valoresadmin():"RESPONSABLE"===this.rol&&(this.valoresresp(),this.cali=!1)}valoresadmin(){this.httpCriterios.getvalorad(this.idmodel,this.id).subscribe(t=>{this.valoresp=t,console.log("Valores de tabla"+JSON.stringify(this.valoresp)),this.barChartData.labels=this.valoresp.map(o=>o.nomcriterio),this.barChartData.datasets[0].data=this.valoresp.map(o=>o.vlObtenido),this.barChartData.datasets[1].data=this.valoresp.map(o=>o.vlobtener),this.barChartData={...this.barChartData},0==this.valoresp.length&&this.valoresresp()})}valoresresp(){this.httpCriterios.getvaloresponsable(this.idmodel,this.id).subscribe(t=>{this.valoresp=t,console.log("Valores de tabla"+JSON.stringify(this.valoresp)),this.barChartData.labels=this.valoresp.map(o=>o.nomcriterio),this.barChartData.datasets[0].data=this.valoresp.map(o=>o.vlObtenido),this.barChartData.datasets[1].data=this.valoresp.map(o=>o.vlobtener),this.barChartData={...this.barChartData}})}modeloMax(){this.service.getModeMaximo().subscribe(t=>{this.idmodel=t.id_modelo,this.listardatos(),this.cargarDatos(),this.listaind()})}listaind(){"ADMIN"===this.rol?this.indicadoresadmin():"RESPONSABLE"===this.rol&&this.indicadoresresp()}indicadoresadmin(){this.httpCriterios.getIndicadorad(this.idmodel,this.id).subscribe(t=>{this.listain=t,this.listain.forEach(o=>{this.coloresTarjetas.push(this.getRandomColor()),this.borderStyles.push(this.getBorderColor(o.faltante-o.total))})})}indicadoresresp(){this.httpCriterios.getIndicadorresponsable(this.idmodel,this.id).subscribe(t=>{this.listain=t,this.listain.forEach(o=>{this.coloresTarjetas.push(this.getRandomColor()),this.borderStyles.push(this.getBorderColor(o.faltante-o.total))})})}getRandomColor(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}getBorderColor(t){return`${100*t+"px"} solid ${this.getRandomColor()}`}cacheSpan3(t,o){for(let i=0;i<this.datacrite.length;){let s=o(this.datacrite[i]),c=1;for(let u=i+1;u<this.datacrite.length&&s===o(this.datacrite[u]);u++)c++;this.spans3[i]||(this.spans3[i]={}),this.spans3[i][t]=c,i+=c}}getRowSpan3(t,o){return this.spans3[o]&&this.spans3[o][t]}getColorcelda(t,o){if(!this.coloresAsignados[t]){const i=Math.floor(256*Math.random()),s=Math.floor(256*Math.random()),c=Math.floor(256*Math.random());this.coloresAsignados[t]=`rgba(${i}, ${s}, ${c}, ${o})`}return this.coloresAsignados[t]}calcularRowSpanValue(t){this.rowSpanValue=this.getRowSpan3("Indicador",t)}descargarArchivosSeleccionados(){var t=this;return(0,x.Z)(function*(){const o=t.datacrite.filter(s=>s.isSelected);if(0===o.length)return void(yield d().fire("Error","Por favor, seleccione al menos un archivo para descargar.","error"));const i=o.map(s=>t.descargarArchivo(s.archivo_enlace,t.obtenerNombreArchivo2(s.archivo_enlace)));try{yield Promise.all(i),o.forEach(s=>{s.isSelected=!1}),yield d().fire("Descarga confirmacion","Tiene que confirmar la descarga.","success")}catch(s){console.error("Error en las descargas:",s),yield d().fire("Error","Hubo un error durante las descargas.","error")}})()}descargarArchivo(t,o){return(0,x.Z)(function*(){try{const s=yield(yield fetch(t)).blob(),c=window.URL.createObjectURL(s),u=document.createElement("a");u.href=c,u.download=o,u.click(),window.URL.revokeObjectURL(c)}catch{throw new Error("No se pudo descargar el archivo: "+o)}})()}obtenerNombreArchivo2(t){return t?t.substring(t.lastIndexOf("/")+1):""}seleccionarTodosArchivos(){for(const t of this.datacrite)t.isSelected=this.todosSeleccionados}calificar(t,o,i){console.log("tipo "+t+" id ind "+o+" peso "+i),this.dialog.open(D.n,{data:{valor:t,id:o,peso:i}}).afterClosed().subscribe(c=>{console.log(c),"success"==c.event&&(console.log(c),this.listardatos(),this.cargarDatos(),this.listaind(),d().fire({position:"center",icon:"success",title:"Calificaci\xf3n registrada",showConfirmButton:!0,timer:1500}))})}listardatos(){"ADMIN"===this.rol?this.veradmin():"RESPONSABLE"===this.rol?this.verresponsable():"AUTORIDAD"===this.rol&&(this.verdash=!1)}veradmin(){this.cali=!0,this.service.getcriterioadmin(this.idmodel,this.id).subscribe(t=>{0!=t.length&&(this.verdash=!0,this.cali=!0,this.datacrite=t,this.datacrite.forEach(o=>{typeof this.seleccionados[o.criterionomj]>"u"&&(this.seleccionados[o.criterionomj]=!1)}),this.cacheSpan3("Criterio",o=>o.criterionomj),this.cacheSpan3("Subcriterio",o=>o.criterionomj+o.subcrierioj),this.cacheSpan3("Indicador",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej),this.cacheSpan3("Peso",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes),this.cacheSpan3("Obtenido",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt),this.cacheSpan3("Utilidad",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti),this.cacheSpan3("Valor",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val),this.cacheSpan3("Evidencia",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val+o.descrip),this.cacheSpan3("Archivos",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val+o.descrip+o.archivo_enlace),setTimeout(()=>{this.aplicar()},0))}),0==this.datacrite.length&&this.verresponsable()}verresponsable(){this.cali=!1,this.service.getcriterioresp(this.idmodel,this.id).subscribe(t=>{0!=t.length&&(this.verdash=!0,this.datacrite=t,this.datacrite.forEach(o=>{typeof this.seleccionados[o.criterionomj]>"u"&&(this.seleccionados[o.criterionomj]=!1)}),this.cacheSpan3("Criterio",o=>o.criterionomj),this.cacheSpan3("Subcriterio",o=>o.criterionomj+o.subcrierioj),this.cacheSpan3("Indicador",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej),this.cacheSpan3("Peso",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes),this.cacheSpan3("Obtenido",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt),this.cacheSpan3("Utilidad",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti),this.cacheSpan3("Valor",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val),this.cacheSpan3("Evidencia",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val+o.descrip),this.cacheSpan3("Archivos",o=>o.criterionomj+o.subcrierioj+o.ind_nombrej+o.pes+o.obt+o.uti+o.val+o.descrip+o.archivo_enlace),setTimeout(()=>{this.aplicar()},0))})}aplicar(){this.datacrite.forEach(t=>{t.randomCelda=this.generarC()}),this.datacrite.forEach(t=>{t.indicol=this.generarColor3()}),this.datacrite.forEach(t=>{t.randomColor=this.generarColor()}),this.datacrite.forEach(t=>{t.Colores=this.generarColor2()}),this.datacrite.forEach(t=>{t.indicol=this.generarColor3()})}generarC(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor2(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor3(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}updateClock(){const t=new Date;let o=t.getHours();const i=t.getMinutes();let s="AM";o>=12&&(s="PM",o-=12),0===o&&(o=12),this.time=`${o}:${i.toString().padStart(2,"0")} ${s}`,this.day=`${t.toLocaleDateString("es-EC",{weekday:"long",month:"long",day:"numeric"})}`}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.r),e.Y36(I.y),e.Y36(_.uw),e.Y36(q.X))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-dashboard"]],viewQuery:function(t,o){if(1&t&&e.Gf(Z.jh,5),2&t){let i;e.iGM(i=e.CRH())&&(o.chart=i.first)}},decls:2,vars:2,consts:[[4,"ngIf"],["class","row flex-column justify-content-center align-items-center text-center",4,"ngIf"],["id","fig6",2,"display","flex","border-bottom","thick double #32a1ce","border-top","thick double #32a1ce"],["id","fig7",2,"flex-basis","70%","border-right","thick double #32a1ce"],[1,"btn-tabs"],["mat-button","",1,"btn-tab",3,"ngClass","click"],[1,"mat-elevation-z8","tabla-container"],["mat-table","",3,"dataSource"],["matColumnDef","Criterio"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","","style","padding: 4px;  font-size: 12px; ",3,"display","background-color",4,"matCellDef"],["matColumnDef","Subcriterio"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"background-color","display",4,"matCellDef"],["matColumnDef","Indicador"],["matColumnDef","Peso"],["mat-cell","","style","padding: 4px; font-size: 12px;","class","centrar",3,"display",4,"matCellDef"],["matColumnDef","Obtenido"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"display","ngClass",4,"matCellDef"],["matColumnDef","Utilidad"],["matColumnDef","Valor"],["matColumnDef","Evidencia"],["matColumnDef","Archivos"],["mat-cell","","style","padding: 4px; font-size: 14px;",3,"display",4,"matCellDef"],["matColumnDef","Idind"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"display",4,"matCellDef"],["matColumnDef","Tipo"],["matColumnDef","Calificar"],["mat-cell","",3,"display",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"flex-basis","30%","width","70%","height","100%"],[1,"pie-grid"],["class","card",3,"background-color","border",4,"ngFor","ngForOf"],["baseChart","",1,"chart",3,"data","options","plugins","type","chartClick"],["mat-header-cell",""],["mat-cell","",2,"padding","4px","font-size","12px"],["mat-cell","",1,"centrar",2,"padding","4px","font-size","12px"],["mat-cell","",2,"padding","4px","font-size","12px",3,"ngClass"],[2,"display","flex","justify-content","space-between","align-items","center"],[3,"ngModel","ngModelChange","change"],[1,"btn","btn-download",2,"background-color","rgb(10, 7, 161)","color","white","border","none","padding","10px 20px","cursor","pointer",3,"click"],[1,"fas","fa-download"],["mat-cell","",2,"padding","4px","font-size","14px"],[3,"ngModel","ngModelChange"],["download","",3,"href"],["mat-cell",""],["mat-icon-button","",1,"boton",3,"click"],[1,"iconoB"],["mat-header-row",""],["mat-row",""],[1,"card"],[1,"card-content"],[1,"card-name",2,"color","black"],[1,"card-tot"],[1,"row","flex-column","justify-content-center","align-items-center","text-center"],[1,"background","content-container"],[1,"container"],[1,"col-sm-12","col-md-10","col-lg-8"],["id","time"],["id","day",1,"display-5"],["id","greeting",4,"ngIf"],["id","greeting"]],template:function(t,o){1&t&&(e.YNc(0,ce,72,18,"div",0),e.YNc(1,ue,9,3,"div",1)),2&t&&(e.Q6J("ngIf",o.verdash),e.xp6(1),e.Q6J("ngIf",!o.verdash))},dependencies:[h.mk,h.sg,h.O5,g.lW,g.RK,a.JJ,a.On,f.Hw,O.oG,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,Z.jh,h.JJ],styles:['.chart[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 7px 25px #00000014;width:100%}.chart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5px;font-size:20px;color:#666;text-align:center}.btn-tab.selected[_ngcontent-%COMP%]{background-color:#044c9b;color:#fff}.btn-tabs[_ngcontent-%COMP%]{display:flex}.btn-tab[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#dca500;color:#000;font-weight:700;transform-origin:top right;transform:skew(-20deg);margin-right:-10px;cursor:pointer;transition:background-color .3s ease-in-out,color .3s ease-in-out}.btn-visible[_ngcontent-%COMP%]{background-color:#09139bd0;color:#fff}.btn-oculto[_ngcontent-%COMP%]{background-color:#baec30;color:#050000}.tabla-container[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto}.rojo[_ngcontent-%COMP%]{background-color:red;color:#fff;text-align:center}.centrar[_ngcontent-%COMP%]{background-color:#fcfafa;color:#020202;text-align:center}.naranja[_ngcontent-%COMP%]{background-color:orange;color:#fff;text-align:center}.amarillo[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}.verde[_ngcontent-%COMP%]{background-color:green;color:#fff;text-align:center}.background[_ngcontent-%COMP%]{background:url(https://images.pexels.com/photos/7652179/pexels-photo-7652179.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1);background-size:cover;background-position:center;background-repeat:no-repeat;min-height:100vh;color:#f7f7f7;display:flex;align-items:center;justify-content:center;position:relative}.background[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.2),rgba(0,0,0,0));z-index:-1;filter:blur(200px)}.background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;font-weight:700}.display-5[_ngcontent-%COMP%]{font-size:1.5rem}#greeting[_ngcontent-%COMP%]{margin-top:2rem;font-size:2rem}@media (min-width: 576px){.background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5.5rem;padding:60px}.display-5[_ngcontent-%COMP%]{font-size:2.5rem}#greeting[_ngcontent-%COMP%]{margin-top:2rem;font-size:2.5rem}}@media (min-width: 992px){.background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:6rem}#greeting[_ngcontent-%COMP%]{font-size:3rem}}@media (min-width: 1200px){.background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:7.5rem}#greeting[_ngcontent-%COMP%]{font-size:3.6rem}}.pie-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:20px;justify-content:center}.card-content[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:16px;font-weight:700}.card-tot[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:12px}.card-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#000}.card[_ngcontent-%COMP%]{width:170px;height:170px;background-color:transparent;border-radius:50%;border:8px solid rgba(167,183,226,.7254901961);display:flex;justify-content:center;align-items:center;box-shadow:0 2px 4px #0000001a}.content-container[_ngcontent-%COMP%]{position:relative;z-index:1}']}),r})();var T=l(7940),me=l(4411),he=l(5763),ge=l(253),m=l(9549),v=l(4144);function be(r,n){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Las contrase\xf1as no coinciden. "),e.qZA())}function _e(r,n){1&r&&(e.TgZ(0,"mat-error",43),e._uU(1," El correo electr\xf3nico es inv\xe1lido. "),e.qZA())}function fe(r,n){1&r&&(e.TgZ(0,"div",44)(1,"div"),e._uU(2,"El numero es invalido"),e.qZA()())}function ve(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Debe ingresar una direccion "),e.qZA())}function Ce(r,n){if(1&r&&(e.TgZ(0,"div",44),e.YNc(1,ve,2,0,"div",28),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.usuarioForm.controls.direccion.hasError("required"))}}function Ae(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Debe ingresar su nombre "),e.qZA())}function Ue(r,n){if(1&r&&(e.TgZ(0,"div",44),e.YNc(1,Ae,2,0,"div",28),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.usuarioForm.controls.primer_nombre.hasError("required"))}}function xe(r,n){1&r&&(e.TgZ(0,"div"),e._uU(1," Debe ingresar su apellido "),e.qZA())}function Ze(r,n){if(1&r&&(e.TgZ(0,"div",44),e.YNc(1,xe,2,0,"div",28),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.usuarioForm.controls.primer_apellido.hasError("required"))}}let Te=(()=>{class r{constructor(t,o,i){this.login=t,this.usuariosService=o,this.personaService=i,this.isLoggedIn=!1,this.user=null,this.rol=null,this.usuariosEditGuar=new me.r,this.usuarioForm=new a.cw({correo:new a.NI("",[a.kI.required,a.kI.email]),celular:new a.NI("",[a.kI.required,a.kI.pattern(/^\d{10}$/)]),direccion:new a.NI("",[a.kI.required]),primer_nombre:new a.NI("",[a.kI.required]),primer_apellido:new a.NI("",[a.kI.required])}),this.contraForm=new a.cw({confirmPassword:new a.NI("",[a.kI.required,this.validatePasswords.bind(this)])})}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.rol=this.login.getUserRole()}validatePasswords(t){return this.usuariosEditGuar.password!==t.value?{passwordMismatch:!0}:null}Actualizar(t){console.log(t),t.id=this.user.id,console.log(t),this.user.password=t.password,d().fire({title:"Esta seguro de cambiar su contrase\xf1a?",showCancelButton:!0,confirmButtonText:"SI",denyButtonText:"NO",icon:"info"}).then(o=>{o.isConfirmed?this.usuariosService.actualizar(t.id,t).subscribe(i=>{d().fire({title:"La contrase\xf1a ha sido modificada con exito, sera enviado al login",confirmButtonText:"Ok",icon:"info"}).then(s=>{s.isConfirmed&&(this.login.logout(),location.replace("/use/login"))})}):d().fire("Se ha cancelado la operaci\xf3n","","info")})}edit(){this.usuariosEditGuar.persona=this.user.persona,this.usuarioForm=new a.cw({id_usuario:new a.NI(this.user.id),id_persona:new a.NI(this.user?.persona?.id_persona),correo:new a.NI(this.user?.persona?.correo,[a.kI.required,a.kI.email]),celular:new a.NI(this.user?.persona?.celular,[a.kI.required,a.kI.pattern(/^\d{10}$/)]),direccion:new a.NI(this.user?.persona?.direccion,[a.kI.required]),primer_nombre:new a.NI(this.user?.persona?.primer_nombre,[a.kI.required]),primer_apellido:new a.NI(this.user?.persona?.primer_apellido,[a.kI.required])}),this.idprueba=this.user.id,this.idpruebapersona=this.user?.persona?.id_persona}Actualizardatos(t){const o=this.usuarioForm.value;console.log(o),o.id_persona=t?.persona?.id_persona,console.log(o.id_persona),console.log(this.idprueba),d().fire({title:"Esta seguro de modificar sus datos?",showCancelButton:!0,confirmButtonText:"SI",denyButtonText:"NO",icon:"info"}).then(i=>{i.isConfirmed?this.personaService.existencia(this.idprueba).subscribe(s=>{1==s?(this.personaService.createPersona(o).subscribe(c=>{console.log(c),this.login.getCurrentUser().subscribe(u=>{d().fire("Operaci\xf3n exitosa!","La persona ha sido creada con \xe9xito","success"),this.login.setUser(u),this.user=this.login.getUser()})}),this.personaService.actualizarPersonaIdEnUsuario(this.idprueba,this.idpruebapersona).subscribe(c=>{console.log(c)})):this.personaService.actualizar(o.id_persona,o).subscribe(c=>{console.log(c),this.login.getCurrentUser().subscribe(u=>{d().fire("Operaci\xf3n exitosa!","Los datos han sido modificados con \xe9xito","success"),this.login.setUser(u),this.user=this.login.getUser()})})}):d().fire("Se ha cancelado la operaci\xf3n","","info")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.r),e.Y36(he.i),e.Y36(ge.J))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-profile"]],decls:123,vars:21,consts:[[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col","col-lg-12","mb-4","mb-lg-0"],[1,"card","mb-3",2,"border-radius","0.5rem"],[1,"row","g-0"],[1,"col-md-4","gradient-custom","text-center","text-white",2,"border-top-left-radius","0.5rem","border-bottom-left-radius","0.5rem"],["src","./assets/profile.png","alt","Avatar",1,"img-fluid","my-5",2,"width","80px"],[1,"col-md-8"],[1,"card-body","p-4"],[1,"mt-0","mb-4"],[1,"row","pt-1"],[1,"col-6","mb-3"],[1,"text-muted"],[1,"button-group","w-60","d-flex","justify-content-center",2,"margin","1%","align-items","center"],["mat-raised-button","","color","primary","data-bs-toggle","modal","data-bs-target","#exampleModal3"],["mat-raised-button","","color","primary","data-bs-toggle","modal","data-bs-target","#exampleModal4",2,"margin-left","3%",3,"click"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","font-weight-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["appearance","outline",1,"full-width"],["disabled","","required","","name","username","matInput","",3,"value"],["required","","name","password2","type","password","matInput","","placeholder","Digite su contrase\xf1a",3,"ngModel","ngModelChange"],[3,"formGroup"],["required","","formControlName","confirmPassword","type","password","matInput","","placeholder","Repita su contrase\xf1a"],[4,"ngIf"],[1,"container","text-center"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",2,"margin-left","5%"],["id","exampleModal4","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["disabled","","required","","name","id_usuario","matInput","",3,"value"],[3,"formGroup","ngSubmit"],["formControlName","correo","matInput","","placeholder","Digite su correo",1,"form-control"],["class","alert alert-danger","style","color: black;",4,"ngIf"],["formControlName","celular","matInput","","placeholder","Digite su celular",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["formControlName","direccion","name","direccion","type","text","matInput","","placeholder","Digite su direccion",1,"form-control"],["formControlName","primer_nombre","name","primer_nombre","type","text","matInput","","placeholder","Digite su nombre",1,"form-control"],["formControlName","primer_apellido","name","primer_apellido","type","text","matInput","","placeholder","Digite su apellido",1,"form-control"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled"],[1,"alert","alert-danger",2,"color","black"],[1,"alert","alert-danger"]],template:function(t,o){if(1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.TgZ(8,"h5"),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"h1"),e._uU(15,"Informaci\xf3n"),e.qZA(),e._UZ(16,"hr",9),e.TgZ(17,"div",10)(18,"div",11)(19,"h3"),e._uU(20,"Email"),e.qZA(),e.TgZ(21,"p",12),e._uU(22),e.qZA()(),e.TgZ(23,"div",11)(24,"h3"),e._uU(25,"Celular"),e.qZA(),e.TgZ(26,"p",12),e._uU(27),e.qZA()()(),e.TgZ(28,"div",10)(29,"div",11)(30,"h3"),e._uU(31,"Username"),e.qZA(),e.TgZ(32,"p",12),e._uU(33),e.qZA()(),e.TgZ(34,"div",11)(35,"h3"),e._uU(36,"Direccion"),e.qZA(),e.TgZ(37,"p",12),e._uU(38),e.qZA()()()(),e.TgZ(39,"div",13)(40,"button",14)(41,"mat-icon"),e._uU(42,"vpn_key"),e.qZA(),e._uU(43,"Cambiar Contrase\xf1a "),e.qZA(),e.TgZ(44,"button",15),e.NdJ("click",function(){return o.edit()}),e.TgZ(45,"mat-icon"),e._uU(46,"edit"),e.qZA(),e._uU(47,"Actualizar Datos "),e.qZA()()()()()()()()(),e.TgZ(48,"div",16)(49,"div",17)(50,"div",18)(51,"div",19)(52,"strong")(53,"h1",20),e._uU(54," Cambiar Contrase\xf1a "),e.qZA()(),e._UZ(55,"button",21),e.qZA(),e.TgZ(56,"div",22)(57,"mat-form-field",23)(58,"mat-label"),e._uU(59,"Nombre de usuario"),e.qZA(),e._UZ(60,"input",24),e.qZA(),e.TgZ(61,"mat-form-field",23)(62,"mat-label"),e._uU(63,"Nueva Contrase\xf1a"),e.qZA(),e.TgZ(64,"input",25),e.NdJ("ngModelChange",function(s){return o.usuariosEditGuar.password=s}),e.qZA()(),e.TgZ(65,"form",26)(66,"mat-form-field",23)(67,"mat-label"),e._uU(68,"Confirmar Contrase\xf1a"),e.qZA(),e._UZ(69,"input",27),e.YNc(70,be,2,0,"mat-error",28),e.qZA(),e.TgZ(71,"div",29)(72,"button",30),e.NdJ("click",function(){return o.Actualizar(o.usuariosEditGuar)}),e.TgZ(73,"mat-icon"),e._uU(74,"save"),e.qZA(),e._uU(75," Guardar "),e.qZA(),e.TgZ(76,"button",31),e._uU(77," Cancelar "),e.qZA()()()()()()(),e.TgZ(78,"div",32)(79,"div",17)(80,"div",18)(81,"div",19)(82,"strong")(83,"h1",20),e._uU(84," Actualizar Datos "),e.qZA()(),e._UZ(85,"button",21),e.qZA(),e.TgZ(86,"div",22)(87,"mat-form-field",23)(88,"mat-label"),e._uU(89,"Nombre de usuario"),e.qZA(),e._UZ(90,"input",24),e.qZA(),e.TgZ(91,"mat-form-field",23)(92,"mat-label"),e._uU(93,"ID usuario"),e.qZA(),e._UZ(94,"input",33),e.qZA(),e.TgZ(95,"form",34),e.NdJ("ngSubmit",function(){return o.Actualizardatos(o.usuariosEditGuar)}),e.TgZ(96,"mat-label"),e._uU(97,"Email"),e.qZA(),e._UZ(98,"input",35),e.YNc(99,_e,2,0,"mat-error",36),e.TgZ(100,"mat-label"),e._uU(101,"Celular"),e.qZA(),e._UZ(102,"input",37),e.YNc(103,fe,3,0,"div",38),e.TgZ(104,"mat-label"),e._uU(105,"Direccion"),e.qZA(),e._UZ(106,"input",39),e.YNc(107,Ce,2,1,"div",38),e.TgZ(108,"mat-label"),e._uU(109,"Nombre"),e.qZA(),e._UZ(110,"input",40),e.YNc(111,Ue,2,1,"div",38),e.TgZ(112,"mat-label"),e._uU(113,"Apellido"),e.qZA(),e._UZ(114,"input",41),e.YNc(115,Ze,2,1,"div",38),e.TgZ(116,"div",29)(117,"button",42)(118,"mat-icon"),e._uU(119,"save"),e.qZA(),e._uU(120,"Guardar "),e.qZA(),e.TgZ(121,"button",31),e._uU(122," Cancelar "),e.qZA()()()()()()()),2&t){let i;e.xp6(9),e.AsE(" ",null==o.user||null==o.user.persona?null:o.user.persona.primer_apellido," ",null==o.user||null==o.user.persona?null:o.user.persona.primer_nombre," "),e.xp6(2),e.Oqu(o.rol),e.xp6(11),e.Oqu(null==o.user||null==o.user.persona?null:o.user.persona.correo),e.xp6(5),e.Oqu(null==o.user||null==o.user.persona?null:o.user.persona.celular),e.xp6(6),e.Oqu(null==o.user?null:o.user.username),e.xp6(5),e.Oqu(null==o.user||null==o.user.persona?null:o.user.persona.direccion),e.xp6(22),e.Q6J("value",o.user.username),e.xp6(4),e.Q6J("ngModel",o.usuariosEditGuar.password),e.xp6(1),e.Q6J("formGroup",o.contraForm),e.xp6(5),e.Q6J("ngIf",(null==(i=o.contraForm.get("confirmPassword"))?null:i.invalid)&&(null==(i=o.contraForm.get("confirmPassword"))?null:i.touched)),e.xp6(2),e.Q6J("disabled",o.contraForm.invalid),e.xp6(18),e.Q6J("value",o.user.username),e.xp6(4),e.Q6J("value",o.user.id),e.xp6(1),e.Q6J("formGroup",o.usuarioForm),e.xp6(4),e.Q6J("ngIf",o.usuarioForm.controls.correo.invalid&&o.usuarioForm.controls.correo.touched),e.xp6(4),e.Q6J("ngIf",o.usuarioForm.controls.celular.invalid&&o.usuarioForm.controls.celular.touched),e.xp6(4),e.Q6J("ngIf",o.usuarioForm.controls.direccion.invalid&&o.usuarioForm.controls.direccion.touched),e.xp6(4),e.Q6J("ngIf",o.usuarioForm.controls.primer_nombre.invalid&&o.usuarioForm.controls.primer_nombre.touched),e.xp6(4),e.Q6J("ngIf",o.usuarioForm.controls.primer_apellido.invalid&&o.usuarioForm.controls.primer_apellido.touched),e.xp6(2),e.Q6J("disabled",o.usuarioForm.invalid)}},dependencies:[h.O5,g.lW,m.KE,m.hX,m.TO,v.Nt,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.sg,a.u,f.Hw],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#f6d365;background:linear-gradient(to right bottom,rgb(117,146,241),rgb(8,5,182))}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224;background:url(https://source.unsplash.com/E8Ufcyxz514/2400x1823) center / cover no-repeat fixed}"]}),r})();var w=l(7009),C=l(1635),we=l(3546);function ye(r,n){1&r&&(e.TgZ(0,"div",21)(1,"h2"),e._uU(2,"El Instituto Superior Universitario Tecnol\xf3gico del Azuay se consolida como una instituci\xf3n de educaci\xf3n superior que sustenta sus procesos de ense\xf1anza-aprendizaje en el \xe1mbito t\xe9cnico y tecnol\xf3gico de grado y posgrado, con la m\xe1s alta calidad acad\xe9mica y humana, sobre la base de fundamentos cient\xedficos; con el prop\xf3sito de proveer soluciones a los problemas y necesidades de la sociedad desde la docencia, la investigaci\xf3n cient\xedfica y la vinculaci\xf3n."),e.qZA()())}function Me(r,n){1&r&&(e.TgZ(0,"div",22)(1,"h2"),e._uU(2,"Ser una instituci\xf3n de calidad, solidaria, inclusiva, intercultural y diversa, reconocida por su excelencia acad\xe9mica y sus aportes a la sociedad en el \xe1rea de la investigaci\xf3n, innovaci\xf3n tecnol\xf3gica y vinculaci\xf3n, a nivel nacional e internacional, promoviendo el desarrollo integral de la persona y el entorno, en busca de una sociedad justa y equitativa."),e.qZA()())}function Se(r,n){1&r&&(e.TgZ(0,"div",23)(1,"h3"),e._uU(2,"Los principios por los cuales se rige la instituci\xf3n, se\xf1alados en la Constituci\xf3n de la Rep\xfablica y la Ley Org\xe1nica de Educaci\xf3n Superior,"),e._UZ(3,"br"),e._uU(4,"son los siguientes: "),e._UZ(5,"br"),e._uU(6,"\xa0\xa0\xa0\xa0\xa0\xa0a)\xa0Cogobierno. "),e._UZ(7,"br"),e._uU(8,"\xa0\xa0\xa0\xa0\xa0\xa0b)\xa0Igualdad de oportunidades. "),e._UZ(9,"br"),e._uU(10,"\xa0\xa0\xa0\xa0\xa0\xa0c)\xa0Calidad. "),e._UZ(11,"br"),e._uU(12,"\xa0\xa0\xa0\xa0\xa0\xa0d)\xa0Pertinencia. "),e._UZ(13,"br"),e._uU(14,"\xa0\xa0\xa0\xa0\xa0\xa0e)\xa0Integralidad. "),e._UZ(15,"br"),e._uU(16,"\xa0\xa0\xa0\xa0\xa0\xa0f)\xa0Autodeterminaci\xf3n para la producci\xf3n del pensamiento y conocimiento. "),e._UZ(17,"br"),e._uU(18,"\xa0\xa0\xa0\xa0\xa0\xa0g)\xa0Universalidad. "),e._UZ(19,"br"),e._uU(20,"\xa0\xa0\xa0\xa0\xa0\xa0h)\xa0Equidad. "),e._UZ(21,"br"),e._uU(22,"\xa0\xa0\xa0\xa0\xa0\xa0i)\xa0Progresividad. "),e._UZ(23,"br"),e._uU(24,"\xa0\xa0\xa0\xa0\xa0\xa0j)\xa0Interculturalidad. "),e._UZ(25,"br"),e._uU(26,"\xa0\xa0\xa0\xa0\xa0\xa0k)\xa0Solidaridad. "),e._UZ(27,"br"),e._uU(28,"\xa0\xa0\xa0\xa0\xa0\xa0l)\xa0Movilidad. "),e._UZ(29,"br"),e._uU(30,"\xa0\xa0\xa0\xa0\xa0\xa0m)\xa0Inclusi\xf3n. "),e._UZ(31,"br"),e._uU(32,"\xa0\xa0\xa0\xa0\xa0\xa0n)\xa0Humanismo. "),e._UZ(33,"br"),e._uU(34,"\xa0\xa0\xa0\xa0\xa0\xa0o)\xa0Responsabilidad. "),e._UZ(35,"br"),e._uU(36,"\xa0\xa0\xa0\xa0\xa0\xa0p)\xa0Trabajo Colaborativo. "),e._UZ(37,"br"),e._uU(38,"Estos principios se aplicar\xe1n bajo criterios de calidad, eficiencia, eficacia, transparencia, responsabilidad y participaci\xf3n."),e._UZ(39,"br"),e._uU(40,"Los mecanismos para efectivizarlos se desarrollan en los art\xedculos que conforman el presente Estatuto. "),e.qZA()())}const A=function(r){return{selected:r}};let y=(()=>{class r{constructor(t,o,i){this._snack=t,this.loginService=o,this.router=i,this.loginData={username:"",password:""},this.mision=!1,this.vision=!1,this.prin=!1,this.sobre=!1,this.sobre2=!1,this.sobre3=!1}ngOnInit(){this.loginService.isLoggedIn()&&(this.router.navigate(["user-dashboard"]),location.replace("/use/user-dashboard"))}abrir(){this.sobre=!0,this.mision=!0}cerrar(){this.sobre=!1,this.mision=!1}abrir2(){this.sobre2=!0,this.vision=!0}cerrar2(){this.sobre2=!1,this.vision=!1}abrir3(){this.sobre3=!0,this.prin=!0}cerrar3(){this.sobre3=!1,this.prin=!1}formSubmit(){""!=this.loginData.username.trim()&&null!=this.loginData.username.trim()?""!=this.loginData.password.trim()&&null!=this.loginData.password.trim()?this.loginService.generateToken(this.loginData).subscribe(t=>{console.log(t),this.loginService.loginUser(t.token),this.loginService.getCurrentUser().subscribe(o=>{this.loginService.setUser(o),console.log(o),"ADMIN"==this.loginService.getUserRole()||"RESPONSABLE"==this.loginService.getUserRole()?(this.router.navigate(["user-dashboard"]),location.replace("/use/user-dashboard"),this.loginService.loginStatusSubjec.next(!0)):"SUPERADMIN"==this.loginService.getUserRole()?(this.router.navigate(["dashboard"]),location.replace("/sup/dashboard"),this.loginService.loginStatusSubjec.next(!0)):"AUTORIDAD"==this.loginService.getUserRole()?(this.router.navigate(["user-dashboard"]),location.replace("/use/user-dashboard"),this.loginService.loginStatusSubjec.next(!0),window.location.reload()):this.loginService.logout()})},t=>{d().fire("Error","Detalles inv\xe1lidos , vuelva a intentar !!","warning")}):d().fire("Error","La password es requerida !!","warning"):d().fire("Error","El username de usuario es requerido !!","warning")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(w.ux),e.Y36(b.r),e.Y36(C.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:42,vars:14,consts:[[1,"container",2,"background-color","inherit","border","none","position","relative"],[1,"row"],[1,"col-md-7","gradient-custom","text-center","text-white"],[1,"d-flex","justify-content-center","align-items-center",2,"height","100%"],["src","../../../assets/LOGO_CUADRADO_SIN FONDO.png","width","70%","height","auto"],[1,"col-md-5"],[1,"panelform"],[1,"text-center",2,"margin-top","6%"],[3,"ngSubmit"],["appearance","outline",1,"full-width"],["matPrefix","",1,"mat-icon-start"],["required","","name","username","matInput","","placeholder","Ingrese su usuario",3,"ngModel","ngModelChange"],["name","password","required","","type","password","matInput","","placeholder","Digite su contrase\xf1a",3,"ngModel","ngModelChange"],[1,"text-center"],["type","submit","mat-raised-button","","color","primary"],["class","misi",4,"ngIf"],["class","visi",4,"ngIf"],["class","background-container",4,"ngIf"],[1,"row","mt-4"],[1,"col","text-center",2,"margin-top","10%"],["mat-button","",1,"btn-tab",3,"ngClass","mouseenter","mouseleave"],[1,"misi"],[1,"visi"],[1,"background-container"]],template:function(t,o){1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),e._UZ(5,"img",4),e.qZA()(),e.TgZ(6,"div",5)(7,"mat-card",6)(8,"h1",7)(9,"strong"),e._uU(10,"BIENVENIDO"),e.qZA()(),e.TgZ(11,"form",8),e.NdJ("ngSubmit",function(){return o.formSubmit()}),e.TgZ(12,"mat-form-field",9)(13,"mat-icon",10),e._uU(14,"account_circle"),e.qZA(),e.TgZ(15,"mat-label"),e._uU(16,"Usuario"),e.qZA(),e.TgZ(17,"input",11),e.NdJ("ngModelChange",function(s){return o.loginData.username=s}),e.qZA()(),e.TgZ(18,"mat-form-field",9)(19,"mat-icon",10),e._uU(20,"lock"),e.qZA(),e.TgZ(21,"mat-label"),e._uU(22,"Contrase\xf1a"),e.qZA(),e.TgZ(23,"input",12),e.NdJ("ngModelChange",function(s){return o.loginData.password=s}),e.qZA()(),e._UZ(24,"br")(25,"br"),e.TgZ(26,"div",13)(27,"button",14),e._uU(28," Iniciar sesi\xf3n "),e.qZA()(),e._UZ(29,"br")(30,"br"),e.qZA()()()(),e.YNc(31,ye,3,0,"div",15),e.YNc(32,Me,3,0,"div",16),e.YNc(33,Se,41,0,"div",17),e.TgZ(34,"div",18)(35,"div",19)(36,"button",20),e.NdJ("mouseenter",function(){return o.abrir()})("mouseleave",function(){return o.cerrar()}),e._uU(37,"Misi\xf3n"),e.qZA(),e.TgZ(38,"button",20),e.NdJ("mouseenter",function(){return o.abrir2()})("mouseleave",function(){return o.cerrar2()}),e._uU(39,"Visi\xf3n"),e.qZA(),e.TgZ(40,"button",20),e.NdJ("mouseenter",function(){return o.abrir3()})("mouseleave",function(){return o.cerrar3()}),e._uU(41,"Principios"),e.qZA()()()()()),2&t&&(e.xp6(17),e.Q6J("ngModel",o.loginData.username),e.xp6(6),e.Q6J("ngModel",o.loginData.password),e.xp6(8),e.Q6J("ngIf",o.mision),e.xp6(1),e.Q6J("ngIf",o.vision),e.xp6(1),e.Q6J("ngIf",o.prin),e.xp6(3),e.Q6J("ngClass",e.VKq(8,A,o.sobre)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,A,o.sobre2)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,A,o.sobre3)))},dependencies:[h.mk,h.O5,g.lW,m.KE,m.hX,m.qo,v.Nt,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F,we.a8,f.Hw],styles:['.full-width[_ngcontent-%COMP%]{width:100%;padding:6%}.contenedor[_ngcontent-%COMP%]{display:flex;height:500px;justify-content:space-between;border:none;background-color:inherit;padding-top:20px}.centrar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.btn-tab[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#fffbfb66;color:#000;font-weight:700;transform-origin:top right;transform:skew(-20deg);cursor:pointer;transition:background-color .3s ease-in-out,color .3s ease-in-out}.selected[_ngcontent-%COMP%]{background-color:#044d9b8c;color:#fff}.background-container[_ngcontent-%COMP%]{position:absolute;margin-top:-41%;background-color:#fffc;z-index:9999;background-size:cover;background-repeat:no-repeat;background-position:center center;border:10px solid;border-top-color:#1b4374;border-right-color:#dca500;border-bottom-color:#1b4374;border-left-color:#dca500}.misi[_ngcontent-%COMP%]{position:absolute;background-color:#fafafab3;margin-top:-3%;z-index:9999;border:10px solid;border-top-color:#1b4374;border-right-color:#dca500;border-bottom-color:#1b4374;border-left-color:#dca500}.visi[_ngcontent-%COMP%]{position:absolute;background-color:#fafafab3;z-index:9999;border:10px solid;border-top-color:#dca500;border-right-color:#1b4374;border-bottom-color:#dca500;border-left-color:#1b4374}.background-container[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:0;background-image:url(https://eduv.tecazuay.edu.ec/pluginfile.php/1/theme_academi/logo/1686171984/LOGO%20CUADRADO_SIN%20FONDO.png);opacity:.5}.panelform[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fff;box-shadow:0 1.5rem 2rem #171c24c9;border-radius:10px}.mat-form-field[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{border-radius:20px}button[type=submit][_ngcontent-%COMP%]{border-radius:10px}.div[_ngcontent-%COMP%]{border:none}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224;background:url(https://images.unsplash.com/photo-1544377193-33dcf4d68fb5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80) center / cover no-repeat fixed}body[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:inherit;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}']}),r})();var De=l(3071);let ke=(()=>{class r{constructor(t,o){this.userService=t,this.snack=o,this.usuario={username:"",password:""},this.rol=0}ngOnInit(){}formSubmit(){console.log(this.usuario),""!=this.usuario.username&&null!=this.usuario.username?this.userService.a\u00f1adirUsuario(this.usuario,this.rol).subscribe(t=>{console.log(t),d().fire("Usuario guardado","Usuario registrado con exito en el sistema","success")},t=>{console.log(t),this.snack.open("Ha ocurrido un error en el sistema !!","Aceptar",{duration:3e3})}):this.snack.open("El nombre de usuario es requerido !!","Aceptar",{duration:3e3,verticalPosition:"top",horizontalPosition:"right"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(De.K),e.Y36(w.ux))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signup"]],decls:31,vars:3,consts:[[1,"bootstrap-wrapper"],[1,"container"],[1,"row",2,"margin-top","20px"],[1,"col-md-6","offset-md-3"],[1,"container","text-center"],["src","../../../assets/icon.png","width","100","height","100"],[1,"text-center"],[3,"ngSubmit"],["appearance","outline",1,"full-width"],["required","","name","username","matInput","","placeholder","Digite su nombre de usuario",3,"ngModel","ngModelChange"],["required","","name","password","type","password","matInput","","placeholder","Digite su contrase\xf1a",3,"ngModel","ngModelChange"],["required","","name","rol","type","number","matInput","","placeholder","ingrese el rol",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary"],["type","reset","mat-raised-button","","color","accent",2,"margin-left","20px"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"h1",6),e._uU(7,"Registrate aqui"),e.qZA(),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return o.formSubmit()}),e.TgZ(9,"mat-form-field",8)(10,"mat-label"),e._uU(11,"Nombre de usuario"),e.qZA(),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(s){return o.usuario.username=s}),e.qZA(),e.TgZ(13,"mat-hint"),e._uU(14,"El nombre de usuario debe ser \xfanico"),e.qZA()(),e.TgZ(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Contrase\xf1a"),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(s){return o.usuario.password=s}),e.qZA()(),e.TgZ(19,"mat-form-field",8)(20,"mat-label"),e._uU(21,"Rol"),e.qZA(),e.TgZ(22,"input",11),e.NdJ("ngModelChange",function(s){return o.rol=s}),e.qZA()(),e.TgZ(23,"div",4)(24,"button",12),e._uU(25,"Registrar"),e.qZA(),e.TgZ(26,"button",13),e._uU(27,"Limpiar"),e.qZA()()(),e._UZ(28,"br")(29,"br")(30,"br"),e.qZA()()()()),2&t&&(e.xp6(12),e.Q6J("ngModel",o.usuario.username),e.xp6(6),e.Q6J("ngModel",o.usuario.password),e.xp6(4),e.Q6J("ngModel",o.rol))},dependencies:[g.lW,m.KE,m.hX,m.bx,v.Nt,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.On,a.F]}),r})();var M=l(5816);const Ie=[{path:"",component:y,pathMatch:"full"},{path:"signup",component:ke,pathMatch:"full"},{path:"login",component:y,pathMatch:"full"},{path:"userprofile",component:Te,pathMatch:"full",canActivate:[T.m],data:{allowedRoles:["RESPONSABLE","SUPERADMIN","ADMIN","AUTORIDAD"]}},{path:"user-dashboard",component:pe,pathMatch:"full",canActivate:[T.m],data:{allowedRoles:["RESPONSABLE","SUPERADMIN","ADMIN","AUTORIDAD"]}},{path:"pagenotfoud",component:M.r},{path:"**",component:M.r}];let qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[C.Bz.forChild(Ie),C.Bz]}),r})();var Oe=l(1327);let Ne=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[h.ez,qe,_.Is,Oe.m,_.Is]}),r})()}}]);