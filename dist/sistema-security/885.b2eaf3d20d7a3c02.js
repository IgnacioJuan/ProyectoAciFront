"use strict";(self.webpackChunksistema_security=self.webpackChunksistema_security||[]).push([[885],{885:(je,F,f)=>{f.r(F),f.d(F,{SuperadminModule:()=>Rl});var S=f(6895),k=f(1635),I=f(5402),G=f(5861),R=f(5679),j=f(2802),z=f(5226),x=f.n(z),he=f(6733),c=f(6865),d=f(3580);function $(i,o){let t=[];for(let n=0;n<o;n+=1)t[n]=[];for(let n of i)t[n.row].push(n);return t}function V(i,o){let t=[];for(let n=0;n<o;n+=1)t[n]=[];for(let n of i)t[n.firstCol].push(n);return t}function me(i,o){let t=[];if(i){for(let n=0;n<o;n+=1)t[n]={affectedInstances:i.affectedInstances,isEvent:i.isEvent,segs:[]};for(let n of i.segs)t[n.row].segs.push(n)}else for(let n=0;n<o;n+=1)t[n]=null;return t}(0,c.cw)(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');const fe=(0,c.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function ge(i){let{display:o}=i.eventRange.ui;return"list-item"===o||"auto"===o&&!i.eventRange.def.allDay&&i.firstCol===i.lastCol&&i.isStart&&i.isEnd}class be extends c.B{render(){let{props:o}=this;return(0,d.az)(c.cj,Object.assign({},o,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:fe,defaultDisplayEventEnd:o.defaultDisplayEventEnd,disableResizing:!o.seg.eventRange.def.allDay}))}}class _e extends c.B{render(){let{props:o,context:t}=this,{options:n}=t,{seg:a}=o,s=(0,c.bQ)(a,n.eventTimeFormat||fe,t,!0,o.defaultDisplayEventEnd);return(0,d.az)(c.cn,Object.assign({},o,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:(0,c.bU)(o.seg,t),defaultGenerator:Le,timeText:s,isResizing:!1,isDateSelecting:!1}))}}function Le(i){return(0,d.az)(d.HY,null,(0,d.az)("div",{className:"fc-daygrid-event-dot",style:{borderColor:i.borderColor||i.backgroundColor}}),i.timeText&&(0,d.az)("div",{className:"fc-event-time"},i.timeText),(0,d.az)("div",{className:"fc-event-title"},i.event.title||(0,d.az)(d.HY,null,"\xa0")))}class Je extends c.B{constructor(){super(...arguments),this.compileSegs=(0,c.z)(He)}render(){let{props:o}=this,{allSegs:t,invisibleSegs:n}=this.compileSegs(o.singlePlacements);return(0,d.az)(c.cr,{elClasses:["fc-daygrid-more-link"],dateProfile:o.dateProfile,todayRange:o.todayRange,allDayDate:o.allDayDate,moreCnt:o.moreCnt,allSegs:t,hiddenSegs:n,alignmentElRef:o.alignmentElRef,alignGridTop:o.alignGridTop,extraDateSpan:o.extraDateSpan,popoverContent:()=>{let a=(o.eventDrag?o.eventDrag.affectedInstances:null)||(o.eventResize?o.eventResize.affectedInstances:null)||{};return(0,d.az)(d.HY,null,t.map(r=>{let s=r.eventRange.instance.instanceId;return(0,d.az)("div",{className:"fc-daygrid-event-harness",key:s,style:{visibility:a[s]?"hidden":""}},ge(r)?(0,d.az)(_e,Object.assign({seg:r,isDragging:!1,isSelected:s===o.eventSelection,defaultDisplayEventEnd:!1},(0,c.bS)(r,o.todayRange))):(0,d.az)(be,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:s===o.eventSelection,defaultDisplayEventEnd:!1},(0,c.bS)(r,o.todayRange))))}))}})}}function He(i){let o=[],t=[];for(let n of i)o.push(n.seg),n.isVisible||t.push(n.seg);return{allSegs:o,invisibleSegs:t}}const Fe=(0,c.x)({week:"narrow"});class Ge extends c.be{constructor(){super(...arguments),this.rootElRef=(0,d.Vf)(),this.state={dayNumberId:(0,c.a5)()},this.handleRootEl=o=>{(0,c.Y)(this.rootElRef,o),(0,c.Y)(this.props.elRef,o)}}render(){let{context:o,props:t,state:n,rootElRef:a}=this,{options:r,dateEnv:s}=o,{date:l,dateProfile:u}=t;const h=t.showDayNumber&&function Ve(i,o,t){const{start:n,end:a}=o,r=(0,c.bg)(a,-1),s=t.getYear(n),l=t.getMonth(n),u=t.getYear(r),h=t.getMonth(r);return!(s===u&&l===h)&&Boolean(i.valueOf()===n.valueOf()||1===t.getDay(i)&&i.valueOf()<a.valueOf())}(l,u.currentRange,s);return(0,d.az)(c.cl,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:$e,date:l,dateProfile:u,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:h,extraRenderProps:t.extraRenderProps},(p,_)=>(0,d.az)("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&(0,d.az)(c.cq,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:(0,c.b0)(o,l,"week"),date:l,defaultFormat:Fe}),!_.isDisabled&&(t.showDayNumber||(0,c.cm)(r)||t.forceDayTop)?(0,d.az)("div",{className:"fc-daygrid-day-top"},(0,d.az)(p,{elTag:"a",elClasses:["fc-daygrid-day-number",h&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},(0,c.b0)(o,l)),{id:n.dayNumberId})})):t.showDayNumber?(0,d.az)("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},(0,d.az)("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,(0,d.az)("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,(0,d.az)("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},(0,d.az)(Je,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:a,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),(0,d.az)("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function $e(i){return i.dayNumberText||(0,d.az)(d.HY,null,"\xa0")}function Y(i,o,t,n){if(i.firstCol===o&&i.lastCol===t-1)return i;let a=i.eventRange,r=a.range,s=(0,c.o)(r,{start:n[o].date,end:(0,c.t)(n[t-1].date,1)});return Object.assign(Object.assign({},i),{firstCol:o,lastCol:t-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:s},isStart:i.isStart&&s.start.valueOf()===r.start.valueOf(),isEnd:i.isEnd&&s.end.valueOf()===r.end.valueOf()})}class et extends c.bA{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(o){const t=super.addSegs(o),{entriesByLevel:n}=this,a=r=>!this.forceHidden[(0,c.bB)(r)];for(let r=0;r<n.length;r+=1)n[r]=n[r].filter(a);return t}handleInvalidInsertion(o,t,n){const{entriesByLevel:a,forceHidden:r}=this,{touchingEntry:s,touchingLevel:l,touchingLateral:u}=o;if(this.hiddenConsumes&&s){const h=(0,c.bB)(s);if(!r[h])if(this.allowReslicing){const p=Object.assign(Object.assign({},s),{span:(0,c.bF)(s.span,t.span)});r[(0,c.bB)(p)]=!0,a[l][u]=p,this.splitEntry(s,t,n)}else r[h]=!0,n.push(s)}return super.handleInvalidInsertion(o,t,n)}}class ve extends c.be{constructor(){super(...arguments),this.cellElRefs=new c.cf,this.frameElRefs=new c.cf,this.fgElRefs=new c.cf,this.segHarnessRefs=new c.cf,this.rootElRef=(0,d.Vf)(),this.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},this.handleResize=o=>{o&&this.updateSizing(!0)}}render(){let{props:o,state:t,context:n}=this,{options:a}=n,r=o.cells.length,s=V(o.businessHourSegs,r),l=V(o.bgEventSegs,r),u=V(this.getHighlightSegs(),r),h=V(this.getMirrorSegs(),r),{singleColPlacements:p,multiColPlacements:_,moreCnts:v,moreMarginTops:m}=function We(i,o,t,n,a,r,s){let l=new et;l.allowReslicing=!0,l.strictOrder=n,!0===o||!0===t?(l.maxCoord=r,l.hiddenConsumes=!0):"number"==typeof o?l.maxStackCnt=o:"number"==typeof t&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let u=[],h=[];for(let Z=0;Z<i.length;Z+=1){let A=i[Z],{instanceId:D}=A.eventRange.instance,w=a[D];null!=w?u.push({index:Z,thickness:w,span:{start:A.firstCol,end:A.lastCol+1}}):h.push(A)}let p=l.addSegs(u),_=l.toRects(),{singleColPlacements:v,multiColPlacements:m,leftoverMargins:C}=function Ke(i,o,t){let n=function Xe(i,o){let t=[];for(let n=0;n<o;n+=1)t.push([]);for(let n of i)for(let a=n.span.start;a<n.span.end;a+=1)t[a].push(n);return t}(i,t.length),a=[],r=[],s=[];for(let l=0;l<t.length;l+=1){let u=n[l],h=[],p=0,_=0;for(let m of u)h.push({seg:Y(o[m.index],l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:m.levelCoord,marginTop:m.levelCoord-p}),p=m.levelCoord+m.thickness;let v=[];p=0,_=0;for(let m of u){let C=o[m.index],T=m.span.start===l;_+=m.levelCoord-p,p=m.levelCoord+m.thickness,m.span.end-m.span.start>1?(_+=m.thickness,T&&v.push({seg:Y(C,m.span.start,m.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:m.levelCoord,marginTop:0})):T&&(v.push({seg:Y(C,m.span.start,m.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:m.levelCoord,marginTop:_}),_=0)}a.push(h),r.push(v),s.push(_)}return{singleColPlacements:a,multiColPlacements:r,leftoverMargins:s}}(_,i,s),g=[],T=[];for(let Z of h){m[Z.firstCol].push({seg:Z,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let A=Z.firstCol;A<=Z.lastCol;A+=1)v[A].push({seg:Y(Z,A,A+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Z=0;Z<s.length;Z+=1)g.push(0);for(let Z of p){let A=i[Z.index],D=Z.span;m[D.start].push({seg:Y(A,D.start,D.end,s),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=D.start;w<D.end;w+=1)g[w]+=1,v[w].push({seg:Y(A,w,w+1,s),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Z=0;Z<s.length;Z+=1)T.push(C[Z]);return{singleColPlacements:v,multiColPlacements:m,moreCnts:g,moreMarginTops:T}}((0,c.bR)(o.fgEventSegs,a.eventOrder),o.dayMaxEvents,o.dayMaxEventRows,a.eventOrderStrict,t.eventInstanceHeights,t.maxContentHeight,o.cells),C=o.eventDrag&&o.eventDrag.affectedInstances||o.eventResize&&o.eventResize.affectedInstances||{};return(0,d.az)("tr",{ref:this.rootElRef,role:"row"},o.renderIntro&&o.renderIntro(),o.cells.map((g,T)=>{let Z=this.renderFgSegs(T,o.forPrint?p[T]:_[T],o.todayRange,C),A=this.renderFgSegs(T,function tt(i,o){if(!i.length)return[];let t=function it(i){let o={};for(let t of i)for(let n of t)o[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return o}(o);return i.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:t[n.eventRange.instance.instanceId],marginTop:0}))}(h[T],_),o.todayRange,{},Boolean(o.eventDrag),Boolean(o.eventResize),!1);return(0,d.az)(Ge,{key:g.key,elRef:this.cellElRefs.createRef(g.key),innerElRef:this.frameElRefs.createRef(g.key),dateProfile:o.dateProfile,date:g.date,showDayNumber:o.showDayNumbers,showWeekNumber:o.showWeekNumbers&&0===T,forceDayTop:o.showWeekNumbers,todayRange:o.todayRange,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,extraRenderProps:g.extraRenderProps,extraDataAttrs:g.extraDataAttrs,extraClassNames:g.extraClassNames,extraDateSpan:g.extraDateSpan,moreCnt:v[T],moreMarginTop:m[T],singlePlacements:p[T],fgContentElRef:this.fgElRefs.createRef(g.key),fgContent:(0,d.az)(d.HY,null,(0,d.az)(d.HY,null,Z),(0,d.az)(d.HY,null,A)),bgContent:(0,d.az)(d.HY,null,this.renderFillSegs(u[T],"highlight"),this.renderFillSegs(s[T],"non-business"),this.renderFillSegs(l[T],"bg-event")),minHeight:o.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(o,t){this.updateSizing(!(0,c.E)(o,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:o}=this;return o.eventDrag&&o.eventDrag.segs.length?o.eventDrag.segs:o.eventResize&&o.eventResize.segs.length?o.eventResize.segs:o.dateSelectionSegs}getMirrorSegs(){let{props:o}=this;return o.eventResize&&o.eventResize.segs.length?o.eventResize.segs:[]}renderFgSegs(o,t,n,a,r,s,l){let{context:u}=this,{eventSelection:h}=this.props,{framePositions:p}=this.state,_=1===this.props.cells.length,v=r||s||l,m=[];if(p)for(let C of t){let{seg:g}=C,{instanceId:T}=g.eventRange.instance,Z=T+":"+o,A=C.isVisible&&!a[T],D=C.isAbsolute,w="",M="";D&&(u.isRtl?(M=0,w=p.lefts[g.lastCol]-p.lefts[g.firstCol]):(w=0,M=p.rights[g.firstCol]-p.rights[g.lastCol])),m.push((0,d.az)("div",{className:"fc-daygrid-event-harness"+(D?" fc-daygrid-event-harness-abs":""),key:Z,ref:v?null:this.segHarnessRefs.createRef(Z),style:{visibility:A?"":"hidden",marginTop:D?"":C.marginTop,top:D?C.absoluteTop:"",left:w,right:M}},ge(g)?(0,d.az)(_e,Object.assign({seg:g,isDragging:r,isSelected:T===h,defaultDisplayEventEnd:_},(0,c.bS)(g,n))):(0,d.az)(be,Object.assign({seg:g,isDragging:r,isResizing:s,isDateSelecting:l,isSelected:T===h,defaultDisplayEventEnd:_},(0,c.bS)(g,n)))))}return m}renderFillSegs(o,t){let{isRtl:n}=this.context,{todayRange:a}=this.props,{framePositions:r}=this.state,s=[];if(r)for(let l of o){let u=n?{right:0,left:r.lefts[l.lastCol]-r.lefts[l.firstCol]}:{left:0,right:r.rights[l.firstCol]-r.rights[l.lastCol]};s.push((0,d.az)("div",{key:(0,c.bT)(l.eventRange),className:"fc-daygrid-bg-harness",style:u},"bg-event"===t?(0,d.az)(c.cp,Object.assign({seg:l},(0,c.bS)(l,a))):(0,c.co)(t)))}return(0,d.az)(d.HY,{},...s)}updateSizing(o){let{props:t,state:n,frameElRefs:a}=this;if(!t.forPrint&&null!==t.clientWidth){if(o){let u=t.cells.map(h=>a.currentMap[h.key]);if(u.length){let h=this.rootElRef.current,p=new c.ba(h,u,!0,!1);(!n.framePositions||!n.framePositions.similarTo(p))&&this.setState({framePositions:new c.ba(h,u,!0,!1)})}}const r=this.state.eventInstanceHeights,s=this.queryEventInstanceHeights(),l=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({eventInstanceHeights:Object.assign(Object.assign({},r),s),maxContentHeight:l?this.computeMaxContentHeight():null})}}queryEventInstanceHeights(){let o=this.segHarnessRefs.currentMap,t={};for(let n in o){let a=Math.round(o[n].getBoundingClientRect().height),r=n.split(":")[0];t[r]=Math.max(t[r]||0,a)}return t}computeMaxContentHeight(){let o=this.props.cells[0].key,n=this.fgElRefs.currentMap[o];return this.cellElRefs.currentMap[o].getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let o=this.cellElRefs.currentMap;return this.props.cells.map(t=>o[t.key])}}ve.addStateEquality({eventInstanceHeights:c.E});class ot extends c.be{constructor(){super(...arguments),this.splitBusinessHourSegs=(0,c.z)($),this.splitBgEventSegs=(0,c.z)($),this.splitFgEventSegs=(0,c.z)($),this.splitDateSelectionSegs=(0,c.z)($),this.splitEventDrag=(0,c.z)(me),this.splitEventResize=(0,c.z)(me),this.rowRefs=new c.cf}render(){let{props:o,context:t}=this,n=o.cells.length,a=this.splitBusinessHourSegs(o.businessHourSegs,n),r=this.splitBgEventSegs(o.bgEventSegs,n),s=this.splitFgEventSegs(o.fgEventSegs,n),l=this.splitDateSelectionSegs(o.dateSelectionSegs,n),u=this.splitEventDrag(o.eventDrag,n),h=this.splitEventResize(o.eventResize,n),p=n>=7&&o.clientWidth?o.clientWidth/t.options.aspectRatio/6:null;return(0,d.az)(c.ch,{unit:"day"},(_,v)=>(0,d.az)(d.HY,null,o.cells.map((m,C)=>(0,d.az)(ve,{ref:this.rowRefs.createRef(C),key:m.length?m[0].date.toISOString():C,showDayNumbers:n>1,showWeekNumbers:o.showWeekNumbers,todayRange:v,dateProfile:o.dateProfile,cells:m,renderIntro:o.renderRowIntro,businessHourSegs:a[C],eventSelection:o.eventSelection,bgEventSegs:r[C].filter(nt),fgEventSegs:s[C],dateSelectionSegs:l[C],eventDrag:u[C],eventResize:h[C],dayMaxEvents:o.dayMaxEvents,dayMaxEventRows:o.dayMaxEventRows,clientWidth:o.clientWidth,clientHeight:o.clientHeight,cellMinHeight:p,forPrint:o.forPrint}))))}componentDidMount(){const o=this.rowRefs.currentMap[0].getCellEls()[0];this.rootEl=o?o.closest(".fc-daygrid-body"):null,this.rootEl&&this.context.registerInteractiveComponent(this,{el:this.rootEl,isHitComboAllowed:this.props.isHitComboAllowed})}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new c.ba(this.rootEl,this.rowRefs.collect().map(o=>o.getCellEls()[0]),!1,!0),this.colPositions=new c.ba(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(o,t){let{colPositions:n,rowPositions:a}=this,r=n.leftToIndex(o),s=a.topToIndex(t);if(null!=s&&null!=r){let l=this.props.cells[s][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(s,r),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(s,r),rect:{left:n.lefts[r],right:n.rights[r],top:a.tops[s],bottom:a.bottoms[s]},layer:0}}return null}getCellEl(o,t){return this.rowRefs.currentMap[o].getCellEls()[t]}getCellRange(o,t){let n=this.props.cells[o][t].date;return{start:n,end:(0,c.t)(n,1)}}}function nt(i){return i.eventRange.def.allDay}class at extends c.be{constructor(){super(...arguments),this.elRef=(0,d.Vf)(),this.needsScrollReset=!1}render(){let{props:o}=this,{dayMaxEventRows:t,dayMaxEvents:n,expandRows:a}=o,r=!0===n||!0===t;return r&&!a&&(r=!1,t=null,n=null),(0,d.az)("div",{ref:this.elRef,className:["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"].join(" "),style:{width:o.clientWidth,minWidth:o.tableMinWidth}},(0,d.az)("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:o.clientWidth,minWidth:o.tableMinWidth,height:a?o.clientHeight:""}},o.colGroupNode,(0,d.az)("tbody",{role:"presentation"},(0,d.az)(ot,{dateProfile:o.dateProfile,cells:o.cells,renderRowIntro:o.renderRowIntro,showWeekNumbers:o.showWeekNumbers,clientWidth:o.clientWidth,clientHeight:o.clientHeight,businessHourSegs:o.businessHourSegs,bgEventSegs:o.bgEventSegs,fgEventSegs:o.fgEventSegs,dateSelectionSegs:o.dateSelectionSegs,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,dayMaxEvents:n,dayMaxEventRows:t,forPrint:o.forPrint,isHitComboAllowed:o.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(o){o.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const o=function rt(i,o){let t;return o.currentRangeUnit.match(/year|month/)&&(t=i.querySelector(`[data-date="${(0,c.bx)(o.currentDate)}-01"]`)),t||(t=i.querySelector(`[data-date="${(0,c.bv)(o.currentDate)}"]`)),t}(this.elRef.current,this.props.dateProfile);if(o){const t=o.closest(".fc-daygrid-body"),n=t.closest(".fc-scroller"),a=o.getBoundingClientRect().top-t.getBoundingClientRect().top;n.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}class st extends c.bW{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(o,t){return t.sliceRange(o)}}class Ce extends c.be{constructor(){super(...arguments),this.slicer=new st,this.tableRef=(0,d.Vf)()}render(){let{props:o,context:t}=this;return(0,d.az)(at,Object.assign({ref:this.tableRef},this.slicer.sliceProps(o,o.dateProfile,o.nextDayThreshold,t,o.dayTableModel),{dateProfile:o.dateProfile,cells:o.dayTableModel.cells,colGroupNode:o.colGroupNode,tableMinWidth:o.tableMinWidth,renderRowIntro:o.renderRowIntro,dayMaxEvents:o.dayMaxEvents,dayMaxEventRows:o.dayMaxEventRows,showWeekNumbers:o.showWeekNumbers,expandRows:o.expandRows,headerAlignElRef:o.headerAlignElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:o.forPrint}))}}class dt extends c.be{constructor(){super(...arguments),this.headerElRef=(0,d.Vf)()}renderSimpleLayout(o,t){let{props:n,context:a}=this,r=[],s=(0,c.cc)(a.options);return o&&r.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:o}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),(0,d.az)(c.ct,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},(0,d.az)(c.b$,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:r}))}renderHScrollLayout(o,t,n,a){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:s,context:l}=this,u=!s.forPrint&&(0,c.cc)(l.options),h=!s.forPrint&&(0,c.cb)(l.options),p=[];return o&&p.push({type:"header",key:"header",isSticky:u,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:o}]}),p.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),h&&p.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:c.ca}]}),(0,d.az)(c.ct,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},(0,d.az)(r,{liquid:!s.isHeightAuto&&!s.forPrint,forPrint:s.forPrint,collapsibleWidth:s.forPrint,colGroups:[{cols:[{span:n,minWidth:a}]}],sections:p}))}}function pt(i,o){let t=new c.bO(i.renderRange,o);return new c.bV(t,/year|month|week/.test(i.currentRangeUnit))}var ht=(0,he.rx)({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class ut extends dt{constructor(){super(...arguments),this.buildDayTableModel=(0,c.z)(pt),this.headerRef=(0,d.Vf)(),this.tableRef=(0,d.Vf)()}render(){let{options:o,dateProfileGenerator:t}=this.context,{props:n}=this,a=this.buildDayTableModel(n.dateProfile,t),r=o.dayHeaders&&(0,d.az)(c.bK,{ref:this.headerRef,dateProfile:n.dateProfile,dates:a.headerDates,datesRepDistinctDays:1===a.rowCnt}),s=l=>(0,d.az)(Ce,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:a,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:o.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:o.dayMaxEvents,dayMaxEventRows:o.dayMaxEventRows,showWeekNumbers:o.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return o.dayMinWidth?this.renderHScrollLayout(r,s,a.colCnt,o.dayMinWidth):this.renderSimpleLayout(r,s)}},dateProfileGeneratorClass:class lt extends c.U{buildRenderRange(o,t,n){let a=super.buildRenderRange(o,t,n),{props:r}=this;return function ct(i){let r,{dateEnv:o,currentRange:t}=i,{start:n,end:a}=t;if(i.snapToWeek&&(n=o.startOfWeek(n),r=o.startOfWeek(a),r.valueOf()!==a.valueOf()&&(a=(0,c.bh)(r,1))),i.fixedWeekCount){let s=o.startOfWeek(o.startOfMonth((0,c.t)(t.end,-1))),l=Math.ceil((0,c.bi)(s,a));a=(0,c.bh)(a,6-l)}return{start:n,end:a}}({currentRange:a,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});(0,c.cw)('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');class ft extends c.aY{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(o){return o.allDay?["allDay"]:["timed"]}getKeysForEventDef(o){return o.allDay?(0,c.bP)(o)?["timed","allDay"]:["allDay"]:["timed"]}}const gt=(0,c.x)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function xe(i){let o=["fc-timegrid-slot","fc-timegrid-slot-label",i.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return(0,d.az)(c.V.Consumer,null,t=>{if(!i.isLabeled)return(0,d.az)("td",{className:o.join(" "),"data-time":i.isoTimeStr});let{dateEnv:n,options:a,viewApi:r}=t,s=null==a.slotLabelFormat?gt:Array.isArray(a.slotLabelFormat)?(0,c.x)(a.slotLabelFormat[0]):(0,c.x)(a.slotLabelFormat),l={level:0,time:i.time,date:n.toDate(i.date),view:r,text:n.format(i.date,s)};return(0,d.az)(c.C,{elTag:"td",elClasses:o,elAttrs:{"data-time":i.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:bt,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},u=>(0,d.az)("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},(0,d.az)(u,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function bt(i){return i.text}class _t extends c.B{render(){return this.props.slatMetas.map(o=>(0,d.az)("tr",{key:o.key},(0,d.az)(xe,Object.assign({},o))))}}const vt=(0,c.x)({week:"short"});class xt extends c.be{constructor(){super(...arguments),this.allDaySplitter=new ft,this.headerElRef=(0,d.Vf)(),this.rootElRef=(0,d.Vf)(),this.scrollerElRef=(0,d.Vf)(),this.state={slatCoords:null},this.handleScrollTopRequest=o=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=o)},this.renderHeadAxis=(o,t="")=>{let{options:n}=this.context,{dateProfile:a}=this.props,r=a.renderRange,l=1===(0,c.bl)(r.start,r.end)?(0,c.b0)(this.context,r.start,"week"):{};return n.weekNumbers&&"day"===o?(0,d.az)(c.cq,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:r.start,defaultFormat:vt},u=>(0,d.az)("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:t}},(0,d.az)(u,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):(0,d.az)("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},(0,d.az)("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},this.renderTableRowAxis=o=>{let{options:t,viewApi:n}=this.context;return(0,d.az)(c.C,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:t.allDayText,view:n},generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:yt,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},r=>(0,d.az)("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==o?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:o}},(0,d.az)(r,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=o=>{this.setState({slatCoords:o})}}renderSimpleLayout(o,t,n){let{context:a,props:r}=this,s=[],l=(0,c.cc)(a.options);return o&&s.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:o}}),t&&(s.push({type:"body",key:"all-day",chunk:{content:t}}),s.push({type:"body",key:"all-day-divider",outerContent:(0,d.az)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,d.az)("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),s.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(a.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:n}}),(0,d.az)(c.ct,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},(0,d.az)(c.b$,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[{width:"shrink"}],sections:s}))}renderHScrollLayout(o,t,n,a,r,s,l){let u=this.context.pluginHooks.scrollGridImpl;if(!u)throw new Error("No ScrollGrid implementation");let{context:h,props:p}=this,_=!p.forPrint&&(0,c.cc)(h.options),v=!p.forPrint&&(0,c.cb)(h.options),m=[];o&&m.push({type:"header",key:"header",isSticky:_,syncRowHeights:!0,chunks:[{key:"axis",rowContent:g=>(0,d.az)("tr",{role:"presentation"},this.renderHeadAxis("day",g.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:o}]}),t&&(m.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:g=>(0,d.az)("tr",{role:"presentation"},this.renderTableRowAxis(g.rowSyncHeights[0]))},{key:"cols",content:t}]}),m.push({key:"all-day-divider",type:"body",outerContent:(0,d.az)("tr",{role:"presentation",className:"fc-scrollgrid-section"},(0,d.az)("td",{colSpan:2,className:"fc-timegrid-divider "+h.theme.getClass("tableCellShaded")}))}));let C=h.options.nowIndicator;return m.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(h.options.expandRows),chunks:[{key:"axis",content:g=>(0,d.az)("div",{className:"fc-timegrid-axis-chunk"},(0,d.az)("table",{"aria-hidden":!0,style:{height:g.expandRows?g.clientHeight:""}},g.tableColGroupNode,(0,d.az)("tbody",null,(0,d.az)(_t,{slatMetas:s}))),(0,d.az)("div",{className:"fc-timegrid-now-indicator-container"},(0,d.az)(c.ch,{unit:C?"minute":"day"},T=>{let Z=C&&l&&l.safeComputeTop(T);return"number"==typeof Z?(0,d.az)(c.ck,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:Z},isAxis:!0,date:T}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),v&&m.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:c.ca},{key:"cols",content:c.ca}]}),(0,d.az)(c.ct,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:h.viewSpec},(0,d.az)(u,{liquid:!p.isHeightAuto&&!p.forPrint,forPrint:p.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:r}]}],sections:m}))}getAllDayMaxEventProps(){let{dayMaxEvents:o,dayMaxEventRows:t}=this.context.options;return(!0===o||!0===t)&&(o=void 0,t=5),{dayMaxEvents:o,dayMaxEventRows:t}}}function yt(i){return i.text}class Tt{constructor(o,t,n){this.positions=o,this.dateProfile=t,this.slotDuration=n}safeComputeTop(o){let{dateProfile:t}=this;if((0,c.H)(t.currentRange,o)){let n=(0,c.q)(o),a=o.valueOf()-n.valueOf();if(a>=(0,c.bs)(t.slotMinTime)&&a<(0,c.bs)(t.slotMaxTime))return this.computeTimeTop((0,c.d)(a))}return null}computeDateTop(o,t){return t||(t=(0,c.q)(o)),this.computeTimeTop((0,c.d)(o.valueOf()-t.valueOf()))}computeTimeTop(o){let s,l,{positions:t,dateProfile:n}=this,a=t.els.length,r=(o.milliseconds-(0,c.bs)(n.slotMinTime))/(0,c.bs)(this.slotDuration);return r=Math.max(0,r),r=Math.min(a,r),s=Math.floor(r),s=Math.min(s,a-1),l=r-s,t.tops[s]+t.getHeight(s)*l}}class Zt extends c.B{render(){let{props:o,context:t}=this,{options:n}=t,{slatElRefs:a}=o;return(0,d.az)("tbody",null,o.slatMetas.map((r,s)=>{let l={time:r.time,date:t.dateEnv.toDate(r.date),view:t.viewApi};return(0,d.az)("tr",{key:r.key,ref:a.createRef(r.key)},o.axis&&(0,d.az)(xe,Object.assign({},r)),(0,d.az)(c.C,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!r.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":r.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:n.slotLaneContent,classNameGenerator:n.slotLaneClassNames,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount}))}))}}class St extends c.B{constructor(){super(...arguments),this.rootElRef=(0,d.Vf)(),this.slatElRefs=new c.cf}render(){let{props:o,context:t}=this;return(0,d.az)("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},(0,d.az)("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:o.tableMinWidth,width:o.clientWidth,height:o.minHeight}},o.tableColGroupNode,(0,d.az)(Zt,{slatElRefs:this.slatElRefs,axis:o.axis,slatMetas:o.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:o,props:t}=this;t.onCoords&&null!==t.clientWidth&&this.rootElRef.current.offsetHeight&&t.onCoords(new Tt(new c.ba(this.rootElRef.current,function At(i,o){return o.map(t=>i[t.key])}(this.slatElRefs.currentMap,t.slatMetas),!1,!0),this.props.dateProfile,o.options.slotDuration))}}function Q(i,o){let n,t=[];for(n=0;n<o;n+=1)t.push([]);if(i)for(n=0;n<i.length;n+=1)t[i[n].col].push(i[n]);return t}function ye(i,o){let t=[];if(i){for(let n=0;n<o;n+=1)t[n]={affectedInstances:i.affectedInstances,isEvent:i.isEvent,segs:[]};for(let n of i.segs)t[n.col].segs.push(n)}else for(let n=0;n<o;n+=1)t[n]=null;return t}class wt extends c.B{render(){let{props:o}=this;return(0,d.az)(c.cr,{elClasses:["fc-timegrid-more-link"],elStyle:{top:o.top,bottom:o.bottom},allDayDate:null,moreCnt:o.hiddenSegs.length,allSegs:o.hiddenSegs,hiddenSegs:o.hiddenSegs,extraDateSpan:o.extraDateSpan,dateProfile:o.dateProfile,todayRange:o.todayRange,popoverContent:()=>Ae(o.hiddenSegs,o),defaultGenerator:Dt,forceTimed:!0},t=>(0,d.az)(t,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function Dt(i){return i.shortText}function Te(i,o){if(!i)return[[],0];let{level:t,lateralStart:n,lateralEnd:a}=i,r=n,s=[];for(;r<a;)s.push(o(t,r)),r+=1;return s.sort(Rt),[s.map(Mt),s[0][1]]}function Rt(i,o){return o[1]-i[1]}function Mt(i){return i[0]}function It(i){let o=[];const t=ne((a,r,s)=>(0,c.bB)(a),(a,r,s)=>{let l=Object.assign(Object.assign({},a),{levelCoord:r,stackDepth:s,stackForward:0});return o.push(l),l.stackForward=n(a.nextLevelNodes,r+a.thickness,s+1)+1});function n(a,r,s){let l=0;for(let u of a)l=Math.max(t(u,r,s),l);return l}return n(i,0,0),o}function ne(i,o){const t={};return(...n)=>{let a=i(...n);return a in t?t[a]:t[a]=o(...n)}}function Ze(i,o,t=null,n=0){let a=[];if(t)for(let r=0;r<i.length;r+=1){let s=i[r],l=t.computeDateTop(s.start,o),u=Math.max(l+(n||0),t.computeDateTop(s.end,o));a.push({start:Math.round(l),end:Math.round(u)})}return a}const Ot=(0,c.x)({hour:"numeric",minute:"2-digit",meridiem:!1});class Se extends c.B{render(){return(0,d.az)(c.cj,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:Ot}))}}class Pt extends c.B{constructor(){super(...arguments),this.sortEventSegs=(0,c.z)(c.bR)}render(){let{props:o,context:t}=this,{options:n}=t,a=n.selectMirror,r=o.eventDrag&&o.eventDrag.segs||o.eventResize&&o.eventResize.segs||a&&o.dateSelectionSegs||[],s=o.eventDrag&&o.eventDrag.affectedInstances||o.eventResize&&o.eventResize.affectedInstances||{},l=this.sortEventSegs(o.fgEventSegs,n.eventOrder);return(0,d.az)(c.cl,{elTag:"td",elRef:o.elRef,elClasses:["fc-timegrid-col",...o.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},o.extraDataAttrs),date:o.date,dateProfile:o.dateProfile,todayRange:o.todayRange,extraRenderProps:o.extraRenderProps},u=>(0,d.az)("div",{className:"fc-timegrid-col-frame"},(0,d.az)("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(o.businessHourSegs,"non-business"),this.renderFillSegs(o.bgEventSegs,"bg-event"),this.renderFillSegs(o.dateSelectionSegs,"highlight")),(0,d.az)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,s,!1,!1,!1)),(0,d.az)("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(r,{},Boolean(o.eventDrag),Boolean(o.eventResize),Boolean(a),"mirror")),(0,d.az)("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(o.nowIndicatorSegs)),(0,c.cm)(n)&&(0,d.az)(u,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(o,t,n,a,r,s){let{props:l}=this;return l.forPrint?Ae(o,l):this.renderPositionedFgSegs(o,t,n,a,r,s)}renderPositionedFgSegs(o,t,n,a,r,s){let{eventMaxStack:l,eventShortHeight:u,eventOrderStrict:h,eventMinHeight:p}=this.context.options,{date:_,slatCoords:v,eventSelection:m,todayRange:C,nowDate:g}=this.props,T=n||a||r,Z=Ze(o,_,v,p),{segPlacements:A,hiddenGroups:D}=function qt(i,o,t,n){let a=[],r=[];for(let h=0;h<i.length;h+=1){let p=o[h];p?a.push({index:h,thickness:1,span:p}):r.push(i[h])}let{segRects:s,hiddenGroups:l}=function Ut(i,o,t){let n=new c.bA;null!=o&&(n.strictOrder=o),null!=t&&(n.maxStackCnt=t);let a=n.addSegs(i),r=(0,c.bE)(a),s=function Nt(i){const{entriesByLevel:o}=i,t=ne((n,a)=>n+":"+a,(n,a)=>{let r=function Et(i,o,t){let{levelCoords:n,entriesByLevel:a}=i,r=a[o][t],s=n[o]+r.thickness,l=n.length,u=o;for(;u<l&&n[u]<s;u+=1);for(;u<l;u+=1){let p,h=a[u],_=(0,c.bD)(h,r.span.start,c.bC),v=_[0]+_[1],m=v;for(;(p=h[m])&&p.span.start<r.span.end;)m+=1;if(v<m)return{level:u,lateralStart:v,lateralEnd:m}}return null}(i,n,a),s=Te(r,t),l=o[n][a];return[Object.assign(Object.assign({},l),{nextLevelNodes:s[0]}),l.thickness+s[1]]});return Te(o.length?{level:0,lateralStart:0,lateralEnd:o[0].length}:null,t)[0]}(n);return s=function kt(i,o){const t=ne((n,a,r)=>(0,c.bB)(n),(n,a,r)=>{let p,{nextLevelNodes:s,thickness:l}=n,u=l+r,h=l/u,_=[];if(s.length)for(let m of s)if(void 0===p){let C=t(m,a,u);p=C[0],_.push(C[1])}else{let C=t(m,p,0);_.push(C[1])}else p=o;let v=(p-a)*h;return[p-v,Object.assign(Object.assign({},n),{thickness:v,nextLevelNodes:_})]});return i.map(n=>t(n,0,0)[1])}(s,1),{segRects:It(s),hiddenGroups:r}}(a,t,n),u=[];for(let h of s)u.push({seg:i[h.index],rect:h});for(let h of r)u.push({seg:h,rect:null});return{segPlacements:u,hiddenGroups:l}}(o,Z,h,l);return(0,d.az)(d.HY,null,this.renderHiddenGroups(D,o),A.map(w=>{let{seg:M,rect:N}=w,pe=M.eventRange.instance.instanceId,Ml=T||Boolean(!t[pe]&&N),El=ae(N&&N.span),kl=!T&&N?this.computeSegHStyle(N):{left:0,right:0},Il=Boolean(N)&&N.stackForward>0,ql=Boolean(N)&&N.span.end-N.span.start<u;return(0,d.az)("div",{className:"fc-timegrid-event-harness"+(Il?" fc-timegrid-event-harness-inset":""),key:s||pe,style:Object.assign(Object.assign({visibility:Ml?"":"hidden"},El),kl)},(0,d.az)(Se,Object.assign({seg:M,isDragging:n,isResizing:a,isDateSelecting:r,isSelected:pe===m,isShort:ql},(0,c.bS)(M,C,g))))}))}renderHiddenGroups(o,t){let{extraDateSpan:n,dateProfile:a,todayRange:r,nowDate:s,eventSelection:l,eventDrag:u,eventResize:h}=this.props;return(0,d.az)(d.HY,null,o.map(p=>{let _=ae(p.span),v=function zt(i,o){return i.map(t=>o[t.index])}(p.entries,t);return(0,d.az)(wt,{key:(0,c.bw)((0,c.cs)(v)),hiddenSegs:v,top:_.top,bottom:_.bottom,extraDateSpan:n,dateProfile:a,todayRange:r,nowDate:s,eventSelection:l,eventDrag:u,eventResize:h})}))}renderFillSegs(o,t){let{props:n,context:a}=this,s=Ze(o,n.date,n.slatCoords,a.options.eventMinHeight).map((l,u)=>{let h=o[u];return(0,d.az)("div",{key:(0,c.bT)(h.eventRange),className:"fc-timegrid-bg-harness",style:ae(l)},"bg-event"===t?(0,d.az)(c.cp,Object.assign({seg:h},(0,c.bS)(h,n.todayRange,n.nowDate))):(0,c.co)(t))});return(0,d.az)(d.HY,null,s)}renderNowIndicator(o){let{slatCoords:t,date:n}=this.props;return t?o.map((a,r)=>(0,d.az)(c.ck,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(a.start,n)},isAxis:!1,date:n})):null}computeSegHStyle(o){let l,u,{isRtl:t,options:n}=this.context,a=n.slotEventOverlap,r=o.levelCoord,s=o.levelCoord+o.thickness;a&&(s=Math.min(1,r+2*(s-r))),t?(l=1-s,u=r):(l=r,u=1-s);let h={zIndex:o.stackDepth+1,left:100*l+"%",right:100*u+"%"};return a&&!o.stackForward&&(h[t?"marginLeft":"marginRight"]=20),h}}function Ae(i,{todayRange:o,nowDate:t,eventSelection:n,eventDrag:a,eventResize:r}){let s=(a?a.affectedInstances:null)||(r?r.affectedInstances:null)||{};return(0,d.az)(d.HY,null,i.map(l=>{let u=l.eventRange.instance.instanceId;return(0,d.az)("div",{key:u,style:{visibility:s[u]?"hidden":""}},(0,d.az)(Se,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:u===n,isShort:!1},(0,c.bS)(l,o,t))))}))}function ae(i){return i?{top:i.start,bottom:-i.end}:{top:"",bottom:""}}class Yt extends c.B{constructor(){super(...arguments),this.splitFgEventSegs=(0,c.z)(Q),this.splitBgEventSegs=(0,c.z)(Q),this.splitBusinessHourSegs=(0,c.z)(Q),this.splitNowIndicatorSegs=(0,c.z)(Q),this.splitDateSelectionSegs=(0,c.z)(Q),this.splitEventDrag=(0,c.z)(ye),this.splitEventResize=(0,c.z)(ye),this.rootElRef=(0,d.Vf)(),this.cellElRefs=new c.cf}render(){let{props:o,context:t}=this,n=t.options.nowIndicator&&o.slatCoords&&o.slatCoords.safeComputeTop(o.nowDate),a=o.cells.length,r=this.splitFgEventSegs(o.fgEventSegs,a),s=this.splitBgEventSegs(o.bgEventSegs,a),l=this.splitBusinessHourSegs(o.businessHourSegs,a),u=this.splitNowIndicatorSegs(o.nowIndicatorSegs,a),h=this.splitDateSelectionSegs(o.dateSelectionSegs,a),p=this.splitEventDrag(o.eventDrag,a),_=this.splitEventResize(o.eventResize,a);return(0,d.az)("div",{className:"fc-timegrid-cols",ref:this.rootElRef},(0,d.az)("table",{role:"presentation",style:{minWidth:o.tableMinWidth,width:o.clientWidth}},o.tableColGroupNode,(0,d.az)("tbody",{role:"presentation"},(0,d.az)("tr",{role:"row"},o.axis&&(0,d.az)("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},(0,d.az)("div",{className:"fc-timegrid-col-frame"},(0,d.az)("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof n&&(0,d.az)(c.ck,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:n},isAxis:!0,date:o.nowDate})))),o.cells.map((v,m)=>(0,d.az)(Pt,{key:v.key,elRef:this.cellElRefs.createRef(v.key),dateProfile:o.dateProfile,date:v.date,nowDate:o.nowDate,todayRange:o.todayRange,extraRenderProps:v.extraRenderProps,extraDataAttrs:v.extraDataAttrs,extraClassNames:v.extraClassNames,extraDateSpan:v.extraDateSpan,fgEventSegs:r[m],bgEventSegs:s[m],businessHourSegs:l[m],nowIndicatorSegs:u[m],dateSelectionSegs:h[m],eventDrag:p[m],eventResize:_[m],slatCoords:o.slatCoords,eventSelection:o.eventSelection,forPrint:o.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:o}=this;o.onColCoords&&null!==o.clientWidth&&o.onColCoords(new c.ba(this.rootElRef.current,function Bt(i,o){return o.map(t=>i[t.key])}(this.cellElRefs.currentMap,o.cells),!0,!1))}}class jt extends c.be{constructor(){super(...arguments),this.processSlotOptions=(0,c.z)(Qt),this.state={slatCoords:null},this.handleRootEl=o=>{o?this.context.registerInteractiveComponent(this,{el:o,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=o=>{let{onScrollTopRequest:t}=this.props,{slatCoords:n}=this.state;if(t&&n){if(o.time){let a=n.computeTimeTop(o.time);a=Math.ceil(a),a&&(a+=1),t(a)}return!0}return!1},this.handleColCoords=o=>{this.colCoords=o},this.handleSlatCoords=o=>{this.setState({slatCoords:o}),this.props.onSlatCoords&&this.props.onSlatCoords(o)}}render(){let{props:o,state:t}=this;return(0,d.az)("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:o.clientWidth,minWidth:o.tableMinWidth}},(0,d.az)(St,{axis:o.axis,dateProfile:o.dateProfile,slatMetas:o.slatMetas,clientWidth:o.clientWidth,minHeight:o.expandRows?o.clientHeight:"",tableMinWidth:o.tableMinWidth,tableColGroupNode:o.axis?o.tableColGroupNode:null,onCoords:this.handleSlatCoords}),(0,d.az)(Yt,{cells:o.cells,axis:o.axis,dateProfile:o.dateProfile,businessHourSegs:o.businessHourSegs,bgEventSegs:o.bgEventSegs,fgEventSegs:o.fgEventSegs,dateSelectionSegs:o.dateSelectionSegs,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,todayRange:o.todayRange,nowDate:o.nowDate,nowIndicatorSegs:o.nowIndicatorSegs,clientWidth:o.clientWidth,tableMinWidth:o.tableMinWidth,tableColGroupNode:o.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:o.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(o){this.scrollResponder.update(o.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(o,t){let{dateEnv:n,options:a}=this.context,{colCoords:r}=this,{dateProfile:s}=this.props,{slatCoords:l}=this.state,{snapDuration:u,snapsPerSlot:h}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),p=r.leftToIndex(o),_=l.positions.topToIndex(t);if(null!=p&&null!=_){let v=this.props.cells[p],m=l.positions.tops[_],C=l.positions.getHeight(_),T=Math.floor((t-m)/C*h),A=this.props.cells[p].date,D=(0,c.bp)(s.slotMinTime,(0,c.bo)(u,_*h+T)),w=n.add(A,D),M=n.add(w,u);return{dateProfile:s,dateSpan:Object.assign({range:{start:w,end:M},allDay:!1},v.extraDateSpan),dayEl:r.els[p],rect:{left:r.lefts[p],right:r.rights[p],top:m,bottom:m+C},layer:0}}return null}}function Qt(i,o){let t=o||i,n=(0,c.bt)(i,t);return null===n&&(t=i,n=1),{snapDuration:t,snapsPerSlot:n}}class Lt extends c.bW{sliceRange(o,t){let n=[];for(let a=0;a<t.length;a+=1){let r=(0,c.o)(o,t[a]);r&&n.push({start:r.start,end:r.end,isStart:r.start.valueOf()===o.start.valueOf(),isEnd:r.end.valueOf()===o.end.valueOf(),col:a})}return n}}class Jt extends c.be{constructor(){super(...arguments),this.buildDayRanges=(0,c.z)(Ht),this.slicer=new Lt,this.timeColsRef=(0,d.Vf)()}render(){let{props:o,context:t}=this,{dateProfile:n,dayTableModel:a}=o,{nowIndicator:r,nextDayThreshold:s}=t.options,l=this.buildDayRanges(a,n,t.dateEnv);return(0,d.az)(c.ch,{unit:r?"minute":"day"},(u,h)=>(0,d.az)(jt,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(o,n,null,t,l),{forPrint:o.forPrint,axis:o.axis,dateProfile:n,slatMetas:o.slatMetas,slotDuration:o.slotDuration,cells:a.cells[0],tableColGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,clientWidth:o.clientWidth,clientHeight:o.clientHeight,expandRows:o.expandRows,nowDate:u,nowIndicatorSegs:r&&this.slicer.sliceNowDate(u,n,s,t,l),todayRange:h,onScrollTopRequest:o.onScrollTopRequest,onSlatCoords:o.onSlatCoords})))}}function Ht(i,o,t){let n=[];for(let a of i.headerDates)n.push({start:t.add(a,o.slotMinTime),end:t.add(a,o.slotMaxTime)});return n}const we=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Ft(i,o,t,n,a){let r=new Date(0),s=i,l=(0,c.d)(0),u=t||function Gt(i){let o,t,n;for(o=we.length-1;o>=0;o-=1)if(t=(0,c.d)(we[o]),n=(0,c.bt)(t,i),null!==n&&n>1)return t;return i}(n),h=[];for(;(0,c.bs)(s)<(0,c.bs)(o);){let p=a.add(r,s),_=null!==(0,c.bt)(l,u);h.push({date:p,time:s,key:p.toISOString(),isoTimeStr:(0,c.bu)(p),isLabeled:_}),s=(0,c.bp)(s,n),l=(0,c.bp)(l,n)}return h}function Vt(i,o){let t=new c.bO(i.renderRange,o);return new c.bV(t,!1)}const Wt={allDaySlot:Boolean};var Kt=(0,he.rx)({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:Wt,views:{timeGrid:{component:class $t extends xt{constructor(){super(...arguments),this.buildTimeColsModel=(0,c.z)(Vt),this.buildSlatMetas=(0,c.z)(Ft)}render(){let{options:o,dateEnv:t,dateProfileGenerator:n}=this.context,{props:a}=this,{dateProfile:r}=a,s=this.buildTimeColsModel(r,n),l=this.allDaySplitter.splitProps(a),u=this.buildSlatMetas(r.slotMinTime,r.slotMaxTime,o.slotLabelInterval,o.slotDuration,t),{dayMinWidth:h}=o,p=!h,_=h,v=o.dayHeaders&&(0,d.az)(c.bK,{dates:s.headerDates,dateProfile:r,datesRepDistinctDays:!0,renderIntro:p?this.renderHeadAxis:null}),m=!1!==o.allDaySlot&&(g=>(0,d.az)(Ce,Object.assign({},l.allDay,{dateProfile:r,dayTableModel:s,nextDayThreshold:o.nextDayThreshold,tableMinWidth:g.tableMinWidth,colGroupNode:g.tableColGroupNode,renderRowIntro:p?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:g.clientWidth,clientHeight:g.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),C=g=>(0,d.az)(Jt,Object.assign({},l.timed,{dayTableModel:s,dateProfile:r,axis:p,slotDuration:o.slotDuration,slatMetas:u,forPrint:a.forPrint,tableColGroupNode:g.tableColGroupNode,tableMinWidth:g.tableMinWidth,clientWidth:g.clientWidth,clientHeight:g.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:g.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return _?this.renderHScrollLayout(v,m,C,s.colCnt,h,u,this.state.slatCoords):this.renderSimpleLayout(v,m,C)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}}),Xt={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"A\xf1o",month:"Mes",week:"Semana",day:"D\xeda",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today:i=>"D\xeda"===i?"Hoy":("Semana"===i?"Esta":"Este")+" "+i.toLocaleLowerCase()},viewHint:i=>"Vista "+("Semana"===i?"de la":"del")+" "+i.toLocaleLowerCase(),weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el d\xeda",moreLinkText:"m\xe1s",moreLinkHint:i=>`Mostrar ${i} eventos m\xe1s`,noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"},W=f(285);class ei{constructor(){this.isSelected=!0,this.criterionomj="",this.subcrierioj="",this.id_indicardorj=0,this.ides="",this.tip="",this.descrip="",this.ind_nombrej="",this.archivo_nombre="",this.archivo_enlace="",this.Visi=!0,this.pes=0,this.obt=0,this.uti=0,this.val=0}}var De=f(9541),Ue=f(1282),b=f(3626),Ne=f(8584),e=f(4650),Re=f(3224),U=f(8739),ti=f(9921),Me=f(5412),Ee=f(2185),re=f(253),K=f(4120),X=f(1818),B=f(2068),se=f(6493),q=f(4859),y=f(4006),L=f(7392),ii=f(6709),oi=f(9476),ni=f(3803),ke=f(3848);function ai(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",85),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.fetchAndProcessData(r.nombre))}),e.TgZ(1,"div",86)(2,"div",86),e._uU(3),e.ALo(4,"number"),e.qZA(),e.TgZ(5,"div",87),e._uU(6),e.qZA(),e.TgZ(7,"div",88),e._uU(8),e.ALo(9,"number"),e.ALo(10,"number"),e.qZA()()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("background-color",a.coloresTarjetas[n])("border",a.borderStyles[n]),e.xp6(3),e.hij("",e.xi3(4,8,t.total/t.faltante*100,"1.0-2"),"%"),e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.AsE("Total: ",e.xi3(9,11,t.total,"1.2-4")," de ",e.xi3(10,14,t.faltante,"1.2-4"),"")}}function ri(i,o){if(1&i&&(e.TgZ(0,"div",83),e.YNc(1,ai,11,17,"div",84),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.listain)}}function si(i,o){1&i&&(e.TgZ(0,"div",89),e._UZ(1,"img",90),e.qZA())}function li(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Criterio"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verCriterio?"":"none")}}function ci(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verCriterio&&a.getRowSpan3("Criterio",n)?"":"none")("background-color",a.getColorcelda("Criterio",.3)),e.uIk("rowspan",a.getRowSpan3("Criterio",n)),e.xp6(1),e.hij(" ",t.criterionomj," ")}}function di(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Subcriterio"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verSubcriterio?"":"none")}}function ui(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("background-color",t.randomColor)("display",a.verSubcriterio&&a.getRowSpan3("Subcriterio",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Subcriterio",n)),e.xp6(1),e.hij(" ",t.subcrierioj," ")}}function pi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Indicador"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verIndicador?"":"none")}}function hi(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("background-color",t.Colores)("display",a.verIndicador&&a.getRowSpan3("Indicador",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Indicador",n)),e.xp6(1),e.AsE(" ",t.ind_nombrej," ",a.calcularRowSpanValue(n)," ")}}function mi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Peso"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verPeso?"":"none")}}function fi(i,o){if(1&i&&(e.TgZ(0,"td",117),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verPeso&&a.getRowSpan3("Peso",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Peso",n)),e.xp6(1),e.hij(" ",t.pes," ")}}function gi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"% Obtenido"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verObtenido?"":"none")}}const bi=function(i,o,t,n){return{rojo:i,naranja:o,amarillo:t,verde:n}};function _i(i,o){if(1&i&&(e.TgZ(0,"td",118),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verObtenido&&a.getRowSpan3("Obtenido",n)?"":"none"),e.Q6J("ngClass",e.l5B(5,bi,t.obt>=0&&t.obt<=25,t.obt>25&&t.obt<=50,t.obt>50&&t.obt<=75,t.obt>75&&t.obt<=100)),e.uIk("rowspan",a.getRowSpan3("Obtenido",n)),e.xp6(1),e.hij(" ",t.obt," ")}}function vi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"% Utilidad"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verUtilidad?"":"none")}}function Ci(i,o){if(1&i&&(e.TgZ(0,"td",117),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verUtilidad&&a.getRowSpan3("Utilidad",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Utilidad",n)),e.xp6(1),e.hij(" ",t.uti," ")}}function xi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Valor"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verValor?"":"none")}}function yi(i,o){if(1&i&&(e.TgZ(0,"td",117),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verValor&&a.getRowSpan3("Valor",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Valor",n)),e.xp6(1),e.hij(" ",t.val>100&&t.val<101?100:t.val," ")}}function Ti(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Evidencia"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verEvidencia?"":"none")}}function Zi(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("background-color",t.indicol)("display",a.verEvidencia&&a.getRowSpan3("Evidencia",n)?"":"none"),e.uIk("rowspan",a.getRowSpan3("Evidencia",n)),e.xp6(1),e.hij(" ",t.descrip," ")}}function Si(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"th",115)(1,"div",119)(2,"span"),e._uU(3,"Archivos"),e.qZA(),e.TgZ(4,"mat-checkbox",120),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.todosSeleccionados=a)})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.seleccionarTodosArchivos())}),e.qZA(),e.TgZ(5,"button",121),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.descargarArchivosSeleccionados())}),e._UZ(6,"i",122),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Udp("display",t.verArchivo?"":"none"),e.xp6(4),e.Q6J("ngModel",t.todosSeleccionados)}}function Ai(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",123)(1,"mat-checkbox",124),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s.isSelected=a)}),e.qZA(),e.TgZ(2,"a",125),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Udp("display",a.verArchivo&&a.getRowSpan3("Archivos",n)?"":"none"),e.xp6(1),e.Q6J("ngModel",t.isSelected),e.xp6(1),e.s9C("href",t.archivo_enlace,e.LSH),e.xp6(1),e.Oqu(t.archivo_nombre)}}function wi(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Id ind"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.ocultar?"":"none")}}function Di(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Udp("display",n.ocultar&&n.rowSpanValue?"":"none"),e.uIk("rowspan",n.rowSpanValue),e.xp6(1),e.hij(" ",t.id_indicardorj," ")}}function Ui(i,o){if(1&i&&(e.TgZ(0,"th",115),e._uU(1,"Tipo"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.verTipo?"":"none")}}function Ni(i,o){if(1&i&&(e.TgZ(0,"td",116),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Udp("display",n.verTipo&&n.rowSpanValue?"":"none"),e.uIk("rowspan",n.rowSpanValue),e.xp6(1),e.hij(" ",t.tip," ")}}function Ri(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Calificar"),e.qZA())}function Mi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",126)(1,"button",127),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.evaluar(r.tip,r.id_indicardorj,r.pes))}),e.TgZ(2,"mat-icon",128),e._uU(3,"open_in_new"),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Udp("display",t.rowSpanValue?"":"none"),e.uIk("rowspan",t.rowSpanValue)}}function Ei(i,o){1&i&&e._UZ(0,"tr",129)}function ki(i,o){1&i&&e._UZ(0,"tr",130)}function Ii(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",91)(2,"h3")(3,"span",19),e._uU(4,"Criterio Seleccionado:"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div",92)(7,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showCriterio())}),e._uU(8," Criterio "),e.qZA(),e.TgZ(9,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSubcriterio())}),e._uU(10," Subcriterio "),e.qZA(),e.TgZ(11,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showIndicador())}),e._uU(12," Indicador "),e.qZA(),e.TgZ(13,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showEvidencia())}),e._uU(14," Evidencia "),e.qZA(),e.TgZ(15,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showPeso())}),e._uU(16," Peso "),e.qZA(),e.TgZ(17,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showObtenido())}),e._uU(18," % Obtenido "),e.qZA(),e.TgZ(19,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showUtilidad())}),e._uU(20," % Utilidad "),e.qZA(),e.TgZ(21,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showValor())}),e._uU(22," Valor "),e.qZA(),e.TgZ(23,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showArchivo())}),e._uU(24," Archivo "),e.qZA(),e.TgZ(25,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showTipo())}),e._uU(26," Tipo "),e.qZA()()(),e.TgZ(27,"div",94)(28,"div",95)(29,"table",52),e.ynx(30,96),e.YNc(31,li,2,2,"th",97),e.YNc(32,ci,2,6,"td",98),e.BQk(),e.ynx(33,99),e.YNc(34,di,2,2,"th",97),e.YNc(35,ui,2,6,"td",100),e.BQk(),e.ynx(36,101),e.YNc(37,pi,2,2,"th",97),e.YNc(38,hi,2,7,"td",100),e.BQk(),e.ynx(39,102),e.YNc(40,mi,2,2,"th",97),e.YNc(41,fi,2,4,"td",103),e.BQk(),e.ynx(42,104),e.YNc(43,gi,2,2,"th",97),e.YNc(44,_i,2,10,"td",105),e.BQk(),e.ynx(45,106),e.YNc(46,vi,2,2,"th",97),e.YNc(47,Ci,2,4,"td",103),e.BQk(),e.ynx(48,107),e.YNc(49,xi,2,2,"th",97),e.YNc(50,yi,2,4,"td",103),e.BQk(),e.ynx(51,108),e.YNc(52,Ti,2,2,"th",97),e.YNc(53,Zi,2,6,"td",100),e.BQk(),e.ynx(54,109),e.YNc(55,Si,7,3,"th",97),e.YNc(56,Ai,4,5,"td",110),e.BQk(),e.ynx(57,111),e.YNc(58,wi,2,2,"th",97),e.YNc(59,Di,2,4,"td",112),e.BQk(),e.ynx(60,113),e.YNc(61,Ui,2,2,"th",97),e.YNc(62,Ni,2,4,"td",112),e.BQk(),e.ynx(63,114),e.YNc(64,Ri,2,0,"th",54),e.YNc(65,Mi,4,3,"td",55),e.BQk(),e.YNc(66,Ei,1,0,"tr",29),e.YNc(67,ki,1,0,"tr",30),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.hij(" ",t.titulocriterio,""),e.xp6(2),e.Q6J("ngClass",t.verCriterio?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verSubcriterio?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verIndicador?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verEvidencia?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verPeso?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verObtenido?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verUtilidad?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verValor?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verArchivo?"selected":""),e.xp6(2),e.Q6J("ngClass",t.verTipo?"selected":""),e.xp6(4),e.Q6J("dataSource",t.datacrite),e.xp6(37),e.Q6J("matHeaderRowDef",t.displayedColumns3),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns3)}}function qi(i,o){1&i&&(e.TgZ(0,"th",131),e._uU(1," Indicadores "),e.qZA())}function Oi(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Udp("background-color",n.colores(t.color)),e.xp6(1),e.hij(" ",t.color.toUpperCase()," ")}}function Pi(i,o){1&i&&(e.TgZ(0,"th",132),e._uU(1," N\xb0 indi "),e.qZA())}function zi(i,o){if(1&i&&(e.TgZ(0,"td",133),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.indica," ")}}function Yi(i,o){1&i&&(e.TgZ(0,"th",132),e._uU(1," % "),e.qZA())}function Bi(i,o){if(1&i&&(e.TgZ(0,"td",133),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.porcentaje,"% ")}}function ji(i,o){1&i&&e._UZ(0,"tr",129)}function Qi(i,o){1&i&&e._UZ(0,"tr",130)}function Li(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"canvas",134),e.NdJ("chartClick",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.chartClicked(a))}),e.qZA(),e.TgZ(2,"button",135),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.grafCom())}),e._uU(3," Mostrar grafica individual "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData)("options",t.barChartOptions)("plugins",t.barChartPlugins)("type",t.barChartType)}}function Ji(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"canvas",134),e.NdJ("chartClick",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.chartClicked(a))}),e.qZA(),e.TgZ(2,"div",136)(3,"button",135),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.grafCom())}),e._uU(4," Mostrar grafica completa "),e.qZA(),e.TgZ(5,"h3"),e._uU(6),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("data",t.barChartData2)("options",t.barChartOptions)("plugins",t.barChartPlugins)("type",t.barChartType),e.xp6(5),e.Oqu(t.texto)}}function Hi(i,o){if(1&i&&(e.TgZ(0,"div",137)(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"number"),e.qZA()()),2&i){const t=o.model;e.xp6(2),e.Oqu(t.name),e.xp6(3),e.Oqu(e.xi3(6,2,t.value/100,"1.2-4"))}}function Fi(i,o){1&i&&(e.TgZ(0,"div",138)(1,"div",139)(2,"button",140),e._UZ(3,"span",141),e.qZA(),e.TgZ(4,"button",142),e._UZ(5,"span",143),e.qZA(),e.TgZ(6,"button",144),e._uU(7," Hoy "),e.qZA()(),e.TgZ(8,"div",145),e._UZ(9,"span",146),e.qZA(),e.TgZ(10,"div",147)(11,"button",148),e._uU(12," Mes "),e.qZA(),e.TgZ(13,"button",149),e._uU(14," Semana "),e.qZA(),e.TgZ(15,"button",150),e._uU(16," D\xeda "),e.qZA()()())}function Gi(i,o){if(1&i&&(e.TgZ(0,"li")(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div"),e._UZ(5,"i",152),e._uU(6),e.ALo(7,"date"),e.qZA(),e._UZ(8,"hr",153),e.qZA()),2&i){const t=o.$implicit;e.xp6(2),e.hij(" ",t.mensaje," "),e.xp6(4),e.hij("",e.xi3(7,2,t.fecha,"dd MMM. 'a las' hh:mm a")," ")}}function $i(i,o){if(1&i&&(e.TgZ(0,"ul"),e.YNc(1,Gi,9,5,"li",151),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.notificaciones)}}function Vi(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1," No hay notificaciones "),e.qZA())}function Wi(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Nombre"),e.qZA())}function Ki(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan2("actividad",n)?"":"none"),e.uIk("rowspan",a.getRowSpan2("actividad",n)),e.xp6(1),e.hij(" ",t.actividades," ")}}function Xi(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"ACTIVIDAD"),e.qZA())}function eo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.criterio," ")}}function to(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"SUBCRITERIO"),e.qZA())}function io(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.subcriterio," ")}}function oo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"INDICADOR"),e.qZA())}function no(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.indicador," ")}}function ao(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Inicio"),e.qZA())}function ro(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan2("inicio",n)?"":"none"),e.uIk("rowspan",a.getRowSpan2("inicio",n)),e.xp6(1),e.hij(" ",t.inicio," ")}}function so(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Fin"),e.qZA())}function lo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan2("fin",n)?"":"none"),e.uIk("rowspan",a.getRowSpan2("fin",n)),e.xp6(1),e.hij(" ",t.fin," ")}}function co(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Encargado"),e.qZA())}function uo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan2("encargado",n)?"":"none"),e.uIk("rowspan",a.getRowSpan2("encargado",n)),e.xp6(1),e.hij(" ",t.encargado," ")}}function po(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Enlace"),e.qZA())}function ho(i,o){if(1&i&&(e.TgZ(0,"td",126)(1,"a",154),e._uU(2),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("href",t.enlace,e.LSH),e.xp6(1),e.hij(" ",t.nomb," ")}}function mo(i,o){1&i&&e._UZ(0,"tr",129)}function fo(i,o){1&i&&e._UZ(0,"tr",155)}function go(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Nombre"),e.qZA())}function bo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan("actividad",n)?"":"none"),e.uIk("rowspan",a.getRowSpan("actividad",n)),e.xp6(1),e.hij(" ",t.actividades," ")}}function _o(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"ACTIVIDAD"),e.qZA())}function vo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.criterio," ")}}function Co(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"SUBCRITERIO"),e.qZA())}function xo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.subcriterio," ")}}function yo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"INDICADOR"),e.qZA())}function To(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.indicador," ")}}function Zo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Inicio"),e.qZA())}function So(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan("inicio",n)?"":"none"),e.uIk("rowspan",a.getRowSpan("inicio",n)),e.xp6(1),e.hij(" ",t.inicio," ")}}function Ao(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Fin"),e.qZA())}function wo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan("fin",n)?"":"none"),e.uIk("rowspan",a.getRowSpan("fin",n)),e.xp6(1),e.hij(" ",t.fin," ")}}function Do(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Encargado"),e.qZA())}function Uo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan("encargado",n)?"":"none"),e.uIk("rowspan",a.getRowSpan("encargado",n)),e.xp6(1),e.hij(" ",t.encargado," ")}}function No(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Enlace"),e.qZA())}function Ro(i,o){if(1&i&&(e.TgZ(0,"td",126)(1,"a",156),e._uU(2),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("href",t.enlace,e.LSH)("download",n.obtenerNombreArchivo(t.enlace)),e.xp6(1),e.hij(" ",t.enlace," ")}}function Mo(i,o){1&i&&e._UZ(0,"tr",129)}function Eo(i,o){1&i&&e._UZ(0,"tr",157)}function ko(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Nombre"),e.qZA())}function Io(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan8("actividad",n)?"":"none"),e.uIk("rowspan",a.getRowSpan8("actividad",n)),e.xp6(1),e.hij(" ",t.actividades," ")}}function qo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"ACTIVIDAD"),e.qZA())}function Oo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.criterio," ")}}function Po(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"SUBCRITERIO"),e.qZA())}function zo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.subcriterio," ")}}function Yo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"INDICADOR"),e.qZA())}function Bo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.indicador," ")}}function jo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Inicio"),e.qZA())}function Qo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan8("inicio",n)?"":"none"),e.uIk("rowspan",a.getRowSpan8("inicio",n)),e.xp6(1),e.hij(" ",t.inicio," ")}}function Lo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Fecha Fin"),e.qZA())}function Jo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan8("fin",n)?"":"none"),e.uIk("rowspan",a.getRowSpan8("fin",n)),e.xp6(1),e.hij(" ",t.fin," ")}}function Ho(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Encargado"),e.qZA())}function Fo(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan8("encargado",n)?"":"none"),e.uIk("rowspan",a.getRowSpan8("encargado",n)),e.xp6(1),e.hij(" ",t.encargado," ")}}function Go(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Enlace"),e.qZA())}function $o(i,o){if(1&i&&(e.TgZ(0,"td",126)(1,"a",156),e._uU(2),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("href",t.enlace,e.LSH)("download",n.obtenerNombreArchivo(t.enlace)),e.xp6(1),e.hij(" ",t.enlace," ")}}function Vo(i,o){1&i&&e._UZ(0,"tr",129)}function Wo(i,o){1&i&&e._UZ(0,"tr",158)}function Ko(i,o){if(1&i&&(e.TgZ(0,"div",137)(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"percent"),e.qZA()()),2&i){const t=o.model;e.xp6(2),e.Oqu(t.name),e.xp6(3),e.Oqu(e.lcZ(6,2,t.value/100))}}function Xo(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Encargado"),e.qZA())}function en(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan4("enca",n)?"":"none"),e.uIk("rowspan",a.getRowSpan4("enca",n)),e.xp6(1),e.hij(" ",t.enca," ")}}function tn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Criterio"),e.qZA())}function on(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan4("crit",n)?"":"none"),e.uIk("rowspan",a.getRowSpan4("crit",n)),e.xp6(1),e.hij(" ",t.crit," ")}}function nn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Subcriterio"),e.qZA())}function an(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan4("subc",n)?"":"none"),e.uIk("rowspan",a.getRowSpan4("subc",n)),e.xp6(1),e.hij(" ",t.subc," ")}}function rn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Indicador"),e.qZA())}function sn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan4("indic",n)?"":"none"),e.uIk("rowspan",a.getRowSpan4("indic",n)),e.xp6(1),e.hij(" ",t.indic," ")}}function ln(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Evidencia"),e.qZA())}function cn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan4("descr",n)?"":"none"),e.uIk("rowspan",a.getRowSpan4("descr",n)),e.xp6(1),e.hij(" ",t.descr," ")}}function dn(i,o){1&i&&e._UZ(0,"tr",129)}function un(i,o){1&i&&e._UZ(0,"tr",155)}function pn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Encargado"),e.qZA())}function hn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan5("enca",n)?"":"none"),e.uIk("rowspan",a.getRowSpan5("enca",n)),e.xp6(1),e.hij(" ",t.enca," ")}}function mn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Criterio"),e.qZA())}function fn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan5("crit",n)?"":"none"),e.uIk("rowspan",a.getRowSpan5("crit",n)),e.xp6(1),e.hij(" ",t.crit," ")}}function gn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Subcriterio"),e.qZA())}function bn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan5("subc",n)?"":"none"),e.uIk("rowspan",a.getRowSpan5("subc",n)),e.xp6(1),e.hij(" ",t.subc," ")}}function _n(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Indicador"),e.qZA())}function vn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan5("indic",n)?"":"none"),e.uIk("rowspan",a.getRowSpan5("indic",n)),e.xp6(1),e.hij(" ",t.indic," ")}}function Cn(i,o){1&i&&(e.TgZ(0,"th",115),e._uU(1,"Evidencia"),e.qZA())}function xn(i,o){if(1&i&&(e.TgZ(0,"td",126),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw();e.Udp("display",a.getRowSpan5("descr",n)?"":"none"),e.uIk("rowspan",a.getRowSpan5("descr",n)),e.xp6(1),e.hij(" ",t.descr," ")}}function yn(i,o){1&i&&e._UZ(0,"tr",129)}function Tn(i,o){1&i&&e._UZ(0,"tr",157)}const Zn=function(){return[400,200]},J=function(){return[5,10,20]},Sn=function(){return[300,200]};function Ie(){let o="#";for(let a=0;a<6;a++)o+="0123456789ABCDEF"[Math.floor(16*Math.random())];return parseInt(o.substring(1),16)>13421772&&(o=Ie()),o}const wn={verde:"#00FF00",naranja:"#FFA500",rojo:"#FF0000",amarillo:"#f8f32b"};let Dn=(()=>{class i{chartClicked({event:t,active:n}){console.log(t,n)}chartHovered({event:t,active:n}){console.log(t,n)}constructor(t,n,a,r,s,l,u,h,p,_,v){this.services=t,this.paginatorIntl=n,this.modelservices=a,this.dialog=r,this.eviden=s,this.router=l,this.servper=u,this.login=h,this.notificationService=p,this.httpCriterios=_,this.indi=v,this.displayedColumns=["actividad","nombre","subcriterio","indicadores","inicio","fin","encargado","enlace"],this.displayedColumns5=["enca","crit","subc","indic","descr"],this.displayedColumns6=["enca","crit","subc","indic","descr"],this.displayedColumns4=["indicadores","nindi","porcentaje"],this.dataSource=[],this.isLoggedIn=!1,this.user=null,this.rol=null,this.randomColors=[],this.noti=new W.U,this.notificaciones=[],this.numNotificacionesSinLeer=0,this.selectedColor="",this.abrir=!1,this.mostrargrafico=!1,this.itemsPerPageLabel="Items por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(m,C,g)=>{if(0==g||0==C)return`0 de ${g}`;const T=m*C;return`${T+1} - ${T<(g=Math.max(g,0))?Math.min(T+C,g):T+C} de ${g}`},this.titulo="Avance de los Criterios",this.titulo2="Avance de las Actividades",this.titulo3="Responsables",this.color="primary",this.seleccionados={},this.todosSeleccionados=!1,this.displayedColumns1=["actividad","nombre","subcriterio","indicadores","inicio","fin","encargado","enlace"],this.displayedColumns8=["actividad","nombre","subcriterio","indicadores","inicio","fin","encargado","enlace"],this.spanningColumns=["actividad","inicio","fin","encargado"],this.spans=[],this.spans2=[],this.spans3=[],this.spans4=[],this.spans5=[],this.spans8=[],this.coloresTarjetas=[],this.borderStyles=[],this.rowSpanValue=0,this.mostrarIconoCalificar=!0,this.vertit=!0,this.dataSource1=[],this.dataSource8=[],this.dataSource3=[],this.dataSource4=[],this.datacrite=[],this.datacre=new ei,this.displayedColumns3=["Criterio","Subcriterio","Indicador","Evidencia","Peso","Obtenido","Utilidad","Valor","Archivos","Idind","Tipo","Calificar"],this.labesCriterios=[],this.datosPOrceCriter=[],this.valores=[10,0],this.listaCriterios=[],this.valoresp=[],this.valoresp2=[],this.listaIndicadores=[],this.listain=[],this.persona=new R.m,this.suma={},this.datos=[],this.width=600,this.height=400,this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.view=[700,400],this.items=[],this.eventos=[],this.crite=[],this.avances=[],this.actividad=new j.D,this.Actividades=[],this.listact=[],this.listind=[],this.indicol=[],this.numac=[],this.Evidencias=[],this.totalAct=0,this.actApro=0,this.porc=0,this.clic=!1,this.datosUsuarios=[],this.filterPost="",this.verEvidencia=!1,this.verTipo=!0,this.ocultar=!1,this.verIndicador=!0,this.verPeso=!0,this.verObtenido=!0,this.verUtilidad=!1,this.verArchivo=!1,this.verValor=!0,this.verSubcriterio=!0,this.verCriterio=!1,this.coloresAsignados={},this.barChartOptions={responsive:!0,scales:{x:{type:"category",ticks:{autoSkip:!1,maxRotation:45,minRotation:45,color:"black"}},y:{}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end",color:"black"}}},this.barChartType="bar",this.barChartPlugins=[Ue.Z],this.barChartData={labels:[],datasets:[{data:[],label:"V/Obtenido",backgroundColor:"rgba(56,116,188,255)"},{data:[],label:"V/por obtener",backgroundColor:"rgba(184,54,51,255)"}]},this.barChartData2={labels:[],datasets:[{data:[],label:"V/Obtenido",backgroundColor:"rgba(56,116,188,255)"},{data:[],label:"V/por obtener",backgroundColor:"rgba(184,54,51,255)"}]},this.pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},datalabels:{formatter:(m,C)=>{if(C.chart.data.labels)return C.chart.data.labels[C.dataIndex]}},tooltip:{callbacks:{label:m=>`${m.raw}%`}}},elements:{arc:{backgroundColor:[]}}},this.pieChartData={labels:[],datasets:[{data:[]}]},this.pieChartType="pie",this.pieChartPlugins=[Ue.Z],this.calendarOptions={plugins:[ht,Kt],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:this.eventos,eventContent:this.personalizarEvent.bind(this),locale:Xt},this.colorScheme={domain:["#5AA454","#E44D25","#CFC0BB","#7aa3e5","#a8385d","#aae3f5","#000080","#32CD32","#FF69B4","#FFD700"]},this.rol=this.login.getUserRole(),this.paginatorIntl.nextPageLabel=this.nextPageLabel,this.paginatorIntl.lastPageLabel=this.lastPageLabel,this.paginatorIntl.itemsPerPageLabel=this.itemsPerPageLabel,this.paginatorIntl.previousPageLabel=this.previousPageLabel,this.paginatorIntl.firstPageLabel=this.firstPageLabel,this.paginatorIntl.getRangeLabel=this.rango}abrirOpcn(){this.abrir=!this.abrir}onSelect(t){console.log(t)}ngOnInit(){this.listarActividad(),this.modeloMax(),this.services.get().subscribe(n=>{this.eventos=n.map(a=>({title:a.nombre,start:new Date(a.fecha_inicio),end:new Date(a.fecha_fin),color:Ie()})),this.calendarOptions.events=this.eventos}),this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(n=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.listarnot(this.user.id);const t=localStorage.getItem("selectedColor");t&&(this.selectedColor=t,this.aplicarColorFondo(t))}cacheSpan(t,n){for(let a=0;a<this.dataSource1.length;){let r=n(this.dataSource1[a]),s=1;for(let l=a+1;l<this.dataSource1.length&&r===n(this.dataSource1[l]);l++)s++;this.spans[a]||(this.spans[a]={}),this.spans[a][t]=s,a+=s}}getRowSpan(t,n){return this.spans[n]&&this.spans[n][t]}cacheSpan2(t,n){for(let a=0;a<this.dataSource.length;){let r=n(this.dataSource[a]),s=1;for(let l=a+1;l<this.dataSource.length&&(console.log("Comparing:",r,n(this.dataSource[l])),r===n(this.dataSource[l]));l++)s++;this.spans2[a]||(this.spans2[a]={}),this.spans2[a][t]=s,a+=s}}getRowSpan2(t,n){return this.spans2[n]&&this.spans2[n][t]}cacheSpan3(t,n){for(let a=0;a<this.datacrite.length;){let r=n(this.datacrite[a]),s=1;for(let l=a+1;l<this.datacrite.length&&r===n(this.datacrite[l]);l++)s++;this.spans3[a]||(this.spans3[a]={}),this.spans3[a][t]=s,a+=s}}getRowSpan3(t,n){return this.spans3[n]&&this.spans3[n][t]}cacheSpan4(t,n){for(let a=0;a<this.dataSource3.length;){let r=n(this.dataSource3[a]),s=1;for(let l=a+1;l<this.dataSource3.length&&r===n(this.dataSource3[l]);l++)s++;this.spans4[a]||(this.spans4[a]={}),this.spans4[a][t]=s,a+=s}}getRowSpan4(t,n){return this.spans4[n]&&this.spans4[n][t]}cacheSpan5(t,n){for(let a=0;a<this.dataSource4.length;){let r=n(this.dataSource4[a]),s=1;for(let l=a+1;l<this.dataSource4.length&&r===n(this.dataSource4[l]);l++)s++;this.spans5[a]||(this.spans5[a]={}),this.spans5[a][t]=s,a+=s}}getRowSpan5(t,n){return this.spans5[n]&&this.spans5[n][t]}cacheSpan8(t,n){for(let a=0;a<this.dataSource8.length;){let r=n(this.dataSource8[a]),s=1;for(let l=a+1;l<this.dataSource8.length&&r===n(this.dataSource8[l]);l++)s++;this.spans8[a]||(this.spans8[a]={}),this.spans8[a][t]=s,a+=s}}getRowSpan8(t,n){return this.spans8[n]&&this.spans8[n][t]}calcularRowSpanValue(t){this.rowSpanValue=this.getRowSpan3("Indicador",t)}obtenerNombreArchivo(t){return t?t.substring(t.lastIndexOf("/")+1):""}obtenerNombreArchivo2(t){return t?t.substring(t.lastIndexOf("/")+1):""}toggleSeleccion(t){this.seleccionados[t]=!this.seleccionados[t],this.actualizarSeleccionGeneral()}actualizarSeleccionGeneral(){this.todosSeleccionados=this.datacrite.every(t=>this.seleccionados[t.criterionomj])}grafCom(){this.mostrargrafico=!this.mostrargrafico,this.vertitulo()}vertitulo(){this.texto=this.vertit?"-           No ha seleccionado ning\xfan criterio":""}fetchAndProcessData(t){this.titulocriterio=t,this.datacrite=[],this.spans3=[],this.clic=!0,this.vertit=!1,this.vertitulo(),this.mostrargrafico=!0,this.valorescriterio(t),""===this.titulocriterio&&(this.titulocriterio="ORGANIZACI\xd3N",t="ORGANIZACI\xd3N"),this.httpCriterios.getIdCriterio(t).subscribe(n=>{this.id_criterio=n.id_criterio}),this.modelservices.getlisdescrite(this.idmodel,t).subscribe(n=>{this.datacrite=n,this.datacrite.forEach(a=>{typeof this.seleccionados[a.criterionomj]>"u"&&(this.seleccionados[a.criterionomj]=!1)}),this.cacheSpan3("Criterio",a=>a.criterionomj),this.cacheSpan3("Subcriterio",a=>a.criterionomj+a.subcrierioj),this.cacheSpan3("Indicador",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej),this.cacheSpan3("Peso",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes),this.cacheSpan3("Obtenido",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt),this.cacheSpan3("Utilidad",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti),this.cacheSpan3("Valor",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti+a.val),this.cacheSpan3("Evidencia",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti+a.val+a.descrip),this.cacheSpan3("Archivos",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti+a.val+a.descrip+a.archivo_enlace),this.cacheSpan3("Idind",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti+a.val+a.descrip+a.archivo_enlace+a.id_indicardorj),this.cacheSpan3("Tipo",a=>a.criterionomj+a.subcrierioj+a.ind_nombrej+a.pes+a.obt+a.uti+a.val+a.descrip+a.archivo_enlace+a.id_indicardorj+a.tip),setTimeout(()=>{this.aplicar()},0)})}seleccionTodo(t){this.todosSeleccionados=t,this.datacrite.forEach(n=>{this.seleccionados[n.criterionomj]=t})}evaluar(t,n,a){console.log("tipo "+t+" id ind "+n+" peso "+a),this.dialog.open(Ne.n,{data:{valor:t,id:n,peso:a}}).afterClosed().subscribe(s=>{console.log(s),"success"==s.event&&(console.log(s),this.fetchAndProcessData(this.titulocriterio),this.listaind(),this.coloresPro(),this.valorespr(),this.cargarDatos(),this.valorescriterio(this.titulocriterio),x().fire({position:"center",icon:"success",title:"Calificaci\xf3n registrada",showConfirmButton:!0,timer:1500}))})}aplicar(){this.datacrite.forEach(t=>{t.randomColor=this.generarColor()}),this.datacrite.forEach(t=>{t.Colores=this.generarColor2()}),this.datacrite.forEach(t=>{t.indicol=this.generarColor3()})}generarColor(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor2(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor3(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}showTipo(){this.verTipo=!this.verTipo}showArchivo(){this.verArchivo=!this.verArchivo}showValor(){this.verValor=!this.verValor}showUtilidad(){this.verUtilidad=!this.verUtilidad}showObtenido(){this.verObtenido=!this.verObtenido}showCriterio(){this.verCriterio=!this.verCriterio}showSubcriterio(){this.verSubcriterio=!this.verSubcriterio}showIndicador(){this.verIndicador=!this.verIndicador}showPeso(){this.verPeso=!this.verPeso}showEvidencia(){this.verEvidencia=!this.verEvidencia}getColorcelda(t,n){if(!this.coloresAsignados[t]){const a=Math.floor(256*Math.random()),r=Math.floor(256*Math.random()),s=Math.floor(256*Math.random());this.coloresAsignados[t]=`rgba(${a}, ${r}, ${s}, ${n})`}return this.coloresAsignados[t]}obtenerActividades(t){this.services.getAc(t).subscribe(n=>{this.listact=n,this.avances=this.listact.map(a=>({name:a.nombres,value:a.avance}))},n=>{console.error("Error al obtener las actividades:",n)})}cambiar(){localStorage.setItem("selectedColor",this.selectedColor),this.aplicarColorFondo(this.selectedColor)}aplicarColorFondo(t){const n=document.getElementById("body"),a=document.getElementById("enc"),r=document.getElementById("letra"),s=document.getElementById("letra2"),l=document.getElementById("cal"),u=document.getElementById("tit"),h=document.getElementById("tit2"),p=document.getElementById("tit3"),_=document.getElementById("fig"),v=document.getElementById("fig5"),m=document.getElementById("menu"),C=document.getElementById("notif"),g=document.getElementById("txt"),T=document.getElementById("graf"),Z=document.getElementById("indic");n&&(n.style.backgroundColor=t),"white"===t?(a&&(a.style.backgroundColor="#eeeee4",a.style.background="#eeeee4"),r&&(r.style.color="black",r.style.backgroundColor="#eeeee4",r.style.boxShadow=""),u&&(u.style.color="black",u.style.boxShadow=""),h&&(h.style.color="black",h.style.boxShadow=""),p&&(p.style.color="black",p.style.boxShadow=""),s&&(s.style.color="black"),_&&(_.style.backgroundColor="white"),C&&(C.style.backgroundColor="white",C.style.color="black"),g&&(g.style.backgroundColor="white",g.style.color="black"),v&&(v.style.backgroundColor="white"),Z&&(Z.style.backgroundColor="white"),m&&(m.style.backgroundColor="#b0bec5"),T&&(T.style.color="black")):"#151a30"===t?(a&&(a.style.backgroundColor="#222b45",a.style.background="#222b45"),r&&(r.style.color="white",r.style.backgroundColor="#222b45",r.style.boxShadow=""),u&&(u.style.color="white",u.style.boxShadow=""),h&&(h.style.color="white",h.style.boxShadow=""),p&&(p.style.color="white",p.style.boxShadow=""),s&&(s.style.color="white"),C&&(C.style.backgroundColor="#151a30",C.style.color="white"),g&&(g.style.backgroundColor="#0d47a1",g.style.color="white"),m&&(m.style.backgroundColor="#BEC8DC80"),_&&(_.style.backgroundColor="#BEC8DC80"),v&&(v.style.backgroundColor="#BEC8DC80"),Z&&(Z.style.backgroundColor="#BEC8DC80"),l&&(l.style.color="white"),T&&(T.style.color="black")):"#131a22"===t&&(a&&(a.style.background="radial-gradient(circle, #6e14c4, #00b2d6)"),r&&(r.style.color="white",r.style.backgroundColor="rgba(2, 27, 32, 0.25)",r.style.boxShadow="0 0 10px #00b2d6, 0 0 20px #00b2d6, 0 0 40px #00b2d6, 0 0 80px #00b2d6"),u&&(u.style.color="white",u.style.boxShadow="0 0 10px #00b2d6, 0 0 20px #00b2d6, 0 0 40px #00b2d6, 0 0 80px #00b2d6"),h&&(h.style.color="white",h.style.boxShadow="0 0 10px #00b2d6, 0 0 20px #00b2d6, 0 0 40px #00b2d6, 0 0 80px #00b2d6"),p&&(p.style.color="white",p.style.boxShadow="0 0 10px #00b2d6, 0 0 20px #00b2d6, 0 0 40px #00b2d6, 0 0 80px #00b2d6"),s&&(s.style.color="white"),C&&(C.style.backgroundColor="",C.style.color="white"),g&&(g.style.backgroundColor="rgba(254,30,241,0.25)",g.style.color="white"),_&&(_.style.backgroundColor="rgb(0,247,255, 0.5) "),v&&(v.style.backgroundColor="rgb(0,247,255, 0.25)"),Z&&(Z.style.backgroundColor="rgb(0,247,255, 0.25)"),m&&(m.style.backgroundColor="radial-gradient(circle, #013b3f, ##01060a)"),T&&(T.style.color="black"))}listarnot(t){"ADMIN"==this.rol||"SUPERADMIN"==this.rol?this.notificationService.allnotificacion(this.rol).subscribe(n=>{this.notificaciones=n,this.numNotificacionesSinLeer=this.notificaciones.filter(a=>!a.visto).length,this.notificationService.getNotificaciones(t).subscribe(a=>{this.notificaciones=this.notificaciones.concat(a),this.numNotificacionesSinLeer+=a.filter(r=>!r.visto).length},a=>{console.error("No se pudieron listar las notificaciones propias")})},n=>{console.error("No se pudieron listar las notificaciones")}):this.notificationService.getNotificaciones(t).subscribe(n=>{this.notificaciones=n,this.numNotificacionesSinLeer=this.notificaciones.filter(a=>!a.visto).length},n=>{console.error("No se pudieron listar las notificaciones")})}irmodelo(){this.router.navigate(["/sup/modelo/modelo"])}detalle(){this.router.navigate(["/sup/modelo/detallemodelo"])}personalizarEvent(t){const n=new Date(t.event.end).toLocaleDateString("es",{month:"long",day:"numeric",year:"numeric"}),a=new Date(t.event.start).toLocaleDateString("es",{month:"long",day:"numeric",year:"numeric"});return{html:`<b>${t.event.title}</b><br>Inicio: ${a} - Fin: ${n}`}}getColor(t){return function An(i){let o=0;for(let n=0;n<i.length;n++)o=i.charCodeAt(n)+((o<<5)-o);return"#"+(16777215&o|2566914048).toString(16).slice(1)}(t.nombre)}modeloMax(){this.httpCriterios.getModeMaximo().subscribe(t=>{this.modeloMaximo=t,this.idmodel=t.id_modelo,this.valorespr(),this.coloresPro(),this.idmodel=t.id_modelo,console.log("ID Modelo:",this.idmodel),this.listaractividades(this.idmodel),this.obtenerActividades(this.idmodel),this.listarevaprob(this.idmodel),this.listarevarech(this.idmodel),this.httpCriterios.getCriterios().subscribe(n=>{this.listaCriterios=n,this.cargarDatos()}),this.listaind(),this.idmodel=t.id_modelo,console.log("ID Modelo:",this.idmodel)})}listarevaprob(t){this.eviden.geteviaprobada(t).subscribe(n=>{this.dataSource3=n,console.log("evidencia apr",JSON.stringify(this.dataSource3)),this.cacheSpan4("enca",a=>a.enca),this.cacheSpan4("crit",a=>a.enca+a.crit),this.cacheSpan4("subc",a=>a.enca+a.crit+a.subc),this.cacheSpan4("indic",a=>a.enca+a.crit+a.subc+a.indic),this.cacheSpan4("descr",a=>a.enca+a.crit+a.subc+a.indic+a.descr)})}listarevarech(t){this.eviden.getevirechazada(t).subscribe(n=>{this.dataSource4=n,console.log("evidencia rech",JSON.stringify(this.dataSource3)),this.cacheSpan5("enca",a=>a.enca),this.cacheSpan5("crit",a=>a.enca+a.crit),this.cacheSpan5("subc",a=>a.enca+a.crit+a.subc),this.cacheSpan5("indic",a=>a.enca+a.crit+a.subc+a.indic),this.cacheSpan5("descr",a=>a.enca+a.crit+a.subc+a.indic+a.descr)})}listaractividades(t){this.services.getActividadrechazada(t).subscribe(n=>{this.dataSource1=n,console.log("rechazadai",JSON.stringify(this.dataSource1)),this.cacheSpan("actividad",a=>a.actividades),this.cacheSpan("inicio",a=>a.actividades+a.inicio),this.cacheSpan("fin",a=>a.actividades+a.inicio+a.fin),this.cacheSpan("encargado",a=>a.actividades+a.inicio+a.fin+a.encargado)}),this.services.getActividadaprobada(t).subscribe(n=>{this.dataSource=n,this.cacheSpan2("actividad",a=>a.actividades),this.cacheSpan2("inicio",a=>a.actividades+a.inicio),this.cacheSpan2("fin",a=>a.actividades+a.inicio+a.fin),this.cacheSpan2("encargado",a=>a.actividades+a.inicio+a.fin+a.encargado)}),this.services.getActividadpendiente(t).subscribe(n=>{this.dataSource8=n,this.cacheSpan8("actividad",a=>a.actividades),this.cacheSpan8("inicio",a=>a.actividades+a.inicio),this.cacheSpan8("fin",a=>a.actividades+a.inicio+a.fin),this.cacheSpan8("encargado",a=>a.actividades+a.inicio+a.fin+a.encargado)})}colores(t){switch(t){case"verde":return"green";case"amarillo":return"yellow";case"naranja":return"orange";case"rojo":return"red";case"Total":return"gray";default:return"transparent"}}coloresPro(){this.indi.getIndicadorColProjection(this.idmodel).subscribe(t=>{this.indicol=t,this.pieChartData.datasets[0].data=this.indicol.map(u=>u.porcentaje);const n={rojo:">=0",naranja:">25",amarillo:">50",verde:">75"},a=t.map(u=>u.color);this.pieChartData.labels=a.map(u=>n[u]),null!=this.pieChartOptions?.elements?.arc?.backgroundColor&&(this.pieChartOptions.elements.arc.backgroundColor=this.indicol.map(u=>wn[u.color])),this.pieChartData={...this.pieChartData};const r=this.indicol.reduce((u,h)=>u+h.indica,0),s=this.indicol.reduce((u,h)=>u+h.porcentaje,0),l=Math.round(s);this.indicol.push({color:"Total",indica:r,porcentaje:l}),this.indicol.sort((u,h)=>{const p=["verde","amarillo","naranja","rojo","Total"];return p.indexOf(u.color)-p.indexOf(h.color)}),this.tabla=new b.by(this.indicol)})}valorespr(){this.httpCriterios.getvalores(this.idmodel).subscribe(t=>{this.valoresp=t,console.log("Valores de tabla"+JSON.stringify(this.valoresp)),this.barChartData.labels=this.valoresp.map(n=>n.nomcriterio),this.barChartData.datasets[0].data=this.valoresp.map(n=>n.vlObtenido),this.barChartData.datasets[1].data=this.valoresp.map(n=>n.vlobtener),this.barChartData={...this.barChartData}})}valorescriterio(t){this.httpCriterios.getvalorescriterio(this.idmodel,t).subscribe(n=>{this.valoresp2=n,console.log("Valores de tabla"+JSON.stringify(this.valoresp2)),this.barChartData2.labels=this.valoresp2.map(a=>a.nomcriterio),this.barChartData2.datasets[0].data=this.valoresp2.map(a=>a.vlObtenido),this.barChartData2.datasets[1].data=this.valoresp2.map(a=>a.vlobtener),this.barChartData2={...this.barChartData2}})}listarActividad(){this.httpCriterios.getActividadAtrasada().subscribe(t=>{this.Actividades=t})}listarEvidencias(){this.eviden.getEvidencias().subscribe(t=>{this.Evidencias=t})}getRandomColor(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}getColorA(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.6)`}getBorderColor(t){return`${100*t+"px"} solid ${this.getColorA()}`}listaind(){this.httpCriterios.getIndicador(this.idmodel).subscribe(t=>{this.listain=t,console.log("lista in "+this.listain)})}cargarDatos(){this.httpCriterios.getIndicador(this.idmodel).subscribe(t=>{this.listaIndicadores=t,this.datos=this.listaIndicadores.map(n=>({name:n.nombre,value:n.total/n.faltante*100})),this.listaIndicadores.sort((n,a)=>a.total-n.total),this.crite=this.listaIndicadores.map(n=>({name:n.nombre,value:n.total/n.faltante*100})),this.listaIndicadores.forEach(n=>{this.coloresTarjetas.push(this.getRandomColor()),this.borderStyles.push(this.getBorderColor(n.faltante-n.total))})},t=>{console.error("Error al obtener los datos:",t)})}calificar(t){console.log("MODELO: "+this.idmodel+" idcriterio :"+this.id_criterio+"Criterio pres: "+t.criterionomj),localStorage.setItem("datopasado",JSON.stringify({idCriterio:this.id_criterio,modelo:this.idmodel})),this.router.navigate(["/sup/modelo/matriz-evaluacion"])}getColorp(t){return t>=.75?"#4caf50":t>=.4?"#ffc107":"#f44336"}getPersonaActividad(t){console.log(t.usuario.id),this.httpCriterios.getObtenerPersonaId(t.usuario.id).subscribe(n=>{this.persona=n,console.log(this.persona)})}descargarArchivosSeleccionados(){var t=this;return(0,G.Z)(function*(){const n=t.datacrite.filter(r=>r.isSelected);if(0===n.length)return void(yield x().fire("Error","Por favor, seleccione al menos un archivo para descargar.","error"));const a=n.map(r=>t.descargarArchivo(r.archivo_enlace,t.obtenerNombreArchivo2(r.archivo_enlace)));try{yield Promise.all(a),n.forEach(r=>{r.isSelected=!1}),yield x().fire("Descarga confirmacion","Tiene que confirmar la descarga.","success")}catch(r){console.error("Error en las descargas:",r),yield x().fire("Error","Hubo un error durante las descargas.","error")}})()}descargarArchivo(t,n){return(0,G.Z)(function*(){try{const r=yield(yield fetch(t)).blob(),s=window.URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.download=n,l.click(),window.URL.revokeObjectURL(s)}catch{throw new Error("No se pudo descargar el archivo: "+n)}})()}seleccionarTodosArchivos(){for(const t of this.datacrite)t.isSelected=this.todosSeleccionados}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Re._),e.Y36(U.ye),e.Y36(ti.y),e.Y36(Me.uw),e.Y36(Ee.u),e.Y36(k.F0),e.Y36(re.J),e.Y36(K.r),e.Y36(X.U),e.Y36(B.X),e.Y36(se.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard2"]],viewQuery:function(t,n){if(1&t&&e.Gf(De.jh,5),2&t){let a;e.iGM(a=e.CRH())&&(n.chart=a.first)}},inputs:{color:"color"},decls:213,vars:70,consts:[["id","body",1,"border","border-start-0","rounded-4"],["id","fondo",1,"container-fluid"],["id","enc",1,"content-header"],[1,"container-fluid",2,"border","1px","border-radius","2%"],[1,"row","mb-2"],["id","letra","title","Haga clic para ir al modelo",1,"col-sm-6",3,"click"],[1,"blockquote","text-dark",2,"margin-top","5%"],["name","fondo","id","fondo",3,"ngModel","ngModelChange"],["value","white"],["value","#151a30"],["value","#131a22"],["class","pie-grid","id","indic",4,"ngIf"],["id","fig6",2,"display","flex","border-bottom","thick double #32a1ce","border-top","thick double #32a1ce"],["id","fig7",2,"flex-basis","70%","border-right","thick double #32a1ce"],["class","imagen",4,"ngIf"],[4,"ngIf"],[1,"cent"],[2,"width","80%","height","40%"],["id","tit2"],[2,"font-weight","bold"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","indicadores"],["mat-header-cell","","style","background-color: gray;",4,"matHeaderCellDef"],["mat-cell","",3,"background-color",4,"matCellDef"],["matColumnDef","nindi"],["mat-header-cell","","style","background-color: gray; text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style"," text-align: center;",4,"matCellDef"],["matColumnDef","porcentaje"],["mat-header-cell","","style","background-color: gray;text-align: center;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","tit3",2,"width","100%","height","90%","margin-top","10%"],[2,"font-weight","bold","margin-left","10%"],["baseChart","",1,"chart",3,"data","type","options","plugins"],["id","fig",2,"display","flex","border-bottom","thick double #32a1ce"],["id","fig2",2,"flex-basis","70%","border-right","thick double #32a1ce"],[1,"barra",2,"flex-basis","30%","margin-top","5%"],[3,"view","scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","showDataLabel","barPadding","roundEdges","xScaleMax","select"],["tooltipTemplate",""],["id","not",2,"display","flex","margin-bottom","2%"],["id","letra2",1,"calenda",2,"flex-basis","70%"],[1,"titu"],[1,"calendar-container"],["id","cal",3,"options"],["fcToolbar",""],["id","notif",2,"flex-basis","30%","margin-top","2%"],["id","txt",2,"height","620px","overflow-y","auto"],[2,"display","flex","border-top","thick double #32a1ce","margin-bottom","2%"],[2,"flex-basis","70%","border-right","thick double #32a1ce"],["id","menu",1,"men",3,"color"],["label","Actividades Aprobadas"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","actividad"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","nombre"],["mat-cell","",4,"matCellDef"],["matColumnDef","subcriterio"],["matColumnDef","inicio"],["matColumnDef","fin"],["matColumnDef","encargado"],["matColumnDef","enlace"],["mat-row","","class","tab-apr",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Seleccione la pagina",3,"pageSizeOptions"],["label","Actividades Rechazadas"],["mat-row","","class","tab-rech",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Seleccione las actividades",3,"pageSizeOptions"],["label","Actividades sin Aprobar"],["mat-row","","class","tab-pend",4,"matRowDef","matRowDefColumns"],["id","fig5",2,"flex-basis","30%"],["id","graf",1,"titu"],[2,"margin-top","6%"],[3,"view","scheme","results","xAxis","yAxis","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","showDataLabel","barPadding","roundEdges","select"],[2,"flex-basis","90%","border-right","thick double #32a1ce"],[1,"men",3,"color"],["label","Evidencias Aprobadas"],["matColumnDef","enca"],["matColumnDef","crit"],["matColumnDef","subc"],["matColumnDef","indic"],["matColumnDef","descr"],["label","Evidencias Rechazadas"],["id","indic",1,"pie-grid"],["class","card","title","Haga clic para ver los datos",3,"background-color","border","click",4,"ngFor","ngForOf"],["title","Haga clic para ver los datos",1,"card",3,"click"],[1,"card-content"],[1,"card-name",2,"color","black"],[1,"card-tot"],[1,"imagen"],["src","./assets/LOGO_CUADRADO_SIN FONDO.png","alt","Logo ista"],["id","tit"],[1,"btn-tabs"],["mat-button","",1,"btn-tab",3,"ngClass","click"],[2,"display","flex","margin-bottom","2%"],[1,"mat-elevation-z8","tabla-container"],["matColumnDef","Criterio"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","","style","padding: 4px;  font-size: 12px; ",3,"display","background-color",4,"matCellDef"],["matColumnDef","Subcriterio"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"background-color","display",4,"matCellDef"],["matColumnDef","Indicador"],["matColumnDef","Peso"],["mat-cell","","style","padding: 4px; font-size: 12px;","class","centrar",3,"display",4,"matCellDef"],["matColumnDef","Obtenido"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"display","ngClass",4,"matCellDef"],["matColumnDef","Utilidad"],["matColumnDef","Valor"],["matColumnDef","Evidencia"],["matColumnDef","Archivos"],["mat-cell","","style","padding: 4px; font-size: 14px;",3,"display",4,"matCellDef"],["matColumnDef","Idind"],["mat-cell","","style","padding: 4px; font-size: 12px;",3,"display",4,"matCellDef"],["matColumnDef","Tipo"],["matColumnDef","Calificar"],["mat-header-cell",""],["mat-cell","",2,"padding","4px","font-size","12px"],["mat-cell","",1,"centrar",2,"padding","4px","font-size","12px"],["mat-cell","",2,"padding","4px","font-size","12px",3,"ngClass"],[2,"display","flex","justify-content","space-between","align-items","center"],[3,"ngModel","ngModelChange","change"],[1,"btn","btn-download",2,"background-color","rgb(10, 7, 161)","color","white","border","none","padding","10px 20px","cursor","pointer",3,"click"],[1,"fas","fa-download"],["mat-cell","",2,"padding","4px","font-size","14px"],[3,"ngModel","ngModelChange"],["download","",3,"href"],["mat-cell",""],["mat-icon-button","",1,"boton",3,"click"],[1,"iconoB"],["mat-header-row",""],["mat-row",""],["mat-header-cell","",2,"background-color","gray"],["mat-header-cell","",2,"background-color","gray","text-align","center"],["mat-cell","",2,"text-align","center"],["baseChart","",1,"chart",3,"data","options","plugins","type","chartClick"],["mat-button","",1,"btn-tab",3,"click"],[1,"btntext"],[1,"custom-tooltip"],[1,"fc-toolbar"],[1,"fc-left"],[1,"fc-prev-button","fc-button","fc-button-primary"],[1,"fc-icon","fc-icon-chevron-left"],[1,"fc-next-button","fc-button","fc-button-primary"],[1,"fc-icon","fc-icon-chevron-right"],[1,"fc-today-button","fc-button","fc-button-primary"],[1,"fc-center"],[1,"fc-title","h4"],[1,"fc-right"],[1,"fc-dayGridMonth-button","fc-button","fc-button-primary"],[1,"fc-timeGridWeek-button","fc-button","fc-button-primary"],[1,"fc-timeGridDay-button","fc-button","fc-button-primary"],[4,"ngFor","ngForOf"],[1,"far","fa-clock","mr-1"],[1,"divider"],[3,"href"],["mat-row","",1,"tab-apr"],[3,"href","download"],["mat-row","",1,"tab-rech"],["mat-row","",1,"tab-pend"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5),e.NdJ("click",function(){return n.irmodelo()}),e.TgZ(6,"blockquote",6)(7,"h1")(8,"strong"),e._uU(9,"MODELO:"),e.qZA(),e._uU(10),e.qZA()()()()()(),e.TgZ(11,"select",7),e.NdJ("ngModelChange",function(r){return n.selectedColor=r})("ngModelChange",function(){return n.cambiar()}),e.TgZ(12,"option",8),e._uU(13,"Tema 1"),e.qZA(),e.TgZ(14,"option",9),e._uU(15,"Tema 2"),e.qZA(),e.TgZ(16,"option",10),e._uU(17,"Tema 3"),e.qZA()(),e.YNc(18,ri,2,1,"div",11),e.TgZ(19,"div",12)(20,"div",13),e.YNc(21,si,2,0,"div",14),e.YNc(22,Ii,68,14,"div",15),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"h3",19),e._uU(27,"Estado de los indicadores"),e.qZA()(),e.TgZ(28,"table",20),e.ynx(29,21),e.YNc(30,qi,2,0,"th",22),e.YNc(31,Oi,2,3,"td",23),e.BQk(),e.ynx(32,24),e.YNc(33,Pi,2,0,"th",25),e.YNc(34,zi,2,1,"td",26),e.BQk(),e.ynx(35,27),e.YNc(36,Yi,2,0,"th",28),e.YNc(37,Bi,2,1,"td",26),e.BQk(),e.YNc(38,ji,1,0,"tr",29),e.YNc(39,Qi,1,0,"tr",30),e.qZA()(),e.TgZ(40,"div",31)(41,"h3",32),e._uU(42,"Grafica de Indicadores"),e.qZA(),e._UZ(43,"canvas",33),e.qZA()()(),e.TgZ(44,"div",34)(45,"div",35),e.YNc(46,Li,4,4,"div",15),e.YNc(47,Ji,7,5,"div",15),e.qZA(),e.TgZ(48,"div",36)(49,"ngx-charts-bar-horizontal",37),e.NdJ("select",function(r){return n.onSelect(r)}),e.YNc(50,Hi,7,5,"ng-template",null,38,e.W1O),e.qZA()()(),e.TgZ(52,"div",39)(53,"div",40)(54,"h2",41),e._uU(55,"Calendario de Actividades"),e.qZA(),e.TgZ(56,"div",42)(57,"full-calendar",43),e.YNc(58,Fi,17,0,"ng-template",null,44,e.W1O),e.qZA()()(),e.TgZ(60,"div",45)(61,"h2"),e._uU(62,"Listado de Notificaciones"),e.qZA(),e.TgZ(63,"div",46),e.YNc(64,$i,2,1,"ul",15),e.YNc(65,Vi,2,0,"p",15),e.qZA()()(),e.TgZ(66,"div",47)(67,"div",48)(68,"mat-tab-group",49)(69,"mat-tab",50)(70,"div",51)(71,"table",52),e.ynx(72,53),e.YNc(73,Wi,2,0,"th",54),e.YNc(74,Ki,2,4,"td",55),e.BQk(),e.ynx(75,56),e.YNc(76,Xi,2,0,"th",54),e.YNc(77,eo,2,1,"td",57),e.BQk(),e.ynx(78,58),e.YNc(79,to,2,0,"th",54),e.YNc(80,io,2,1,"td",57),e.BQk(),e.ynx(81,21),e.YNc(82,oo,2,0,"th",54),e.YNc(83,no,2,1,"td",57),e.BQk(),e.ynx(84,59),e.YNc(85,ao,2,0,"th",54),e.YNc(86,ro,2,4,"td",55),e.BQk(),e.ynx(87,60),e.YNc(88,so,2,0,"th",54),e.YNc(89,lo,2,4,"td",55),e.BQk(),e.ynx(90,61),e.YNc(91,co,2,0,"th",54),e.YNc(92,uo,2,4,"td",55),e.BQk(),e.ynx(93,62),e.YNc(94,po,2,0,"th",54),e.YNc(95,ho,3,2,"td",57),e.BQk(),e.YNc(96,mo,1,0,"tr",29),e.YNc(97,fo,1,0,"tr",63),e.qZA(),e._UZ(98,"mat-paginator",64),e.qZA()(),e.TgZ(99,"mat-tab",65)(100,"div",51)(101,"table",52),e.ynx(102,53),e.YNc(103,go,2,0,"th",54),e.YNc(104,bo,2,4,"td",55),e.BQk(),e.ynx(105,56),e.YNc(106,_o,2,0,"th",54),e.YNc(107,vo,2,1,"td",57),e.BQk(),e.ynx(108,58),e.YNc(109,Co,2,0,"th",54),e.YNc(110,xo,2,1,"td",57),e.BQk(),e.ynx(111,21),e.YNc(112,yo,2,0,"th",54),e.YNc(113,To,2,1,"td",57),e.BQk(),e.ynx(114,59),e.YNc(115,Zo,2,0,"th",54),e.YNc(116,So,2,4,"td",55),e.BQk(),e.ynx(117,60),e.YNc(118,Ao,2,0,"th",54),e.YNc(119,wo,2,4,"td",55),e.BQk(),e.ynx(120,61),e.YNc(121,Do,2,0,"th",54),e.YNc(122,Uo,2,4,"td",55),e.BQk(),e.ynx(123,62),e.YNc(124,No,2,0,"th",54),e.YNc(125,Ro,3,3,"td",57),e.BQk(),e.YNc(126,Mo,1,0,"tr",29),e.YNc(127,Eo,1,0,"tr",66),e.qZA(),e._UZ(128,"mat-paginator",67),e.qZA()(),e.TgZ(129,"mat-tab",68)(130,"div",51)(131,"table",52),e.ynx(132,53),e.YNc(133,ko,2,0,"th",54),e.YNc(134,Io,2,4,"td",55),e.BQk(),e.ynx(135,56),e.YNc(136,qo,2,0,"th",54),e.YNc(137,Oo,2,1,"td",57),e.BQk(),e.ynx(138,58),e.YNc(139,Po,2,0,"th",54),e.YNc(140,zo,2,1,"td",57),e.BQk(),e.ynx(141,21),e.YNc(142,Yo,2,0,"th",54),e.YNc(143,Bo,2,1,"td",57),e.BQk(),e.ynx(144,59),e.YNc(145,jo,2,0,"th",54),e.YNc(146,Qo,2,4,"td",55),e.BQk(),e.ynx(147,60),e.YNc(148,Lo,2,0,"th",54),e.YNc(149,Jo,2,4,"td",55),e.BQk(),e.ynx(150,61),e.YNc(151,Ho,2,0,"th",54),e.YNc(152,Fo,2,4,"td",55),e.BQk(),e.ynx(153,62),e.YNc(154,Go,2,0,"th",54),e.YNc(155,$o,3,3,"td",57),e.BQk(),e.YNc(156,Vo,1,0,"tr",29),e.YNc(157,Wo,1,0,"tr",69),e.qZA(),e._UZ(158,"mat-paginator",67),e.qZA()()()(),e.TgZ(159,"div",70)(160,"h3",71),e._uU(161,"Gr\xe1fica de Avances desde 0% a 100%"),e.qZA(),e.TgZ(162,"div",72)(163,"ngx-charts-bar-horizontal",73),e.NdJ("select",function(r){return n.onSelect(r)}),e.YNc(164,Ko,7,4,"ng-template",null,38,e.W1O),e.qZA()()()(),e.TgZ(166,"div",47)(167,"div",74)(168,"h3"),e._uU(169,"Listado de Evidencias"),e.qZA(),e.TgZ(170,"mat-tab-group",75)(171,"mat-tab",76)(172,"div",51)(173,"table",52),e.ynx(174,77),e.YNc(175,Xo,2,0,"th",54),e.YNc(176,en,2,4,"td",55),e.BQk(),e.ynx(177,78),e.YNc(178,tn,2,0,"th",54),e.YNc(179,on,2,4,"td",55),e.BQk(),e.ynx(180,79),e.YNc(181,nn,2,0,"th",54),e.YNc(182,an,2,4,"td",55),e.BQk(),e.ynx(183,80),e.YNc(184,rn,2,0,"th",54),e.YNc(185,sn,2,4,"td",55),e.BQk(),e.ynx(186,81),e.YNc(187,ln,2,0,"th",54),e.YNc(188,cn,2,4,"td",55),e.BQk(),e.YNc(189,dn,1,0,"tr",29),e.YNc(190,un,1,0,"tr",63),e.qZA(),e._UZ(191,"mat-paginator",64),e.qZA()(),e.TgZ(192,"mat-tab",82)(193,"div",51)(194,"table",52),e.ynx(195,77),e.YNc(196,pn,2,0,"th",54),e.YNc(197,hn,2,4,"td",55),e.BQk(),e.ynx(198,78),e.YNc(199,mn,2,0,"th",54),e.YNc(200,fn,2,4,"td",55),e.BQk(),e.ynx(201,79),e.YNc(202,gn,2,0,"th",54),e.YNc(203,bn,2,4,"td",55),e.BQk(),e.ynx(204,80),e.YNc(205,_n,2,0,"th",54),e.YNc(206,vn,2,4,"td",55),e.BQk(),e.ynx(207,81),e.YNc(208,Cn,2,0,"th",54),e.YNc(209,xn,2,4,"td",55),e.BQk(),e.YNc(210,yn,1,0,"tr",29),e.YNc(211,Tn,1,0,"tr",66),e.qZA(),e._UZ(212,"mat-paginator",67),e.qZA()()()()()()()),2&t&&(e.xp6(10),e.hij(" ",null==n.modeloMaximo?null:n.modeloMaximo.nombre,""),e.xp6(1),e.Q6J("ngModel",n.selectedColor),e.xp6(7),e.Q6J("ngIf",n.listain),e.xp6(3),e.Q6J("ngIf",!n.clic),e.xp6(1),e.Q6J("ngIf",n.clic),e.xp6(6),e.Q6J("dataSource",n.tabla),e.xp6(10),e.Q6J("matHeaderRowDef",n.displayedColumns4),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns4),e.xp6(4),e.Q6J("data",n.pieChartData)("type",n.pieChartType)("options",n.pieChartOptions)("plugins",n.pieChartPlugins),e.xp6(3),e.Q6J("ngIf",!n.mostrargrafico),e.xp6(1),e.Q6J("ngIf",n.mostrargrafico),e.xp6(2),e.Q6J("view",e.DdM(63,Zn))("scheme",n.colorScheme)("results",n.crite)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!1)("xAxisLabel",n.titulo)("showDataLabel",!0)("barPadding",4)("roundEdges",!0)("xScaleMax",100),e.xp6(8),e.Q6J("options",n.calendarOptions),e.xp6(7),e.Q6J("ngIf",n.notificaciones&&n.notificaciones.length>0),e.xp6(1),e.Q6J("ngIf",!n.notificaciones||0===n.notificaciones.length),e.xp6(3),e.Q6J("color",n.color),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(64,J)),e.xp6(3),e.Q6J("dataSource",n.dataSource1),e.xp6(25),e.Q6J("matHeaderRowDef",n.displayedColumns1),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns1),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(65,J)),e.xp6(3),e.Q6J("dataSource",n.dataSource8),e.xp6(25),e.Q6J("matHeaderRowDef",n.displayedColumns8),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns8),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(66,J)),e.xp6(5),e.Q6J("view",e.DdM(67,Sn))("scheme",n.colorScheme)("results",n.avances)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxisLabel",n.titulo2)("yAxisLabel",n.titulo3)("showDataLabel",!0)("barPadding",4)("roundEdges",!0),e.xp6(7),e.Q6J("color",n.color),e.xp6(3),e.Q6J("dataSource",n.dataSource3),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns5),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns5),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(68,J)),e.xp6(3),e.Q6J("dataSource",n.dataSource4),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns6),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns6),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(69,J)))},dependencies:[S.mk,S.sg,S.O5,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,U.NW,q.lW,q.RK,y.YN,y.Kr,y.EJ,y.JJ,y.On,L.Hw,ii.oG,De.jh,oi.w,ni.$e,ke.uX,ke.SP,S.JJ,S.Zx,S.uU],styles:[".btn-visible[_ngcontent-%COMP%]{background-color:#09139bd0;color:#fff}.btn-oculto[_ngcontent-%COMP%]{background-color:#baec30;color:#050000}.pie-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:20px;justify-content:center}.card[_ngcontent-%COMP%]{width:170px;height:170px;background-color:transparent;border-radius:50%;border:8px solid #a7b7e2b9;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 4px #0000001a}.grafico[_ngcontent-%COMP%]{margin-bottom:1px}.tabla[_ngcontent-%COMP%]{margin-bottom:180px}.card-content[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:16px;font-weight:700}.card-tot[_ngcontent-%COMP%]{text-align:center;color:#000;font-size:12px}.card-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#000}.men[_ngcontent-%COMP%]{margin-bottom:6%}.cole[_ngcontent-%COMP%]{color:#fff}.tab-rech[_ngcontent-%COMP%]{background-color:#ff000028}.tab-pend[_ngcontent-%COMP%]{background-color:#d7e05428}.tab-apr[_ngcontent-%COMP%]{background-color:#00ff4028}.cent[_ngcontent-%COMP%]{flex-basis:30%;margin-top:2%;align-items:center;display:flex;flex-direction:column;justify-content:center}.barra[_ngcontent-%COMP%]{display:flex;justify-content:center;width:15%;height:15%}.titu[_ngcontent-%COMP%]{margin-top:2%;margin-left:2%;font-weight:700}table[_ngcontent-%COMP%]{width:70%}.calenda[_ngcontent-%COMP%]{flex-grow:1;margin-block-end:auto;writing-mode:horizontal-tb}.container[_ngcontent-%COMP%]{display:flex}.calendar-container[_ngcontent-%COMP%]{width:80%;height:60%}.fc[_ngcontent-%COMP%]   .fc-daygrid-day[_ngcontent-%COMP%]{font-size:auto;padding:.2rem;height:auto;width:auto}.fc-day-today[_ngcontent-%COMP%]{background-color:#05546e}.fc[_ngcontent-%COMP%]   .fc-title[_ngcontent-%COMP%], .fc-button[_ngcontent-%COMP%]{font-size:12px}.bar-container[_ngcontent-%COMP%]{width:100%;height:20px;background-color:#f3f3f3;border-radius:5px;border:1px solid rgba(3,3,3);overflow:hidden}.bar[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;border-radius:5px}.rojo[_ngcontent-%COMP%]{background-color:red;color:#fff;text-align:center}.centrar[_ngcontent-%COMP%]{background-color:#fcfafa;color:#020202;text-align:center}.naranja[_ngcontent-%COMP%]{background-color:orange;color:#fff;text-align:center}.amarillo[_ngcontent-%COMP%]{background-color:#ff0;text-align:center}.verde[_ngcontent-%COMP%]{background-color:green;color:#fff;text-align:center}.textTitulo[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;padding:20px 0;font-size:20px}.cards[_ngcontent-%COMP%]{width:100%;padding:35px 20px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:20px}.cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:20px;display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-radius:10px;box-shadow:0 7px 25px #00000014}.card-name[_ngcontent-%COMP%]{color:#888;font-weight:600}.icon-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:45px;color:#299b63}.tabla-container[_ngcontent-%COMP%]{max-height:750px;overflow-y:auto}.btntext[_ngcontent-%COMP%]{display:flex;align-items:center}.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;display:block;margin:0 auto;opacity:.5}.charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;grid-gap:20px;width:100%;padding:0 20px 20px}.chart[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 7px 25px #00000014;width:100%}.chart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5px;font-size:20px;color:#666;text-align:center}@media (max-width:880px){.fa-bell[_ngcontent-%COMP%]{justify-self:left}.cards[_ngcontent-%COMP%]{width:100%;padding:35px 20px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px}.charts[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width:500px){.topbar[_ngcontent-%COMP%]{grid-template-columns:1fr 5fr .4fr 1fr}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.search[_ngcontent-%COMP%]{width:80%}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 20px}.fa-bell[_ngcontent-%COMP%]{margin-right:5px}.cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.mat-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .mat-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:10px solid #0c0c0c;padding:8px}.btn-tabs[_ngcontent-%COMP%]{display:flex}.btn-tab[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#dca500;color:#000;font-weight:700;transform-origin:top right;transform:skew(-20deg);margin-right:-10px;cursor:pointer;transition:background-color .3s ease-in-out,color .3s ease-in-out}.btn-tab.selected[_ngcontent-%COMP%]{background-color:#044c9b;color:#fff}"]}),i})();class Un{constructor(){this.rolId=0,this.rolNombre=""}}var ee=f(4411);class te{constructor(){this.usuarioRolId=0,this.usuario=new ee.r,this.rol=new Un}}var Nn=f(9003),Rn=f(8505),Mn=f(262),En=f(2843),kn=f(5763),In=f(3071),qn=f(3242),ie=f(5567),On=f(529);let Pn=(()=>{class i{constructor(t){this.http=t}getusuarios(){return this.http.get(`${ie.Z}/api/usuariorol/listarv`)}actualizar(t,n){return this.http.put(`${ie.Z}/api/usuariorol/actualizar/${t}`,n)}getcriterios(t,n){return this.http.get(`${ie.Z}/api/criterio/datosuser/${t}/${n}`)}buscaruser(t){return this.http.get(`${ie.Z}/api/usuarios/buscaruser/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(On.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var O=f(9549),le=f(4144),qe=f(3546),zn=f(4385),Yn=f(3238);const Bn=["modal"];function jn(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"C\xe9dula"),e.qZA())}function Qn(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.cedula)}}function Ln(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Primer Apellido"),e.qZA())}function Jn(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.primer_apellido," ")}}function Hn(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Segundo Apellido"),e.qZA())}function Fn(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.segundo_apellido," ")}}function Gn(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Primer Nombre"),e.qZA())}function $n(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.primer_nombre," ")}}function Vn(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Segundo Nombre"),e.qZA())}function Wn(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.segundo_nombre," ")}}function Kn(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Celular"),e.qZA())}function Xn(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.celular)}}function ea(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Acciones"),e.qZA())}function ta(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",81)(1,"button",82),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.seleccionar(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"person_add"),e.qZA()()()}}function ia(i,o){1&i&&e._UZ(0,"tr",83)}function oa(i,o){1&i&&e._UZ(0,"tr",84)}function na(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El campo de contrase\xf1a es obligatorio "),e.qZA())}function aa(i,o){if(1&i&&(e.TgZ(0,"option",85),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.rolId),e.xp6(1),e.hij(" ",t.rolNombre," ")}}function ra(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El campo de selecci\xf3n de rol es obligatorio "),e.qZA())}function sa(i,o){if(1&i&&(e.TgZ(0,"mat-option",85),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.rolNombre),e.xp6(1),e.hij(" ",t.rolNombre," ")}}function la(i,o){if(1&i&&(e.TgZ(0,"th",80),e._uU(1,"ID"),e.qZA()),2&i){const t=e.oxw();e.Udp("display",t.ocultar?"":"none")}}function ca(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Udp("display",n.ocultar?"":"none"),e.xp6(1),e.hij(" ",t.usuario.id," ")}}function da(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Nombre"),e.qZA())}function ua(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.AsE(" ",null==t||null==t.usuario.persona?null:t.usuario.persona.primer_nombre," ",null==t||null==t.usuario.persona?null:t.usuario.persona.primer_apellido," ")}}function pa(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"USUARIO"),e.qZA())}function ha(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.usuario.username," ")}}function ma(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"ROL"),e.qZA())}function fa(i,o){if(1&i&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.rol.rolNombre," ")}}function ga(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Criterios"),e.qZA())}function ba(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function _a(i,o){if(1&i&&(e.TgZ(0,"td",81),e.YNc(1,ba,2,1,"div",86),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t.criterio)}}function va(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"Evidencias"),e.qZA())}function Ca(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function xa(i,o){if(1&i&&(e.TgZ(0,"td",81),e.YNc(1,Ca,2,1,"div",86),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t.evidencia)}}function ya(i,o){1&i&&(e.TgZ(0,"th",80),e._uU(1,"ACCIONES"),e.qZA())}function Ta(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",81)(1,"button",87),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.eliminar(r.usuario))}),e._UZ(2,"i",88),e.qZA(),e.TgZ(3,"button",89),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.EditarUsuari(r))}),e._UZ(4,"i",90),e.qZA()()}}function Za(i,o){1&i&&e._UZ(0,"tr",83)}function Sa(i,o){1&i&&e._UZ(0,"tr",84)}function Aa(i,o){if(1&i&&(e.TgZ(0,"option",91),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngValue",t)("selected",t.rolNombre===n.usuariosEdit.rol.rolNombre),e.xp6(1),e.hij(" ",t.rolNombre," ")}}const wa=function(){return[5,10,20]};let Da=[],Ua=(()=>{class i{constructor(t,n,a,r,s,l,u,h){this.personaService=t,this.usuariosService=n,this.userService=a,this.httpCriterios=r,this.fenix_service=s,this.formBuilder=l,this.paginatorIntl=u,this.usuariorolservice=h,this.usuarioGuardar=new ee.r,this.fenix=new Nn.M,this.listaPersonas=[],this.selectedRole=null,this.listaUsuarios=[],this.filterPost="",this.personaSele=new R.m,this.usuariosEdit=new te,this.usuariosEditGuar=new te,this.itemsPerPageLabel="Usuarios por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(p,_,v)=>{if(0==v||0==_)return`0 de ${v}`;const m=p*_;return`${m+1} - ${m<(v=Math.max(v,0))?Math.min(m+_,v):m+_} de ${v}`},this.roles=[{rolId:1,rolNombre:"ADMIN"},{rolId:2,rolNombre:"SUPERADMIN"},{rolId:3,rolNombre:"RESPONSABLE"},{rolId:4,rolNombre:"AUTORIDAD"}],this.usuario={username:"",password:""},this.rol=0,this.ocultar=!1,this.dataSource2=new b.by,this.columnasUsuario=["id","nombre","usuario","rol","criterio","evidencia","actions"],this.displayedColumns=["cedula","primer_apellido","segundo_apellido","primer_nombre","segundo_nombre","celular","acciones"],this.dataSource=Da,this.formulario=this.formBuilder.group({username:{value:"",disabled:!0},password:["",y.kI.required],rol:["",this.validateRol]}),this.paginatorIntl.nextPageLabel=this.nextPageLabel,this.paginatorIntl.lastPageLabel=this.lastPageLabel,this.paginatorIntl.firstPageLabel=this.firstPageLabel,this.paginatorIntl.previousPageLabel=this.previousPageLabel,this.paginatorIntl.itemsPerPageLabel=this.itemsPerPageLabel,this.paginatorIntl.getRangeLabel=this.rango}ngAfterViewInit(){this.dataSource2.paginator=this.paginator||null}ngOnInit(){this.personaService.getPersonas().subscribe(t=>this.listaPersonas=t),this.modeloMax()}modeloMax(){this.httpCriterios.getModeMaximo().subscribe(t=>{this.idmodel=t.id_modelo,this.Listado()})}Listado(){this.usuariorolservice.getusuarios().subscribe(t=>{const n=t;console.log("usuarios "+JSON.stringify(t)),n.forEach(a=>{console.log("usuario id "+JSON.stringify(a.usuario.id)),this.usuariorolservice.getcriterios(a.usuario.id,this.idmodel).subscribe(r=>{a.criterio=r.map(s=>s.criterio),a.evidencia=r.map(s=>s.evidencia),n.every(s=>s.criterio&&s.criterio.length>0)&&(this.dataSource2.data=n,console.log("criterios v "+JSON.stringify(this.dataSource2.data)))})})})}aplicarFiltroPorRol(){this.dataSource2.data=this.selectedRole?this.listaUsuarios.filter(t=>t.rol.rolNombre===this.selectedRole):this.listaUsuarios}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource2.data=this.dataSource2.data.filter(n=>JSON.stringify(n).toLowerCase().includes(t))}else this.dataSource2.data=this.listaUsuarios}consultarPorCedula(){null!=this.fenix.cedula&&""!=this.fenix.cedula?this.fenix_service.getDocenteByCedula(this.fenix.cedula).subscribe(t=>{this.dataSource=t,console.log(this.dataSource)}):x().fire("Error","Debe ingresar una cedula","error")}consultarPorNombre(){null!=this.fenix.primer_nombre&&""!=this.fenix.primer_nombre?this.fenix_service.getDocenteByPrimerNombre(this.fenix.primer_nombre).subscribe(t=>{this.dataSource=t}):x().fire({icon:"error",title:"Error",text:"Por favor, ingrese un nombre v\xe1lido",confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar"})}consultarPorSegundoNombre(){null!=this.fenix.segundo_nombre&&""!=this.fenix.segundo_nombre?this.fenix_service.getDocenteBySegundoNombre(this.fenix.segundo_nombre).subscribe(t=>{this.dataSource=t}):x().fire("Error","Por favor, ingrese un nombre v\xe1lido","error")}consultarPorPrimerNombreSegundoNombre(){null!=this.fenix.primer_nombre&&""!=this.fenix.primer_nombre||null!=this.fenix.segundo_nombre&&""!=this.fenix.segundo_nombre?this.fenix_service.getDocenteByPrimerNombreSegundoNombre(this.fenix.primer_nombre,this.fenix.segundo_nombre).subscribe(t=>{this.dataSource=t}):x().fire("Error","Por favor, ingrese los nombres v\xe1lidos","error")}consultarPorApellido(){null!=this.fenix.primer_apellido&&""!=this.fenix.primer_apellido?this.fenix_service.getDocenteByPrimerApellido(this.fenix.primer_apellido).subscribe(t=>{this.dataSource=t}):x().fire("Error","Debe ingresar un apellido","error")}consultarPorSegundoApellido(){null!=this.fenix.segundo_apellido&&""!=this.fenix.segundo_apellido?this.fenix_service.getDocenteBySegundoApellido(this.fenix.segundo_apellido).subscribe(t=>{this.dataSource=t}):x().fire("Error","Debe ingresar un apellido","error")}consultarPorPrimerApellidoAndSegundoApellido(){null!=this.fenix.primer_apellido&&""!=this.fenix.primer_apellido||null!=this.fenix.segundo_apellido&&""!=this.fenix.segundo_apellido?this.fenix_service.getDocenteByPrimerApellidoAndSegundoApellido(this.fenix.primer_apellido,this.fenix.segundo_apellido).subscribe(t=>{this.dataSource=t}):x().fire("Error","Debe ingresar un apellido","error")}consultar(){if(this.fenix.primer_nombre&&this.fenix.primer_apellido)this.consultarPorNombreCompleto();else if(this.fenix.cedula)this.consultarPorCedula();else if(this.fenix.primer_apellido&&this.fenix.segundo_apellido)this.consultarPorPrimerApellidoAndSegundoApellido();else if(this.fenix.primer_apellido)this.consultarPorApellido();else{if(!this.fenix.primer_nombre)return void x().fire("Error","Debe ingresar un valor a buscar","error");this.consultarPrimerNombre()}}consultarPorNombreCompleto(){null==this.fenix.primer_nombre&&null==this.fenix.primer_apellido||""==this.fenix.primer_nombre&&""==this.fenix.primer_apellido?x().fire("Error","Debe llenar los campos","error"):this.fenix_service.getDocenteByNombresCompletos(this.fenix.primer_nombre,this.fenix.primer_apellido).subscribe(t=>{this.dataSource=t,console.log(this.dataSource)})}consultarPrimerNombre(){null!=this.fenix.primer_nombre&&""!=this.fenix.primer_nombre?this.fenix_service.getDocenteByPrimerNombre(this.fenix.primer_nombre).subscribe(t=>{this.dataSource=t}):x().fire("Error","Debe ingresar un nombre","error")}seleccionar(t){this.personaSele.cedula=t.cedula,this.personaSele.primer_apellido=t.primer_apellido,this.personaSele.segundo_apellido=t.segundo_apellido,this.personaSele.primer_nombre=t.primer_nombre,this.personaSele.segundo_nombre=t.segundo_nombre,this.personaSele.celular=t.celular,this.personaSele.correo=t.correo,this.personaSele.direccion=t.direccion,console.log(this.personaSele),this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.persona=this.personaSele}seleccionar2(t){this.personaSele=t,this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.persona.id_persona=this.personaSele.id_persona}limpiarFormulario(){}registrarUsuario(){console.log(this.usuarioGuardar),this.personaService.findByCedula(this.personaSele.cedula).subscribe(t=>{t?(this.usuarioGuardar.username=t.cedula,this.usuarioGuardar.persona=t,this.crearUsuario()):this.personaService.createPersona(this.personaSele).subscribe(n=>{console.log(n),this.usuarioGuardar.username=n.cedula,this.usuarioGuardar.persona=n,this.crearUsuario()},n=>{console.log(n),x().fire({icon:"error",title:"No se pudo registrar persona",text:"Error al registrar!",footer:'<a href=""></a>'})})},t=>{console.error("Error al listar los indicadors:",t)})}crearUsuario(){console.log(this.usuarioGuardar),this.usuariosService.createUsuario(this.usuarioGuardar,this.rol).subscribe(()=>{x().fire("Usuario Registrado!","El usuario ha sido registrado \xe9xitosamente","success"),this.Listado(),this.formulario.reset(),this.formulario.markAsPristine()},t=>{console.log(t),x().fire({icon:"error",title:"No se pudo registrar usuario",text:"Error al registrar!",footer:'<a href=""></a>'})})}guardarUsuario(){this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.password=this.formulario.value.password,this.rol=this.formulario.value.rol,console.log(this.usuarioGuardar.username),console.log(this.usuarioGuardar.password),console.log(this.rol),this.usuarioGuardar.username&&this.usuarioGuardar.password&&this.rol?this.usuariosService.obtenerUsuario(this.usuarioGuardar.username).pipe((0,Rn.b)(t=>{t?x().fire("Usuario existente","El usuario ya est\xe1 registrado","warning"):this.registrarUsuario()}),(0,Mn.K)(t=>(console.log(t),x().fire({icon:"error",title:"Error al comprobar usuario",text:"Error al comprobar la existencia del usuario",footer:'<a href=""></a>'}),(0,En._)(t)))).subscribe():x().fire("Campos Vacios","Por favor llene todos los campos","warning")}cerrarModal(){this.formulario.reset(),this.formulario.markAsPristine()}validateRol(t){const n=t.value;return n&&0!==n?null:{required:!0}}eliminar(t){const n=t.id;x().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.usuariosService.eliminarUsuarioLogic(n).subscribe(r=>{this.Listado()}),x().fire("Eliminado!","Registro eliminado.","success"))})}EditarUsuari(t){this.usuariosEdit=t}compareRoles(t,n){return t&&n?t.rolNombre===n.rolNombre:t===n}Actualizar(t){0==t.rol.rolId&&(t.rol=this.usuariosEdit.rol),""==t.usuario.password&&(t.usuario.password=this.usuariosEdit.usuario.password),t.usuarioRolId=this.usuariosEdit.usuarioRolId,console.log(t),x().fire({title:"\xbfDesea modificar los campos?",showCancelButton:!0,confirmButtonText:"SI",denyButtonText:"NO"}).then(n=>{n.isConfirmed?this.usuariorolservice.actualizar(t.usuarioRolId,t).subscribe(a=>{x().fire("Usuario Modificado!","El usuario ha sido modificado \xe9xitosamente","success"),this.Listado(),this.usuariosEdit=new te,this.usuariosEditGuar=new te}):x().fire("Se ha cancelado la operaci\xf3n","","info")})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(re.J),e.Y36(kn.i),e.Y36(In.K),e.Y36(B.X),e.Y36(qn.x),e.Y36(y.qu),e.Y36(U.ye),e.Y36(Pn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-crear-usuarios"]],viewQuery:function(t,n){if(1&t&&(e.Gf(U.NW,5),e.Gf(Bn,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.modal=a.first)}},decls:177,vars:29,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic"],[1,"blockquote","text-dark"],[1,"container"],[1,"col","col-lg-3"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","Ingrese la c\xe9dula","name","cedula",3,"ngModel","ngModelChange"],["matInput","","placeholder","Ingresar un nombre","name","primer_nombre",3,"ngModel","ngModelChange"],["matInput","","placeholder","Ingrese el apellido","name","primer_apellido",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"row",2,"margin-bottom","5%"],[1,"col"],[1,"card"],[1,"card-body"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","cedula"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primer_apellido"],["matColumnDef","segundo_apellido"],["matColumnDef","primer_nombre"],["matColumnDef","segundo_nombre"],["matColumnDef","celular"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","staticBackdrop","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],["modal",""],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["disabled","","type","text","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"value"],[1,"input-group-text"],["disabled","","type","text","aria-label","First name",1,"form-control",3,"value"],["disabled","","type","text","aria-label","Last name",1,"form-control",3,"value"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["required","","formControlName","username","name","username","matInput","","placeholder","Digite su nombre de usuario",3,"value"],["formControlName","password","type","password","matInput","","placeholder","Digite su contrase\xf1a"],[4,"ngIf"],["appearance","fill"],["formControlName","rol","matNativeControl",""],[3,"value",4,"ngFor","ngForOf"],[1,"container","text-center"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",2,"margin-left","5%"],[1,"fas","fa-times"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],["appearance","outline"],[3,"ngModel","ngModelChange"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","usuario"],["matColumnDef","rol"],["matColumnDef","criterio"],["matColumnDef","evidencia"],["matColumnDef","actions"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header","text-center",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","font-weight-bold",2,"font-family","Arial, sans-serif","color","white"],["action",""],["name","username","matInput","","placeholder","Digite su nombre de usuario",3,"ngModel","value","ngModelChange"],["name","rol",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue","selected",4,"ngFor","ngForOf"],["disabled","","name","password","matInput","","placeholder","Digite su contrase\xf1a",3,"value"],["required","","name","password2","type","password","matInput","","placeholder","Digite su contrase\xf1a",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary",2,"background-color","rgb(151, 166, 189)","margin-right","1%",3,"click"],["mat-header-row",""],["mat-row",""],[3,"value"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"margin-right","5%",3,"click"],[1,"fas","fa-user-times"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary",2,"margin-right","5%",3,"click"],[1,"fas","fa-edit"],[3,"ngValue","selected"]],template:function(t,n){if(1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"figure",1)(3,"blockquote",2)(4,"h1")(5,"strong"),e._uU(6," BUSCAR USUARIOS"),e.qZA()()()(),e.TgZ(7,"div",3)(8,"div",4)(9,"form",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"C\xe9dula:"),e.qZA(),e.TgZ(13,"input",7),e.NdJ("ngModelChange",function(r){return n.fenix.cedula=r}),e.qZA()(),e.TgZ(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Primer Nombre:"),e.qZA(),e.TgZ(17,"input",8),e.NdJ("ngModelChange",function(r){return n.fenix.primer_nombre=r}),e.qZA()(),e.TgZ(18,"mat-form-field",6)(19,"mat-label"),e._uU(20,"Primer Apellido:"),e.qZA(),e.TgZ(21,"input",9),e.NdJ("ngModelChange",function(r){return n.fenix.primer_apellido=r}),e.qZA()(),e.TgZ(22,"button",10),e.NdJ("click",function(){return n.consultar()}),e._uU(23," Buscar "),e.TgZ(24,"mat-icon"),e._uU(25,"search"),e.qZA()()()(),e.TgZ(26,"div",11),e._UZ(27,"div",12)(28,"div",12)(29,"div",12),e.qZA()(),e.TgZ(30,"div",13)(31,"div",14)(32,"table",15),e.ynx(33,16),e.YNc(34,jn,2,0,"th",17),e.YNc(35,Qn,2,1,"td",18),e.BQk(),e.ynx(36,19),e.YNc(37,Ln,2,0,"th",17),e.YNc(38,Jn,2,1,"td",18),e.BQk(),e.ynx(39,20),e.YNc(40,Hn,2,0,"th",17),e.YNc(41,Fn,2,1,"td",18),e.BQk(),e.ynx(42,21),e.YNc(43,Gn,2,0,"th",17),e.YNc(44,$n,2,1,"td",18),e.BQk(),e.ynx(45,22),e.YNc(46,Vn,2,0,"th",17),e.YNc(47,Wn,2,1,"td",18),e.BQk(),e.ynx(48,23),e.YNc(49,Kn,2,0,"th",17),e.YNc(50,Xn,2,1,"td",18),e.BQk(),e.ynx(51,24),e.YNc(52,ea,2,0,"th",17),e.YNc(53,ta,4,0,"td",18),e.BQk(),e.YNc(54,ia,1,0,"tr",25),e.YNc(55,oa,1,0,"tr",26),e.qZA(),e.TgZ(56,"div",27,28),e.NdJ("hidden.bs.modal",function(){return n.cerrarModal()}),e.TgZ(58,"div",29)(59,"div",30)(60,"div",31)(61,"h1",32),e._uU(62," Asignar Usuario "),e.qZA(),e._UZ(63,"button",33),e.qZA(),e.TgZ(64,"div",34)(65,"div",35)(66,"span",36),e._uU(67,"C\xe9dula"),e.qZA(),e._UZ(68,"input",37),e.qZA(),e.TgZ(69,"div",35)(70,"span",38),e._uU(71,"Nombre y apellido"),e.qZA(),e._UZ(72,"input",39)(73,"input",40),e.qZA(),e._UZ(74,"hr"),e.TgZ(75,"mat-card-header")(76,"mat-card-title"),e._uU(77,"Ingrese los datos para el nuevo usuario"),e.qZA()(),e._UZ(78,"hr"),e.TgZ(79,"form",41),e.NdJ("ngSubmit",function(){return n.guardarUsuario()}),e.TgZ(80,"mat-form-field",42)(81,"mat-label"),e._uU(82,"Nombre de usuario"),e.qZA(),e._UZ(83,"input",43),e.qZA(),e.TgZ(84,"mat-form-field",42)(85,"mat-label"),e._uU(86,"Contrase\xf1a"),e.qZA(),e._UZ(87,"input",44),e.YNc(88,na,2,0,"mat-error",45),e.qZA(),e.TgZ(89,"mat-form-field",46)(90,"mat-label"),e._uU(91,"ROL"),e.qZA(),e.TgZ(92,"select",47),e.YNc(93,aa,2,2,"option",48),e.qZA(),e.YNc(94,ra,2,0,"mat-error",45),e.qZA(),e.TgZ(95,"div",49)(96,"button",50)(97,"mat-icon"),e._uU(98,"save"),e.qZA(),e._uU(99,"Registrar "),e.qZA(),e.TgZ(100,"button",51),e._UZ(101,"i",52),e._uU(102," Cancelar "),e.qZA()()()()()()()()(),e.TgZ(103,"blockquote",53)(104,"h1")(105,"strong"),e._uU(106," LISTADO DE USUARIOS"),e.qZA()()(),e.TgZ(107,"div",13)(108,"div",14)(109,"div",54)(110,"input",55),e.NdJ("ngModelChange",function(r){return n.filterPost=r})("input",function(){return n.aplicarFiltro()}),e.qZA()(),e.TgZ(111,"div",54)(112,"mat-form-field",56)(113,"mat-label"),e._uU(114,"Rol"),e.qZA(),e.TgZ(115,"mat-select",57),e.NdJ("ngModelChange",function(r){return n.selectedRole=r})("ngModelChange",function(){return n.aplicarFiltroPorRol()}),e.YNc(116,sa,2,2,"mat-option",48),e.qZA()()(),e.TgZ(117,"div",58)(118,"table",59),e.ynx(119,60),e.YNc(120,la,2,2,"th",61),e.YNc(121,ca,2,3,"td",62),e.BQk(),e.ynx(122,63),e.YNc(123,da,2,0,"th",17),e.YNc(124,ua,2,2,"td",18),e.BQk(),e.ynx(125,64),e.YNc(126,pa,2,0,"th",17),e.YNc(127,ha,2,1,"td",18),e.BQk(),e.ynx(128,65),e.YNc(129,ma,2,0,"th",17),e.YNc(130,fa,2,1,"td",18),e.BQk(),e.ynx(131,66),e.YNc(132,ga,2,0,"th",17),e.YNc(133,_a,2,1,"td",18),e.BQk(),e.ynx(134,67),e.YNc(135,va,2,0,"th",17),e.YNc(136,xa,2,1,"td",18),e.BQk(),e.ynx(137,68),e.YNc(138,ya,2,0,"th",17),e.YNc(139,Ta,5,0,"td",18),e.BQk(),e.YNc(140,Za,1,0,"tr",25),e.YNc(141,Sa,1,0,"tr",26),e.qZA(),e._UZ(142,"mat-paginator",69),e.qZA(),e.TgZ(143,"div",70)(144,"div",29)(145,"div",30)(146,"div",71)(147,"strong")(148,"h1",72),e._uU(149," Editar Usuario "),e.qZA()(),e._UZ(150,"button",33),e.qZA(),e.TgZ(151,"div",34)(152,"form",73)(153,"mat-form-field",42)(154,"mat-label"),e._uU(155,"Nombre de usuario"),e.qZA(),e.TgZ(156,"input",74),e.NdJ("ngModelChange",function(r){return n.usuariosEditGuar.usuario.username=r}),e.qZA()(),e._UZ(157,"br"),e.TgZ(158,"select",75),e.NdJ("ngModelChange",function(r){return n.usuariosEditGuar.rol=r}),e.YNc(159,Aa,2,3,"option",76),e.qZA(),e._UZ(160,"br")(161,"br"),e.TgZ(162,"mat-form-field",42)(163,"mat-label"),e._uU(164,"Contrase\xf1a"),e.qZA(),e._UZ(165,"input",77),e.qZA(),e.TgZ(166,"mat-form-field",42)(167,"mat-label"),e._uU(168,"Nueva Contrase\xf1a"),e.qZA(),e.TgZ(169,"input",78),e.NdJ("ngModelChange",function(r){return n.usuariosEditGuar.usuario.password=r}),e.qZA()(),e.TgZ(170,"div",49)(171,"button",79),e.NdJ("click",function(){return n.Actualizar(n.usuariosEditGuar)}),e.TgZ(172,"mat-icon"),e._uU(173,"save"),e.qZA(),e._uU(174,"Guardar "),e.qZA(),e.TgZ(175,"button",51),e._uU(176," Cancelar "),e.qZA()()()()()()()()()()()),2&t){let a,r;e.xp6(13),e.Q6J("ngModel",n.fenix.cedula),e.xp6(4),e.Q6J("ngModel",n.fenix.primer_nombre),e.xp6(4),e.Q6J("ngModel",n.fenix.primer_apellido),e.xp6(11),e.Q6J("dataSource",n.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(13),e.Q6J("value",n.personaSele.cedula),e.xp6(4),e.Q6J("value",n.personaSele.primer_nombre),e.xp6(1),e.Q6J("value",n.personaSele.primer_apellido),e.xp6(6),e.Q6J("formGroup",n.formulario),e.xp6(4),e.Q6J("value",n.personaSele.cedula),e.xp6(5),e.Q6J("ngIf",(null==(a=n.formulario.get("password"))?null:a.invalid)&&(null==(a=n.formulario.get("password"))?null:a.touched)),e.xp6(5),e.Q6J("ngForOf",n.roles),e.xp6(1),e.Q6J("ngIf",(null==(r=n.formulario.get("rol"))?null:r.invalid)&&(null==(r=n.formulario.get("rol"))?null:r.touched)),e.xp6(2),e.Q6J("disabled",n.formulario.invalid),e.xp6(14),e.Q6J("ngModel",n.filterPost),e.xp6(5),e.Q6J("ngModel",n.selectedRole),e.xp6(1),e.Q6J("ngForOf",n.roles),e.xp6(2),e.Q6J("dataSource",n.dataSource2),e.xp6(22),e.Q6J("matHeaderRowDef",n.columnasUsuario),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasUsuario),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(28,wa)),e.xp6(14),e.Q6J("ngModel",n.usuariosEditGuar.usuario.username)("value",n.usuariosEdit.usuario.username),e.xp6(2),e.Q6J("ngModel",n.usuariosEditGuar.rol),e.xp6(1),e.Q6J("ngForOf",n.roles),e.xp6(6),e.Q6J("value",n.usuariosEdit.usuario.password),e.xp6(4),e.Q6J("ngModel",n.usuariosEditGuar.usuario.password)}},dependencies:[S.sg,S.O5,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,U.NW,q.lW,q.RK,O.KE,O.hX,O.TO,le.Nt,y._Y,y.YN,y.Kr,y.Fj,y.EJ,y.JJ,y.JL,y.Q7,y.On,y.F,y.sg,y.u,qe.dk,qe.n5,L.Hw,zn.gD,Yn.ey],styles:[".mat-select-panel.mat-select-panel-right[_ngcontent-%COMP%]{margin-left:auto!important}.no-asignado[_ngcontent-%COMP%]{color:gray;font-style:italic}input[_ngcontent-%COMP%]:disabled, mat-label[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-close[_ngcontent-%COMP%]{background-color:red}.mat-cell[_ngcontent-%COMP%], .matCellDef[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}.custom-select-panel[_ngcontent-%COMP%]{z-index:9999}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-btn[_ngcontent-%COMP%]{background-color:#f9f9f9;color:#000;padding:10px;border:none;cursor:pointer}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#fff;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block;cursor:pointer}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.dropdown-content[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#ccc}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.custom-select[_ngcontent-%COMP%]{z-index:1000}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),i})();var ce=f(3891),Na=f(7009),de=f(161),Ra=f(6805);const Ma=["modal"];function Ea(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Cedula "),e.qZA())}function ka(i,o){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.cedula,"")}}function Ia(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Nombre "),e.qZA())}function qa(i,o){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.primer_nombre," ")}}function Oa(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Actividad "),e.qZA())}function Pa(i,o){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.primer_apellido," ")}}function za(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Celular "),e.qZA())}function Ya(i,o){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.celular," ")}}function Ba(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Direccion "),e.qZA())}function ja(i,o){if(1&i&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.direccion," ")}}function Qa(i,o){1&i&&(e.TgZ(0,"th",35),e._uU(1," Enviar Mensaje "),e.qZA())}function La(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",36)(1,"button",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return s.mecorreo(r.correo),e.KtG(s.notificar(r.id_persona))}),e._UZ(2,"i",38),e._uU(3," Enviar correo "),e.qZA()()}}function Ja(i,o){1&i&&e._UZ(0,"tr",39)}function Ha(i,o){1&i&&e._UZ(0,"tr",40)}let Fa=(()=>{class i{constructor(t,n,a,r,s,l){this.archivo=t,this._snackBar=n,this.serviceper=a,this.paginatorIntl=r,this.subiarchivo=s,this.emailService=l,this.displayedColumns=["file","uploadedBy","activity","startDate","endDate","sendMessage"],this.displayedColumns2=["cedula","nombre","apellido","celular","direccion","sendMessage"],this.spanningColumns=["uploadedBy","activity","startDate","endDate"],this.spans=[],this.itemsPerPageLabel="Archivos por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(u,h,p)=>{if(0==p||0==h)return`0 de ${p}`;const _=u*h;return`${_+1} - ${_<(p=Math.max(p,0))?Math.min(_+h,p):_+h} de ${p}`},this.sent=!1,this.toUser="",this.subject="",this.message="",this.combinedRows=[],this.searchTerm="",this.correo=""}ngOnInit(){this.listarpersonas(),this.paginatorIntl.nextPageLabel=this.nextPageLabel,this.paginatorIntl.lastPageLabel=this.lastPageLabel,this.paginatorIntl.itemsPerPageLabel=this.itemsPerPageLabel,this.paginatorIntl.previousPageLabel=this.previousPageLabel,this.paginatorIntl.firstPageLabel=this.firstPageLabel,this.paginatorIntl.getRangeLabel=this.rango}cacheSpan(t,n){for(let a=0;a<this.arch.length;){let r=n(this.arch[a]),s=1;for(let l=a+1;l<this.arch.length&&r===n(this.arch[l]);l++)s++;this.spans[a]||(this.spans[a]={}),this.spans[a][t]=s,a+=s}}getRowSpan(t,n){return this.spans[n]&&this.spans[n][t]}mecorreo(t){this.toUser=t}listar(){console.log(this.arch),this.subiarchivo.getDatos().subscribe(t=>{console.log(t),this.arch=t,this.cacheSpan("uploadedBy",n=>n.resp),this.cacheSpan("activity",n=>n.resp+n.activid),this.cacheSpan("startDate",n=>n.resp+n.activid+n.ini),this.cacheSpan("endDate",n=>n.resp+n.activid+n.ini+n.finish)},t=>{console.error(t)})}listarpersonas(){this.serviceper.getPersonas().subscribe(t=>{console.log(JSON.stringify(t)),this.personas=t,console.log("lista "+this.personas)},t=>{console.error(t)})}notificar(t){console.log("este es el id "+t)}enviar(){this.emailService.sendEmail([this.toUser],this.subject,this.message).subscribe(t=>{console.log("Email sent successfully!"),x().fire({icon:"success",title:"\xa1Correo electr\xf3nico enviado!",text:"El correo electr\xf3nico se envi\xf3 correctamente."}),this.limpiarCampos()},t=>{console.error("Error sending email:",t),x().fire({icon:"error",title:"Error al enviar correo electr\xf3nico",text:"No se pudo enviar el correo electr\xf3nico."})})}limpiarCampos(){this.toUser="",this.subject="",this.message=""}closeModal(){this.modal.nativeElement.style.display="none"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce.g),e.Y36(Na.ux),e.Y36(re.J),e.Y36(U.ye),e.Y36(ce.g),e.Y36(de.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-obcervaciones"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ma,5),2&t){let a;e.iGM(a=e.CRH())&&(n.modal=a.first)}},decls:55,vars:10,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"card"],[1,"card-body"],[1,"input-group","mb-3"],["type","text","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"mat-elevation-z8"],["mat-table","",1,"table","table-bordered","table-hover",3,"dataSource"],["matColumnDef","cedula"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","apellido"],["matColumnDef","celular"],["matColumnDef","direccion"],["matColumnDef","sendMessage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content"],[1,"modal-header","bg-blue"],[1,"modal-title"],[1,"fas","fa-clipboard"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"ngSubmit"],["for","toUser"],["type","email","id","toUser","name","toUser","required","","disabled","false",3,"ngModel","ngModelChange"],["for","subject"],["type","text","id","subject","name","subject","required","",3,"ngModel","ngModelChange"],["for","message"],["id","message","name","message","required","",3,"ngModel","ngModelChange"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary","btn-lg"],[1,"bi","bi-airplane"],["mat-header-cell",""],["mat-cell",""],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-paper-plane","mr-2"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1")(4,"strong"),e._uU(5," Enviar E-mails"),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"input",5),e.NdJ("ngModelChange",function(r){return n.searchTerm=r}),e.qZA()(),e.TgZ(10,"div",6)(11,"table",7),e.ALo(12,"responsable"),e.ynx(13,8),e.YNc(14,Ea,2,0,"th",9),e.YNc(15,ka,2,1,"td",10),e.BQk(),e.ynx(16,11),e.YNc(17,Ia,2,0,"th",9),e.YNc(18,qa,2,1,"td",10),e.BQk(),e.ynx(19,12),e.YNc(20,Oa,2,0,"th",9),e.YNc(21,Pa,2,1,"td",10),e.BQk(),e.ynx(22,13),e.YNc(23,za,2,0,"th",9),e.YNc(24,Ya,2,1,"td",10),e.BQk(),e.ynx(25,14),e.YNc(26,Ba,2,0,"th",9),e.YNc(27,ja,2,1,"td",10),e.BQk(),e.ynx(28,15),e.YNc(29,Qa,2,0,"th",9),e.YNc(30,La,4,0,"td",10),e.BQk(),e.YNc(31,Ja,1,0,"tr",16),e.YNc(32,Ha,1,0,"tr",17),e.qZA()()()()(),e.TgZ(33,"div",18)(34,"div",19)(35,"div",20)(36,"div",21)(37,"h3",22),e._UZ(38,"i",23),e._uU(39," Env\xedo de correos "),e.qZA(),e._UZ(40,"button",24),e.qZA(),e.TgZ(41,"div",25)(42,"form",26),e.NdJ("ngSubmit",function(){return n.enviar()}),e.TgZ(43,"label",27),e._uU(44,"Para: "),e.qZA(),e.TgZ(45,"input",28),e.NdJ("ngModelChange",function(r){return n.toUser=r}),e.qZA(),e.TgZ(46,"label",29),e._uU(47,"Asunto:"),e.qZA(),e.TgZ(48,"input",30),e.NdJ("ngModelChange",function(r){return n.subject=r}),e.qZA(),e.TgZ(49,"label",31),e._uU(50,"Mensaje:"),e.qZA(),e.TgZ(51,"textarea",32),e.NdJ("ngModelChange",function(r){return n.message=r}),e.qZA(),e.TgZ(52,"button",33),e._UZ(53,"i",34),e._uU(54," Enviar correo "),e.qZA()()()()()()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.searchTerm),e.xp6(2),e.Q6J("dataSource",e.xi3(12,7,n.personas,n.searchTerm)),e.xp6(20),e.Q6J("matHeaderRowDef",n.displayedColumns2),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns2),e.xp6(13),e.Q6J("ngModel",n.toUser),e.xp6(3),e.Q6J("ngModel",n.subject),e.xp6(3),e.Q6J("ngModel",n.message))},dependencies:[b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,y._Y,y.Fj,y.JJ,y.JL,y.Q7,y.On,y.F,Ra.d],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;accent-color:#253b69}.bigspace[_ngcontent-%COMP%]{height:100vh}section[_ngcontent-%COMP%]{width:300px;margin:50px;font-family:Arial,Helvetica,sans-serif;text-align:center}fieldset[_ngcontent-%COMP%]{width:100%;border:2px solid #152b59c0;border-radius:2px;padding:1rem 10%}legend[_ngcontent-%COMP%]{color:#152b59;font-weight:700;padding:0 .5rem}button[_ngcontent-%COMP%]{background-color:#152b59ee;border:none;border-radius:3px;color:#fff;padding:.3rem 1rem;letter-spacing:1px}button[_ngcontent-%COMP%]:disabled{opacity:.5}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{resize:vertical;height:100px}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{width:revert;margin-left:1rem}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),i})();var P=f(7940),Ga=f(2271),$a=f(404);const Va=["datosModalRef"];function Wa(i,o){1&i&&(e.TgZ(0,"th",20),e._uU(1,"Criterio"),e.qZA())}function Ka(i,o){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombreCriterio," ")}}function Xa(i,o){1&i&&(e.TgZ(0,"th",20),e._uU(1,"ID"),e.qZA())}function er(i,o){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.id_subcriterio," ")}}function tr(i,o){1&i&&(e.TgZ(0,"th",20),e._uU(1,"NOMBRE"),e.qZA())}function ir(i,o){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function or(i,o){1&i&&(e.TgZ(0,"th",20),e._uU(1,"DESCRIPCI\xd3N"),e.qZA())}function nr(i,o){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descripcion," ")}}function ar(i,o){1&i&&(e.TgZ(0,"th",20),e._uU(1,"INDICADORES"),e.qZA())}function rr(i,o){if(1&i&&(e.TgZ(0,"td",21)(1,"div",22)(2,"p"),e._uU(3,"Contiene "),e.TgZ(4,"span",23),e._uU(5),e.qZA(),e._uU(6," Indicadores"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(5),e.Oqu(t.cantidadIndicadores)}}function sr(i,o){1&i&&e._UZ(0,"tr",24)}function lr(i,o){1&i&&e._UZ(0,"tr",25)}const cr=function(){return[5,10,20]};let dr=(()=>{class i{constructor(t){this.subcriterioservice=t,this.subcrite=new Ga.p,this.subcriterios=[],this.filterPost="",this.dataSource=new b.by,this.columnasUsuario=["nombreCriterio","id_subcriterio","nombre","descripcion","cantidadIndicadores"]}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listar()}listar(){this.subcriterioservice.obtenerDatosSubcriteriosFull().subscribe(t=>{this.subcriterios=t,this.dataSource.data=this.subcriterios},t=>{console.error("Error al listar los subcriterios:",t)})}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(n=>JSON.stringify(n).toLowerCase().includes(t))}else this.dataSource.data=this.subcriterios}}return i.\u0275fac=function(t){return new(t||i)(e.Y36($a.j))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-subcriterios"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Va,5),e.Gf(U.NW,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.datosModalRef=a.first),e.iGM(a=e.CRH())&&(n.paginator=a.first)}},decls:31,vars:6,consts:[[2,"background-color","transparent"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[2,"text-transform","uppercase"],[1,"card"],[1,"card-body"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","nombreCriterio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_subcriterio"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","cantidadIndicadores"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements","itemsPerPageLabel","Items por p\xe1gina:","nextPageLabel","Siguiente","previousPageLabel","Anterior",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[2,"color","red"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"body",0)(1,"div",1)(2,"blockquote",2)(3,"h1",3)(4,"strong")(5,"a"),e._uU(6,"LISTADO SUBCRITERIOS "),e.qZA()()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"input",7),e.NdJ("ngModelChange",function(r){return n.filterPost=r})("input",function(){return n.aplicarFiltro()}),e.qZA()(),e.TgZ(11,"div",8)(12,"table",9),e.ynx(13,10),e.YNc(14,Wa,2,0,"th",11),e.YNc(15,Ka,2,1,"td",12),e.BQk(),e.ynx(16,13),e.YNc(17,Xa,2,0,"th",11),e.YNc(18,er,2,1,"td",12),e.BQk(),e.ynx(19,14),e.YNc(20,tr,2,0,"th",11),e.YNc(21,ir,2,1,"td",12),e.BQk(),e.ynx(22,15),e.YNc(23,or,2,0,"th",11),e.YNc(24,nr,2,1,"td",12),e.BQk(),e.ynx(25,16),e.YNc(26,ar,2,0,"th",11),e.YNc(27,rr,7,1,"td",12),e.BQk(),e.YNc(28,sr,1,0,"tr",17),e.YNc(29,lr,1,0,"tr",18),e.qZA(),e._UZ(30,"mat-paginator",19),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",n.filterPost),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.columnasUsuario),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasUsuario),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,cr)))},dependencies:[b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,U.NW,y.Fj,y.JJ,y.On]}),i})();var Oe=f(8896);const ur=["datosModalRef"];function pr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"SUBCRITERIO"),e.qZA())}function hr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombreSubcriterio," ")}}function mr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"ID"),e.qZA())}function fr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.id_indicador," ")}}function gr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"NOMBRE"),e.qZA())}function br(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function _r(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"DESCRIPCI\xd3N"),e.qZA())}function vr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descripcion," ")}}function Cr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"PESO"),e.qZA())}function xr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.peso," ")}}function yr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"ESTANDAR"),e.qZA())}function Tr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.estandar," ")}}function Zr(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"TIPO"),e.qZA())}function Sr(i,o){if(1&i&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.tipo," ")}}function Ar(i,o){1&i&&(e.TgZ(0,"th",23),e._uU(1,"EVIDENCIAS"),e.qZA())}function wr(i,o){if(1&i&&(e.TgZ(0,"td",24)(1,"div",25)(2,"p"),e._uU(3," Contiene "),e.TgZ(4,"span",26),e._uU(5),e.qZA(),e._uU(6," Evidencias "),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(5),e.Oqu(t.cantidadEvidencia)}}function Dr(i,o){1&i&&e._UZ(0,"tr",27)}function Ur(i,o){1&i&&e._UZ(0,"tr",28)}const Nr=function(){return[5,10,20]};let Rr=(()=>{class i{constructor(t){this.indicadorservice=t,this.indic=new Oe.s,this.indicadors=[],this.filterPost="",this.dataSource=new b.by,this.columnasUsuario=["nombreSubcriterio","id_indicador","nombre","descripcion","peso","estandar","tipo","cantidadEvidencia"]}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listar()}listar(){this.indicadorservice.obtenerDatosIndicadoresFull().subscribe(t=>{this.indicadors=t,this.dataSource.data=this.indicadors},t=>{console.error("Error al listar los indicadors:",t)})}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(n=>JSON.stringify(n).toLowerCase().includes(t))}else this.dataSource.data=this.indicadors}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-indicador"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ur,5),e.Gf(U.NW,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.datosModalRef=a.first),e.iGM(a=e.CRH())&&(n.paginator=a.first)}},decls:42,vars:6,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[2,"text-transform","uppercase"],[1,"card"],[1,"card-body"],["role","search","id","buscar"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","nombreSubcriterio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_indicador"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","peso"],["matColumnDef","estandar"],["matColumnDef","tipo"],["matColumnDef","cantidadEvidencia"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements","itemsPerPageLabel","Items por p\xe1gina:","nextPageLabel","Siguiente","previousPageLabel","Anterior",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[2,"color","red"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1",2)(4,"strong")(5,"a"),e._uU(6,"LISTADO INDICADORES "),e.qZA()()()(),e.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"input",7),e.NdJ("ngModelChange",function(r){return n.filterPost=r})("input",function(){return n.aplicarFiltro()}),e.qZA()(),e._UZ(12,"br"),e.qZA(),e.TgZ(13,"div",8)(14,"table",9),e.ynx(15,10),e.YNc(16,pr,2,0,"th",11),e.YNc(17,hr,2,1,"td",12),e.BQk(),e.ynx(18,13),e.YNc(19,mr,2,0,"th",11),e.YNc(20,fr,2,1,"td",12),e.BQk(),e.ynx(21,14),e.YNc(22,gr,2,0,"th",11),e.YNc(23,br,2,1,"td",12),e.BQk(),e.ynx(24,15),e.YNc(25,_r,2,0,"th",11),e.YNc(26,vr,2,1,"td",12),e.BQk(),e.ynx(27,16),e.YNc(28,Cr,2,0,"th",11),e.YNc(29,xr,2,1,"td",12),e.BQk(),e.ynx(30,17),e.YNc(31,yr,2,0,"th",11),e.YNc(32,Tr,2,1,"td",12),e.BQk(),e.ynx(33,18),e.YNc(34,Zr,2,0,"th",11),e.YNc(35,Sr,2,1,"td",12),e.BQk(),e.ynx(36,19),e.YNc(37,Ar,2,0,"th",11),e.YNc(38,wr,7,1,"td",12),e.BQk(),e.YNc(39,Dr,1,0,"tr",20),e.YNc(40,Ur,1,0,"tr",21),e.qZA(),e._UZ(41,"mat-paginator",22),e.qZA()()()()()),2&t&&(e.xp6(11),e.Q6J("ngModel",n.filterPost),e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",n.columnasUsuario),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasUsuario),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,Nr)))},dependencies:[b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,U.NW,y.Fj,y.JJ,y.On],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),i})(),Mr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-evidencias"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"evidencias works!"),e.qZA())}}),i})();var Pe=f(9518);const Er=["datosModalRef"];function kr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",7),e._uU(2),e.qZA(),e.TgZ(3,"td",7),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e._uU(6),e.qZA(),e.TgZ(7,"td",7),e._uU(8),e.qZA(),e.TgZ(9,"td",7)(10,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.mostrarObservacion(r))}),e.TgZ(11,"mat-icon"),e._uU(12,"visibility"),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.id_actividad),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.fecha_inicio),e.xp6(2),e.Oqu(t.fecha_fin)}}function Ir(i,o){if(1&i&&(e.TgZ(0,"tr",23)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.id_observacion),e.xp6(2),e.Oqu(t.observacion)}}let qr=(()=>{class i{constructor(t,n,a){this.login=t,this.service=n,this.notificacion=a,this.searchText="",this.actividad=[],this.observaciones=[],this.notifi=new W.U,this.isLoggedIn=!1,this.user=null,this.rol=null}ngOnInit(){this.getListarEvide(),this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.rol=this.login.getUserRole()}getListarEvide(){this.service.getEvidenciaAtrasFecha().subscribe(t=>{this.actividad=t,console.log("actividades atrasadas"+JSON.stringify(this.actividad))})}mostrarObservacion(t){this.service.getObservacionByActi(t.id_actividad).subscribe(n=>{this.observaciones=n,console.log(this.observaciones)})}createNoti(t){this.notifi={id:0,fecha:new Date,rol:this.rol,mensaje:t.mensaje,visto:!0,usuario:this.user.id,url:"",idactividad:0},this.notificacion.crear(this.notifi).subscribe(n=>{this.notifi=n,x().fire({title:"Notificaci\xf3n Guardado \xe9xitosamente",icon:"success",iconColor:"#17550c",color:"#0c3255",confirmButtonColor:"#0c3255",background:"#63B68B"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.r),e.Y36(B.X),e.Y36(X.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-evidencia-atrasada"]],viewQuery:function(t,n){if(1&t&&e.Gf(Er,5),2&t){let a;e.iGM(a=e.CRH())&&(n.datosModalRef=a.first)}},decls:51,vars:6,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"card"],[1,"card-body"],["role","search","id","buscar"],["type","text","placeholder","Buscar","aria-label","Search",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","materiaModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","bg-blue"],[1,"modal-title"],[1,"fas","fa-clipboard"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","tbl_productos_mas_vendidos",1,"table"],[1,"text-danger"],["class","text-center text-start",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","form","formulario","data-bs-dismiss","modal",1,"btn","btn-warning"],["type","button","data-bs-toggle","modal","data-bs-target","#materiaModal",1,"btn","btn-primary",3,"click"],[1,"text-center","text-start"]],template:function(t,n){1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1")(4,"strong"),e._uU(5," LISTA DE ACTIVIDADES RECHAZADAS"),e.qZA()()(),e._UZ(6,"div"),e.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"input",5),e.NdJ("ngModelChange",function(r){return n.searchText=r}),e.qZA()(),e._UZ(11,"br")(12,"br")(13,"br"),e.TgZ(14,"table",6)(15,"thead")(16,"tr")(17,"th",7),e._uU(18,"ID"),e.qZA(),e.TgZ(19,"th",7),e._uU(20,"NOMBRE"),e.qZA(),e.TgZ(21,"th",7),e._uU(22,"FECHA INICIO"),e.qZA(),e.TgZ(23,"th",7),e._uU(24,"FECHA FIN"),e.qZA(),e.TgZ(25,"th",7),e._uU(26,"OBSERVACIONES"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,kr,13,4,"tr",8),e.ALo(29,"buscar"),e.qZA()()()()()(),e.TgZ(30,"div",9)(31,"div",10)(32,"div",11)(33,"div",12)(34,"h3",13),e._UZ(35,"i",14),e._uU(36," Observaciones "),e.qZA(),e._UZ(37,"button",15),e.qZA(),e.TgZ(38,"div",16)(39,"table",17)(40,"thead")(41,"tr",18)(42,"th",7),e._uU(43,"ID"),e.qZA(),e.TgZ(44,"th",7),e._uU(45,"OBSERVACI\xd3N"),e.qZA()()(),e.TgZ(46,"tbody"),e.YNc(47,Ir,5,2,"tr",19),e.qZA()(),e.TgZ(48,"div",20)(49,"button",21),e._uU(50," Cerrar "),e.qZA()()()()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",n.searchText),e.xp6(18),e.Q6J("ngForOf",e.xi3(29,3,n.actividad,n.searchText)),e.xp6(19),e.Q6J("ngForOf",n.observaciones))},dependencies:[S.sg,y.Fj,y.JJ,y.On,L.Hw,Pe.o],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),i})();var ue=f(4641),Or=f(8493);const Pr=["datosModalRef"];function zr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"a",24),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.toggleCriterioSelection(r))}),e.TgZ(1,"span",25),e._UZ(2,"input",26),e.TgZ(3,"label",27),e._uU(4),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Q6J("checked",n.isCriterioSelected(t)),e.xp6(2),e.Oqu(t.nombre)}}function Yr(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.subcriterio.criterio.nombre),e.xp6(2),e.Oqu(t.subcriterio.nombre),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.valor_obtenido),e.xp6(2),e.Oqu(t.porc_obtenido),e.xp6(2),e.Oqu(t.porc_utilida_obtenida)}}function Br(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.subcriterio.criterio.nombre),e.xp6(2),e.Oqu(t.subcriterio.nombre),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.valor_obtenido),e.xp6(2),e.Oqu(t.porc_obtenido),e.xp6(2),e.Oqu(t.porc_utilida_obtenida)}}function jr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Br,15,7,"tr",21),e.ALo(2,"buscar"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.criteriosCuali,t.searchText))}}function Qr(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.subcriterio.criterio.nombre),e.xp6(2),e.Oqu(t.subcriterio.nombre),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.valor_obtenido),e.xp6(2),e.Oqu(t.porc_obtenido),e.xp6(2),e.Oqu(t.porc_utilida_obtenida)}}function Lr(i,o){if(1&i&&(e.YNc(0,Qr,15,7,"tr",21),e.ALo(1,"buscar")),2&i){const t=e.oxw();e.Q6J("ngForOf",e.xi3(1,1,t.criteriosCuanti,t.searchText))}}ue.vfs=Or.I.vfs;let Jr=(()=>{class i{constructor(t,n){this.indicadorservice=t,this.criterioservice=n,this.criteriosCuali=[],this.criteriosCuanti=[],this.rango=(a,r,s)=>{if(0==s||0==r)return`0 de ${s}`;const l=a*r;return`${l+1} - ${l<(s=Math.max(s,0))?Math.min(l+r,s):l+r} de ${s}`},this.mostrarVistaGeneral=!1,this.modoVisualizacion="cualitativo",this.modoVista="general",this.searchText="",this.buscar="",this.indic=new Oe.s,this.indicadors=[],this.criterios=[],this.criteriosSeleccionados=[],this.tablaExpandida="tablaGeneral"}ngOnInit(){this.listar(),this.listarpruebasalvCL(),this.listarpruebasalvCT()}listar(){this.indicadorservice.indicadoresPorCriterios([]).subscribe(t=>{this.indicadors=t,this.listarcriterio(),console.log("Datos de criterios totales:",this.indicadors)},t=>{console.error("Error al listar los indicadors:",t)})}listarpruebasalvCL(){this.indicadorservice.indicadoresPorCriteriosPruebaAlvCL([]).subscribe(t=>{this.criteriosCuali=t,console.log("Datos de criterios cualitativos:",this.criteriosCuali),this.listarcriterio()},t=>{console.error("Error al listar los indicadores:",t)})}listarpruebasalvCT(){this.indicadorservice.indicadoresPorCriteriosPruebaAlvCT([]).subscribe(t=>{this.criteriosCuanti=t,console.log("Datos de criterios cuantitativos:",this.criteriosCuanti),this.listarcriterio()},t=>{console.error("Error al listar los indicadores:",t)})}listarcriterio(){this.criterioservice.getCriteriosUltimoModelo().subscribe(t=>{this.criterios=t},t=>{console.error("Error al listar los criterios:",t)})}toggleCriterioSelection(t){this.isCriterioSelected(t)?this.criteriosSeleccionados=this.criteriosSeleccionados.filter(n=>n.id_criterio!==t.id_criterio):this.criteriosSeleccionados.push(t)}activarVistaGeneral(){this.mostrarVistaGeneral=!0,this.listar()}toggleModoVisualizacion(){this.modoVisualizacion="cualitativo"===this.modoVisualizacion?"cuantitativo":"cualitativo"}isCriterioSelected(t){return this.criteriosSeleccionados.some(n=>n.id_criterio===t.id_criterio)}buscarPorCriterio(){if(0===this.criteriosSeleccionados.length)this.listar();else{const t=this.criteriosSeleccionados.map(n=>n.id_criterio);this.indicadorservice.indicadoresPorCriterios(t).subscribe(n=>{this.indicadors=n},n=>{console.error("Error al buscar los indicadores por criterio:",n)})}}alternarTabla(t){this.tablaExpandida=t}generarInformeTotal(){const t=[],n=(new Date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});t.push({text:`Fecha de generaci\xf3n: ${n}`,alignment:"right"}),t.push({text:"Reporte por Criterio",style:"titulo"}),t.push({text:"\n"});const r={fillColor:"#72B6FF",bold:!0,color:"#FFFFFF"};Array.from(new Set(this.indicadors.map(p=>p.subcriterio.criterio.nombre))).forEach(p=>{const _=this.indicadors.filter(m=>m.subcriterio.criterio.nombre===p),v=[];v.push([{text:"SUBCRITERIO",style:r},{text:"INDICADOR",style:r},{text:"DESCRIPCI\xd3N",style:r},{text:"VALOR OBTENIDO",style:r},{text:"PORCENTAJE OBTENIDO",style:r},{text:"PORCENTAJE UTILIDAD",style:r}]),_.forEach((m,C)=>{const g=C%2==0?{fillColor:"#F2F2F2"}:{};v.push([{text:m.subcriterio.nombre,style:g},{text:m.nombre,style:g},{text:m.descripcion,style:g},{text:m.valor_obtenido,style:g},{text:m.porc_obtenido,style:g},{text:m.porc_utilida_obtenida,style:g}])}),t.push({text:" - Criterio: "+p,style:"subtitulo"}),t.push({table:{headerRows:1,body:v},style:"tabla"})}),ue.createPdf({content:t,styles:{titulo:{fontSize:18,bold:!0,alignment:"center"},subtitulo:{fontSize:14,bold:!0,margin:[0,10,0,5]},tabla:{margin:[0,10,0,10]}},pageOrientation:"landscape"}).download("informe.pdf")}generarInforme(){const t=[],n=(new Date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});t.push({text:`Fecha de generaci\xf3n: ${n}`,alignment:"right"}),t.push({text:"Reporte por Criterio",style:"titulo"}),t.push({text:"\n"});const r={fillColor:"#72B6FF",bold:!0,color:"#FFFFFF"};Array.from(new Set("cualitativo"===this.modoVisualizacion?this.criteriosCuali.map(p=>p.subcriterio.criterio.nombre):this.criteriosCuanti.map(p=>p.subcriterio.criterio.nombre))).forEach(p=>{const _="cualitativo"===this.modoVisualizacion?this.criteriosCuali.filter(m=>m.subcriterio.criterio.nombre===p):this.criteriosCuanti.filter(m=>m.subcriterio.criterio.nombre===p),v=[];v.push([{text:"SUBCRITERIO",style:r},{text:"INDICADOR",style:r},{text:"DESCRIPCI\xd3N",style:r},{text:"VALOR OBTENIDO",style:r},{text:"PORCENTAJE OBTENIDO",style:r},{text:"PORCENTAJE UTILIDAD",style:r}]),_.forEach((m,C)=>{const g=C%2==0?{fillColor:"#F2F2F2"}:{};v.push([{text:m.subcriterio.nombre,style:g},{text:m.nombre,style:g},{text:m.descripcion,style:g},{text:m.valor_obtenido,style:g},{text:m.porc_obtenido,style:g},{text:m.porc_utilida_obtenida,style:g}])}),t.push({text:" - Criterio: "+p,style:"subtitulo"}),t.push({table:{headerRows:1,body:v},style:"tabla"})});const h={content:t,styles:{titulo:{fontSize:18,bold:!0,alignment:"center"},subtitulo:{fontSize:14,bold:!0,margin:[0,10,0,5]},tabla:{margin:[0,10,0,10]}},pageOrientation:"landscape"};console.log("Contenido del informe cualitativo:",t),ue.createPdf(h).download("ReportesIndicadores.pdf")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se.Q),e.Y36(B.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-criterio-reporte"]],viewQuery:function(t,n){if(1&t&&(e.Gf(U.NW,5),e.Gf(Pr,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.datosModalRef=a.first)}},decls:78,vars:6,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[2,"text-transform","uppercase"],[1,"card"],[1,"card-body"],[1,"d-flex"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",2,"margin-left","2%",3,"click"],["type","button",1,"btn","btn-primary","ml-auto",3,"click"],[1,"fa","fa-file-pdf"],[1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],[1,"tabla-container"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["cuantitativo",""],[1,"dropdown-item",3,"click"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"checked"],[1,"form-check-label"]],template:function(t,n){if(1&t&&(e.TgZ(0,"html",0)(1,"head"),e._UZ(2,"meta",1)(3,"meta",2),e.TgZ(4,"title"),e._uU(5,"Reporte por Criterio"),e.qZA()(),e.TgZ(6,"body")(7,"div",3)(8,"blockquote",4)(9,"h1",5)(10,"strong")(11,"a"),e._uU(12,"REPORTE POR CRITERIO "),e.qZA()()()(),e.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",9)(17,"button",10),e._uU(18," Seleccione criterios "),e.qZA(),e.TgZ(19,"div",11),e.YNc(20,zr,5,2,"a",12),e.qZA()(),e.TgZ(21,"button",13),e.NdJ("click",function(){return n.buscarPorCriterio()}),e._uU(22," Buscar criterios seleccionados "),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return n.generarInformeTotal()}),e._UZ(24,"i",15),e._uU(25," Generar pdf "),e.qZA(),e.TgZ(26,"button",16),e.NdJ("click",function(){return n.toggleModoVisualizacion()}),e._uU(27),e.qZA(),e.TgZ(28,"button",17),e.NdJ("click",function(){return n.generarInforme()}),e._UZ(29,"i",15),e._uU(30),e.qZA(),e._UZ(31,"br"),e.qZA(),e._UZ(32,"br"),e.ynx(33),e.TgZ(34,"div",18)(35,"div",19)(36,"table",20)(37,"thead")(38,"tr")(39,"th"),e._uU(40,"CRITERIO"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"SUBCRITERIO"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"INDICADOR"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"DESCRIPCION"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"VALOR OBTENIDO"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"PORCENTAJE OBTENIDO"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"PORCENTAJE UTILIDAD"),e.qZA()()(),e.TgZ(53,"tbody"),e.YNc(54,Yr,15,7,"tr",21),e.qZA()()()(),e.BQk(),e.TgZ(55,"div",18)(56,"div",19)(57,"table",20)(58,"thead")(59,"tr")(60,"th"),e._uU(61,"CRITERIO"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"SUBCRITERIO"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"INDICADOR"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"DESCRIPCION"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"VALOR OBTENIDO"),e.qZA(),e.TgZ(70,"th"),e._uU(71,"PORCENTAJE OBTENIDO"),e.qZA(),e.TgZ(72,"th"),e._uU(73,"PORCENTAJE UTILIDAD"),e.qZA()()(),e.TgZ(74,"tbody"),e.YNc(75,jr,3,4,"ng-container",22),e.YNc(76,Lr,2,4,"ng-template",null,23,e.W1O),e.qZA()()()()()()()()()),2&t){const a=e.MAs(77);e.xp6(20),e.Q6J("ngForOf",n.criterios),e.xp6(7),e.hij(" ",n.mostrarVistaGeneral?"Mostrar Vista General":"cualitativo"===n.modoVisualizacion?"Mostrar Cuantitativos":"Mostrar Cualitativos"," "),e.xp6(3),e.hij(" Generar pdf (","cualitativo"===n.modoVisualizacion?"Cualitativo":"Cuantitativo",") "),e.xp6(24),e.Q6J("ngForOf",n.indicadors),e.xp6(21),e.Q6J("ngIf","cualitativo"===n.modoVisualizacion)("ngIfElse",a)}},dependencies:[S.sg,S.O5,Pe.o],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}.tabla-container[_ngcontent-%COMP%]{max-height:550px;overflow-y:auto}"]}),i})();var Hr=f(430),Fr=f(9398),Gr=f(5560),oe=f(6302),ze=f(8519),Ye=f(4633),Be=f(1572),$r=f(8217);function Vr(i,o){1&i&&(e.TgZ(0,"div",78),e._UZ(1,"mat-spinner",79),e.TgZ(2,"p"),e._uU(3,"Cargando..."),e.qZA()())}function Wr(i,o){if(1&i&&(e.TgZ(0,"mat-list-option",80),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.AsE(" ",t.persona.primer_nombre," ",t.persona.primer_apellido," ")}}function Kr(i,o){1&i&&(e.TgZ(0,"div",78),e._UZ(1,"mat-spinner",79),e.TgZ(2,"p"),e._uU(3,"Cargando..."),e.qZA()())}function Xr(i,o){if(1&i&&(e.TgZ(0,"th",92),e._uU(1,"ID"),e.qZA()),2&i){const t=e.oxw(2);e.Udp("display",t.ocultar?"":"none")}}function es(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Udp("display",n.ocultar?"":"none"),e.xp6(1),e.hij(" ",t.id_evidencia," ")}}function ts(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"NOMBRE"),e.qZA())}function is(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.indicador||null==t.indicador.subcriterio||null==t.indicador.subcriterio.criterio?null:t.indicador.subcriterio.criterio.nombre," ")}}function os(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"SUBCRITERIO"),e.qZA())}function ns(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.indicador||null==t.indicador.subcriterio?null:t.indicador.subcriterio.nombre," ")}}function as(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"INDICADORES"),e.qZA())}function rs(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t.indicador?null:t.indicador.nombre," ")}}function ss(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"DESCRIPCI\xd3N"),e.qZA())}function ls(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descripcion," ")}}function cs(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"ACCIONES"),e.qZA())}function ds(i,o){1&i&&(e.TgZ(0,"div",78),e._UZ(1,"mat-spinner",79),e.TgZ(2,"p"),e._uU(3,"Cargando..."),e.qZA()())}function us(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",99),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.seleccionarTareaDetalle(a))}),e.TgZ(1,"mat-icon"),e._uU(2,"help"),e.qZA()()}}function ps(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",93)(1,"div",21)(2,"button",94),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.verDetalles(r))}),e._UZ(3,"i",95),e.YNc(4,ds,4,0,"div",0),e.qZA(),e.TgZ(5,"button",96),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.seleccionarTarea(r))}),e.TgZ(6,"mat-icon"),e._uU(7," functions"),e.qZA()()(),e.TgZ(8,"div",21)(9,"button",97),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.calificar(r))}),e.TgZ(10,"mat-icon"),e._uU(11,"filter_frames"),e.qZA()(),e.YNc(12,us,3,0,"button",98),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("disabled","pendiente"===t.estado&&n.disableVerDetalles),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(8),e.Q6J("ngIf","pendiente"!==t.estado)}}function hs(i,o){1&i&&e._UZ(0,"tr",100)}function ms(i,o){if(1&i&&e._UZ(0,"tr",101),2&i){const t=o.$implicit,n=e.oxw(2);e.Udp("background-color",n.getColorByEstado(t.estado))}}function fs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",81)(1,"div",82)(2,"div",10)(3,"input",83),e.NdJ("input",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.applyFilter())}),e.qZA()(),e.TgZ(4,"table",63),e.ynx(5,84),e.YNc(6,Xr,2,2,"th",85),e.YNc(7,es,2,3,"td",86),e.BQk(),e.ynx(8,87),e.YNc(9,ts,2,0,"th",65),e.YNc(10,is,2,1,"td",66),e.BQk(),e.ynx(11,88),e.YNc(12,os,2,0,"th",65),e.YNc(13,ns,2,1,"td",66),e.BQk(),e.ynx(14,89),e.YNc(15,as,2,0,"th",65),e.YNc(16,rs,2,1,"td",66),e.BQk(),e.ynx(17,90),e.YNc(18,ss,2,0,"th",65),e.YNc(19,ls,2,1,"td",66),e.BQk(),e.ynx(20,73),e.YNc(21,cs,2,0,"th",65),e.YNc(22,ps,13,3,"td",66),e.BQk(),e.YNc(23,hs,1,0,"tr",74),e.YNc(24,ms,1,2,"tr",91),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.idFilter),e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.columnas),e.xp6(1),e.Q6J("matRowDefColumns",t.columnas)}}function gs(i,o){if(1&i&&(e.TgZ(0,"div",119)(1,"div",120),e._UZ(2,"mat-progress-spinner",121),e.TgZ(3,"h1",122),e._uU(4," Enviando correo... "),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("diameter",150)("strokeWidth",5)("value",t.spinnerValue)("mode","determinate")}}function bs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",102)(1,"div",4)(2,"div",5)(3,"form",103),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.enviar())}),e.TgZ(4,"div",104)(5,"div",105)(6,"input",106),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.toUser=a)}),e.qZA(),e.TgZ(7,"label",107),e._uU(8,"Para:"),e.qZA()(),e.TgZ(9,"div",108)(10,"input",109),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.subject=a)}),e.qZA(),e.TgZ(11,"label",110),e._uU(12,"Asunto:"),e.qZA()()(),e.TgZ(13,"div",111)(14,"div",112)(15,"textarea",113),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.observacion=a)})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.message=a)}),e.qZA(),e.TgZ(16,"label",114),e._uU(17,"Comentario"),e.qZA()()(),e.TgZ(18,"div",115)(19,"button",116),e._UZ(20,"i",117),e._uU(21," Enviar "),e.qZA()()(),e.YNc(22,gs,5,4,"div",118),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("value",t.correoEnviar)("ngModel",t.toUser),e.xp6(4),e.Q6J("ngModel",t.subject),e.xp6(5),e.Q6J("ngModel",t.observacion)("ngModel",t.message),e.xp6(7),e.Q6J("ngIf",t.isSending)}}function _s(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",123),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.guardarap())}),e._UZ(1,"i",124),e._uU(2," Guardar "),e.qZA()}if(2&i){const t=e.oxw();e.uIk("data-bs-dismiss",t.verificar?"modal":null)}}function vs(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"ID"),e.qZA())}function Cs(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.id_detalle_evaluacion," ")}}function xs(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"EVIDENCIA"),e.qZA())}function ys(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.evidencia.id_evidencia," ")}}function Ts(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"OBSERVACI\xd3N"),e.qZA())}function Zs(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.observacion," ")}}function Ss(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"ESTADO"),e.qZA())}const As=function(i,o){return{rechazada:i,aprobada:o}};function ws(i,o){if(1&i&&(e.TgZ(0,"td",125),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.WLB(2,As,!t.estado,t.estado)),e.xp6(1),e.hij(" ",t.estado?"Aprobada":"Rechazada"," ")}}function Ds(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"FECHA"),e.qZA())}function Us(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.fecha,"dd/MM/yyyy")," ")}}function Ns(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"USUARIO EVALUADOR"),e.qZA())}function Rs(i,o){if(1&i&&(e.TgZ(0,"td",93),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.AsE(" ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_nombre," ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_apellido," ")}}function Ms(i,o){1&i&&(e.TgZ(0,"th",92),e._uU(1,"ACCIONES"),e.qZA())}function Es(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",93)(1,"button",126),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.Eliminar(r))}),e._UZ(2,"i",127),e.qZA()()}}function ks(i,o){1&i&&e._UZ(0,"tr",100)}function Is(i,o){1&i&&e._UZ(0,"tr",101)}function qs(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.noRegistros)}}const E=function(){return{disabledcolor:!0}};let Os=(()=>{class i{constructor(t,n,a,r,s,l,u,h){this.evidenciaService=t,this.router=n,this.dialog=a,this.emailService=r,this.login=s,this.notificationService=l,this.detalleEvaluaService=u,this.criteriosService=h,this.columnas=["id","nombre","subcriterio","indicadores","descripcion","actions"],this.columnasDetalle=["iddetalle","evi","observacion","estado","fecha","usua","actions"],this.aprobado=!1,this.isLoading=!1,this.dataSource=new b.by,this.dataSource4=new b.by,this.mostrarBoton=!1,this.idUsuario=0,this.usuarioResponsable=[],this.idEvidencia=0,this.idFilter=new y.NI,this.filterPostid=0,this.idBuscado="",this.usuarioSeleccionado=new ee.r,this.Evidencia=new oe.v,this.filterPost="",this.isSending=!1,this.spinnerValue=0,this.mostrar=!1,this.enviado=!1,this.maxTime=30,this.sent=!1,this.mostrarModal=!1,this.toUser="",this.subject="",this.message="",this.isLoggedIn=!1,this.user=null,this.rol=null,this.ocultar=!1,this.noti=new W.U,this.idusuario=null,this.nombre=null,this.nombreev=null,this.descripcionSeleccionada=null,this.fechaActual=new Date,this.fechaFormateada=this.fechaActual.toLocaleDateString("es-ES"),this.correoEnviar="",this.estadoEvi="PENDIENTE",this.evid=new oe.v,this.evidDetalle=new oe.v,this.disableVerDetalles=!1,this.disableEvaluar=!1,this.observacion="",this.detalleEvi=new Gr.V,this.listadodetalleEval=[],this.verificar=!1}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listaResponsable(),this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),localStorage.removeItem("eviden"),this.modeloMax()}modeloMax(){this.criteriosService.getModeMaximo().subscribe(t=>{this.id_modelo=t.id_modelo})}applyFilter(){this.dataSource.filter=this.idFilter.value.trim().toLowerCase()}notificarrechazo(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha rechazado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificarrechazouser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha rechazado tu evidencia "+this.descripcionSeleccionada,this.noti.visto=!1,this.noti.url="/res/evidenasignada",this.noti.idactividad=0;const t=localStorage.getItem("idUsuario"),n=Number(t);this.noti.usuario=n,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificarrechazoadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");console.log("Nombres usuario "+t),this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha rechazado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/apruebaAdmin",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificaraprob(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha aprobado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificaraprobuser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha aprobado tu evidencia "+this.descripcionSeleccionada,this.noti.visto=!1;const t=localStorage.getItem("idUsuario"),n=Number(t);this.noti.usuario=n,this.noti.url="/res/evidenasignada",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaraprobadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");console.log("Nombres usuario "+t),this.noti.mensaje=this.user?.persona?.primer_nombre+" "+this.user?.persona?.primer_apellido+" ha aprobado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/apruebaAdmin",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}onSelectionChange(t){this.isLoading=!0,this.usuarioSeleccionado=t.options[0].value,localStorage.setItem("idUsuario",this.usuarioSeleccionado.id.toString()),localStorage.setItem("nombres",this.usuarioSeleccionado.persona.primer_nombre+" "+this.usuarioSeleccionado.persona.primer_apellido),this.evidenciaService.geteviasig(this.usuarioSeleccionado.username).subscribe(n=>{this.evidencias=n,this.dataSource.data=this.evidencias,this.isLoading=!1}),console.log(this.evidencias),this.mostrarBoton=!0,this.correoEnviar=this.usuarioSeleccionado.persona.correo,this.toUser=this.correoEnviar}listaResponsable(){this.isLoading=!0,this.evidenciaService.listarUsuario().subscribe(t=>{const n=t.filter((a,r,s)=>r===s.findIndex(l=>l.id===a.id));this.usuarioResponsable=n,this.isLoading=!1})}verDetalles(t){this.isLoading=!0,this.router.navigate(["/sup/detalle"],{state:{data:t,usuarioEnviar:this.usuarioSeleccionado}}),this.isLoading=!1}irDetalle(){this.isLoading=!0,this.router.navigate(["/sup/detalle"]),this.isLoading=!1}seleccionarTarea(t){this.evid=t}calificar(t){this.idevi=t.id_evidencia,this.evidenciaService.getevical(this.idevi,this.id_modelo).subscribe(n=>{console.log("Datos ev "+JSON.stringify(n));const a=n.tipo,r=n.id_in,s=n.peso;console.log("tipo "+a+" id ind "+r+" peso "+s),this.evaluar(a,r,s)})}evaluar(t,n,a){console.log("tipo "+t+" id ind "+n+" peso "+a),this.dialog.open(Ne.n,{data:{valor:t,id:n,peso:a}}).afterClosed().subscribe(s=>{console.log(s),"success"==s.event&&(console.log(s),x().fire({position:"center",icon:"success",title:"Calificaci\xf3n registrada",showConfirmButton:!0,timer:1500}))})}seleccionarTareaDetalle(t){this.evidDetalle=t,this.detalleEvaluaService.getDetalleEvi(this.evidDetalle.id_evidencia).subscribe(n=>{this.listadodetalleEval=n,console.log(n),this.dataSource4.data=n},n=>{console.log(n)}),this.Listar()}Listar(){this.noRegistros=null,this.detalleEvaluaService.getDetalleEvi(this.evidDetalle.id_evidencia).subscribe(t=>{t.length>0?(this.listadodetalleEval=t,this.dataSource4.data=t):this.noRegistros="No hay registros disponibles."},t=>{console.log(t)})}getColorByEstado(t){return"pendiente"===t?"rgba(255, 242, 170)":"Aprobada"===t?"rgba(96, 179, 114)":"Rechazada"===t?"rgba(253, 79, 56)":""}Aprobado(t){this.descripcionSeleccionada=t.descripcion,this.aprobado=!0,x().fire({icon:"success",title:"La tarea ha sido aprobada",showConfirmButton:!1,timer:1500}),this.mostrar=!1,this.verificar=!0,this.estadoEvi="Aprobada",this.observacion="Ninguna",this.notificaraprob(),this.notificaraprobadmin(),this.notificaraprobuser()}Rechazado(t){this.aprobado=!1,this.descripcionSeleccionada=t.descripcion,x().fire({icon:"error",title:"La tarea ha sido rechazada."}),this.estadoEvi="Rechazada",this.mostrar=!this.mostrar,this.verificar=!1,this.observacion=""}guardarap(){"Rechazada"==this.estadoEvi?(this.ModificarTarea(),this.verificar=!1):"Aprobada"==this.estadoEvi?this.ModificarTarea():x().fire("La actividad fue rechazada","Debe enviar el correo con la observaci\xf3n","warning")}ModificarTarea(){this.detalleEvi.evidencia.id_evidencia=this.evid.id_evidencia,this.detalleEvi.usuario.id=this.user.id,this.detalleEvi.id_modelo=this.id_modelo,this.detalleEvi.observacion=this.observacion,this.aprobado?(this.evid.estado=this.estadoEvi,"Aprobada"==this.evid.estado?this.detalleEvi.estado=!0:"Rechazada"==this.evid.estado&&(this.detalleEvi.estado=!1),this.detalleEvaluaService.create(this.detalleEvi).subscribe(t=>x().fire("Guardado con \xe9xito!","Observaciones guardadas con \xe9xito","success")),this.evidenciaService.actualizar(this.evid.id_evidencia,this.evid).subscribe(t=>{x().fire({title:"\xa1Registro  exitoso!",icon:"success",showConfirmButton:!1,timer:1500})},t=>{x().fire({title:"\xa1Error al guardar!",text:"Hubo un error al guardar la tarea.",icon:"error",confirmButtonText:"OK"}),console.log(t)})):null!=this.detalleEvi.estado&&null!=this.detalleEvi.observacion&&""!=this.detalleEvi.observacion?(this.evid.estado=this.estadoEvi,"Aprobada"==this.evid.estado?this.detalleEvi.estado=!0:"Rechazada"==this.evid.estado&&(this.detalleEvi.estado=!1),this.detalleEvaluaService.create(this.detalleEvi).subscribe(t=>x().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success")),this.evidenciaService.actualizar(this.evid.id_evidencia,this.evid).subscribe(t=>{x().fire({title:"\xa1Registro  exitoso!",icon:"success",showConfirmButton:!1,timer:1500})},t=>{x().fire({title:"\xa1Error al guardar!",text:"Hubo un error al guardar la tarea.",icon:"error",confirmButtonText:"OK"}),console.log(t)})):x().fire("No agreg\xf3 ninguna observaci\xf3n","Por favor agregue alguna","warning"),this.LimpiarModal(),this.mostrarModal=!0}Eliminar(t){const n=t.id_detalle_evaluacion;x().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.detalleEvaluaService.eliminar(n).subscribe(r=>{this.Listar()}),x().fire("Eliminado!","Registro eliminado.","success"))})}enviar(){this.enviado=!0,this.isLoading=!0;const t=new Date;this.isSending=!0,this.spinnerInterval=setInterval(()=>{const a=((new Date).getTime()-t.getTime())/1e3;this.spinnerValue=Math.round(a/this.maxTime*100),a>=this.maxTime&&clearInterval(this.spinnerInterval)},1e3),this.emailService.sendEmail([this.toUser],this.subject,this.message).subscribe(n=>{clearInterval(this.spinnerInterval),this.isSending=!1;const r=((new Date).getTime()-t.getTime())/1e3;this.verificar=!0,console.log("Email sent successfully! Time taken:",r,"seconds"),console.log("Email sent successfully!"),this.notificarrechazo(),this.notificarrechazoadmin(),this.notificarrechazouser(),x().fire({title:"El correo se ha enviado con \xe9xito",timer:2e3,timerProgressBar:!0,width:"20%",customClass:"custom-alert",position:"top-end",iconHtml:'<span class="custom-icon"><i class="fas fa-check-circle" style="color: green;" ></i></span>',showConfirmButton:!1,didOpen:s=>{s.addEventListener("mouseenter",x().stopTimer),s.addEventListener("mouseleave",x().resumeTimer)}}),this.isLoading=!1},n=>{clearInterval(this.spinnerInterval),this.isSending=!1,x().fire({title:"No se pudo enviar el correo electr\xf3nico",timer:2e3,width:"20%",customClass:"custom-alert my-custom-swal",timerProgressBar:!0,position:"top-end",iconHtml:'<span class="custom-icon" ><i class="fas fa-times-circle" style="color: red;" ></i></span>',showConfirmButton:!1,didOpen:a=>{a.addEventListener("mouseenter",x().stopTimer),a.addEventListener("mouseleave",x().resumeTimer)}}),this.isLoading=!1,console.error("Error sending email:",n)})}Limpiar(){this.message="",this.subject="",this.detalleEvi.observacion=""}LimpiarModal(){this.mostrar=!1,this.verificar=!1,this.estadoEvi="",this.subject="",this.detalleEvi.observacion="",this.message=""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ee.u),e.Y36(k.F0),e.Y36(Me.uw),e.Y36(de.u),e.Y36(K.r),e.Y36(X.U),e.Y36(ze.u),e.Y36(B.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-aprobacionact"]],viewQuery:function(t,n){if(1&t&&e.Gf(U.NW,5),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first)}},decls:144,vars:35,consts:[["class","loading-overlay",4,"ngIf"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"container","text-center"],[1,"row",2,"margin-top","2%","margin-bottom","10%"],[1,"card"],[1,"card-body"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic","font-size","smaller"],[1,"blockquote","text-dark"],[1,"info-message"],[1,"info-text",2,"opacity","0.5"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"selection-list-container",3,"multiple","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"card",2,"height","95%"],[1,"d-flex","flex-row","align-items-center"],[1,"row","align-items-center"],["class","col text-center","style","max-height: 300px; overflow-y: scroll",4,"ngIf"],[1,"container"],[1,"row","justify-content-end"],[1,"col"],[2,"display","flex","align-items","center"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(253, 79, 56)"],[1,"label",2,"font-size","12px","opacity","0.7"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(96, 179, 114)"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(255, 242, 170)"],["id","exampleModal2","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"card-body",2,"height","95%"],[1,"card-title"],[1,"fas","fa-file-alt",2,"margin-right","10px"],[2,"display","flex","justify-content","space-between"],[2,"width","30%","margin-right","10px"],["appearance","outline",1,"full-width"],[3,"ngClass"],["disabled","","name","fecha","matInput","",3,"ngClass","value"],["disabled","","name","usuario","matInput","",3,"ngClass","value"],["disabled","","name","estado","matInput","","required","",3,"ngClass","value"],[2,"width","auto","margin-right","10px"],["disabled","","name","estado","matInput","",3,"ngClass","value"],[1,"row"],[1,"col-sm-6","col-lg-3",2,"padding","10px 20px"],[1,"fas","fa-pencil-alt",2,"margin-right","5px"],["type","button","title","Haz clic para borrar",1,"btn","btn-warning","btn-block",3,"click"],[1,"fas","fa-eraser"],["type","button","title","Haz clic aqu\xed para aprobar",1,"btn","btn-success","btn-block",3,"click"],[1,"fas","fa-thumbs-up"],["type","button","title","Haz clic aqu\xed para rechazar",1,"btn","btn-danger","btn-block",3,"click"],[1,"fas","fa-thumbs-down"],["class","col-sm-8 col-lg-6","style","width: 75%",4,"ngIf"],[1,"modal-footer",2,"background-color","rgb(0, 122, 255)"],["type","button","class","btn btn-success","style","background-color: rgb(10, 8, 94)",3,"click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%",3,"click"],[1,"fas","fa-times"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","exampleModalLabel",1,"modal-title",2,"font-family","Arial, sans-serif","color","white"],[1,"mat-elevation-z8",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","iddetalle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","evi"],["matColumnDef","observacion"],["matColumnDef","estado"],["mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","fecha"],["matColumnDef","usua"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%"],[1,"loading-overlay"],["diameter","40"],[3,"value"],[1,"col","text-center",2,"max-height","300px","overflow-y","scroll"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","10%"],["type","text","name","filterPost3","placeholder","Buscar por ID de tarea asignada",1,"form-control",3,"formControl","input"],["matColumnDef","id"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","subcriterio"],["matColumnDef","indicadores"],["matColumnDef","descripcion"],["mat-row","",3,"background-color",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["type","button","title","Ver las actividades",1,"btn","btn-primary","custom-button",2,"background-color","rgb(58, 156, 156)","margin-right","5%",3,"disabled","click"],[1,"fas","fa-list"],["type","button","mat-icon-button","","type","button","title","Aprobar o Rechazar","data-bs-toggle","modal","data-bs-target","#exampleModal2",1,"btn","btn-primary","custom-buttonEvaluar",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"click"],["type","button","mat-icon-button","","type","button","title","Calificar",1,"btn","btn-primary","custom-button",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"click"],["type","button","class","btn btn-primary custom-buttonDetalle","title","Ver observaciones","mat-icon-button","","style","background-color: rgb(150, 215, 219); margin-right: 5%;","data-bs-toggle","modal","data-bs-target","#exampleModal3",3,"click",4,"ngIf"],["type","button","title","Ver observaciones","mat-icon-button","","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary","custom-buttonDetalle",2,"background-color","rgb(150, 215, 219)","margin-right","5%",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-sm-8","col-lg-6",2,"width","75%"],[3,"ngSubmit"],[2,"display","flex","justify-content","flex-start","gap","10rem"],[1,"form-floating","mb-3",2,"width","45%"],["type","text","id","toUser","name","toUser","required","","placeholder","............","required","",1,"form-control",3,"value","ngModel","ngModelChange"],["for","toUser"],[1,"form-floating","mb-3"],["type","text","id","subject","name","subject","required","","placeholder","............","required","",1,"form-control",2,"margin-right","5%",3,"ngModel","ngModelChange"],["for","subject"],[2,"margin-bottom","10%","height","25px"],[1,"form-floating"],["placeholder","Leave a comment here","id","floatingTextarea2","placeholder","Ingrese alguna observaci\xf3n...........","required","","id","message","name","message","required","","rows","12",1,"form-control","card-textarea",2,"max-height","75px","overflow-y","auto",3,"ngModel","ngModelChange"],["for","message"],[1,"button-group",2,"display","flex","justify-content","center"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-envelope"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[1,"overlay"],[1,"spinner",3,"diameter","strokeWidth","value","mode"],[1,"text",2,"color","white"],["type","button",1,"btn","btn-success",2,"background-color","rgb(10, 8, 94)",3,"click"],[1,"fas","fa-save"],["mat-cell","",3,"ngClass"],["role","button",1,"btn","btn-danger",2,"background-color","red","margin-right","5%",3,"click"],[1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"body"),e.YNc(1,Vr,4,0,"div",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"figure",6)(8,"blockquote",7)(9,"h1")(10,"strong"),e._uU(11," LISTADO DE RESPONSABLES "),e.qZA()()()(),e.TgZ(12,"div",8)(13,"span",9),e._uU(14,"Seleccione un responsable"),e.qZA()(),e.TgZ(15,"div",10)(16,"input",11),e.NdJ("ngModelChange",function(r){return n.filterPost=r}),e.qZA()(),e.TgZ(17,"mat-selection-list",12),e.NdJ("selectionChange",function(r){return n.onSelectionChange(r)}),e.YNc(18,Wr,2,3,"mat-list-option",13),e.ALo(19,"buscarUsuario"),e.YNc(20,Kr,4,0,"div",0),e.qZA()()(),e.TgZ(21,"div",14)(22,"div",5)(23,"div",15)(24,"figure",6)(25,"blockquote",7)(26,"h1")(27,"strong"),e._uU(28," EVIDENCIAS ASIGNADAS"),e.qZA()()()()(),e.TgZ(29,"div",16),e.YNc(30,fs,25,4,"div",17),e.TgZ(31,"div",18)(32,"div",19)(33,"div",20)(34,"div",21),e._UZ(35,"div",22),e.TgZ(36,"span",23),e._uU(37,"Rechazadas"),e.qZA()()(),e.TgZ(38,"div",20)(39,"div",21),e._UZ(40,"div",24),e.TgZ(41,"span",23),e._uU(42,"Aprobadas"),e.qZA()()(),e.TgZ(43,"div",20)(44,"div",21),e._UZ(45,"div",25),e.TgZ(46,"span",23),e._uU(47,"Pendientes"),e.qZA()()()()()()()(),e.TgZ(48,"div",26),e.NdJ("hidden.bs.modal",function(){return n.LimpiarModal()}),e.TgZ(49,"div",27)(50,"div",28)(51,"div",29)(52,"h1",30),e._uU(53," EVALUAR "),e.qZA(),e.TgZ(54,"button",31),e.NdJ("click",function(){return n.LimpiarModal()}),e.qZA()(),e.TgZ(55,"div",32)(56,"div",4)(57,"div",33)(58,"h2",34),e._UZ(59,"i",35),e._uU(60,"Detalles "),e.qZA(),e._UZ(61,"br")(62,"hr"),e.TgZ(63,"div",36)(64,"div",37)(65,"mat-form-field",38)(66,"mat-label",39),e._uU(67,"Fecha de revisi\xf3n"),e.qZA(),e._UZ(68,"input",40),e.qZA()(),e.TgZ(69,"div",37)(70,"mat-form-field",38)(71,"mat-label",39),e._uU(72,"Usuario Evaluador"),e.qZA(),e._UZ(73,"input",41),e.qZA()(),e.TgZ(74,"div",37)(75,"mat-form-field",38)(76,"mat-label",39),e._uU(77,"Estado de Tarea"),e.qZA(),e._UZ(78,"input",42),e.qZA()()(),e.TgZ(79,"div",43)(80,"mat-form-field",38)(81,"mat-label",39),e._uU(82,"Descripci\xf3n Tarea"),e.qZA(),e._UZ(83,"input",44),e.qZA()()()(),e.TgZ(84,"div",45)(85,"div",46)(86,"div",4)(87,"div",5)(88,"h3",34),e._UZ(89,"i",47),e.TgZ(90,"strong"),e._uU(91,"OBSERVACIONES"),e.qZA()(),e._UZ(92,"br"),e.TgZ(93,"div",18)(94,"div",20)(95,"button",48),e.NdJ("click",function(){return n.Limpiar()}),e._UZ(96,"i",49),e.qZA(),e.TgZ(97,"button",50),e.NdJ("click",function(){return n.Aprobado(n.evid)}),e._UZ(98,"i",51),e.qZA(),e.TgZ(99,"button",52),e.NdJ("click",function(){return n.Rechazado(n.evid)}),e._UZ(100,"i",53),e.qZA()()()()()(),e.YNc(101,bs,23,6,"div",54),e.qZA()(),e.TgZ(102,"div",55),e.YNc(103,_s,3,1,"button",56),e.TgZ(104,"button",57),e.NdJ("click",function(){return n.LimpiarModal()}),e._UZ(105,"i",58),e._uU(106," Cancelar "),e.qZA()()()()(),e.TgZ(107,"div",59)(108,"div",60)(109,"div",28)(110,"div",29)(111,"h1",61),e._uU(112," OBSERVACIONES "),e.qZA()(),e.TgZ(113,"div",32)(114,"div",62)(115,"table",63),e.ynx(116,64),e.YNc(117,vs,2,0,"th",65),e.YNc(118,Cs,2,1,"td",66),e.BQk(),e.ynx(119,67),e.YNc(120,xs,2,0,"th",65),e.YNc(121,ys,2,1,"td",66),e.BQk(),e.ynx(122,68),e.YNc(123,Ts,2,0,"th",65),e.YNc(124,Zs,2,1,"td",66),e.BQk(),e.ynx(125,69),e.YNc(126,Ss,2,0,"th",65),e.YNc(127,ws,2,5,"td",70),e.BQk(),e.ynx(128,71),e.YNc(129,Ds,2,0,"th",65),e.YNc(130,Us,3,4,"td",66),e.BQk(),e.ynx(131,72),e.YNc(132,Ns,2,0,"th",65),e.YNc(133,Rs,2,2,"td",66),e.BQk(),e.ynx(134,73),e.YNc(135,Ms,2,0,"th",65),e.YNc(136,Es,3,0,"td",66),e.BQk(),e.YNc(137,ks,1,0,"tr",74),e.YNc(138,Is,1,0,"tr",75),e.qZA(),e.YNc(139,qs,3,1,"ng-container",76),e.qZA()(),e.TgZ(140,"div",55)(141,"button",77),e._UZ(142,"i",58),e._uU(143," Cerrar "),e.qZA()()()()()()()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(15),e.Q6J("ngModel",n.filterPost),e.xp6(1),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngForOf",e.xi3(19,24,n.usuarioResponsable,n.filterPost)),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(10),e.Q6J("ngIf",n.mostrarBoton),e.xp6(36),e.Q6J("ngClass",e.DdM(27,E)),e.xp6(2),e.Q6J("ngClass",e.DdM(28,E))("value",n.fechaFormateada),e.xp6(3),e.Q6J("ngClass",e.DdM(29,E)),e.xp6(2),e.Q6J("ngClass",e.DdM(30,E))("value",n.user.username),e.xp6(3),e.Q6J("ngClass",e.DdM(31,E)),e.xp6(2),e.Q6J("ngClass",e.DdM(32,E))("value",n.estadoEvi),e.xp6(3),e.Q6J("ngClass",e.DdM(33,E)),e.xp6(2),e.Q6J("ngClass",e.DdM(34,E))("value",n.evid.descripcion),e.xp6(18),e.Q6J("ngIf",n.mostrar),e.xp6(2),e.Q6J("ngIf",n.verificar),e.xp6(12),e.Q6J("dataSource",n.dataSource4),e.xp6(22),e.Q6J("matHeaderRowDef",n.columnasDetalle),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasDetalle),e.xp6(1),e.Q6J("ngIf",n.noRegistros))},dependencies:[S.mk,S.sg,S.O5,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,q.RK,O.KE,O.hX,le.Nt,y._Y,y.Fj,y.JJ,y.JL,y.Q7,y.On,y.F,y.oH,L.Hw,Ye.Ub,Ye.vS,Be.Ou,S.uU,$r.Z],styles:[".disabledcolor[_ngcontent-%COMP%]{color:#0c0c0c}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;color:#fff}"]}),i})();var Ps=f(7160),H=f(7084);function zs(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ID"),e.qZA())}function Ys(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.id_actividad," ")}}function Bs(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"NOMBRE"),e.qZA())}function js(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function Qs(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"DESCRIPCI\xd3N"),e.qZA())}function Ls(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descripcion," ")}}function Js(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"FECHA DE INICIO"),e.qZA())}function Hs(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.fecha_inicio," ")}}function Fs(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"FECHA FINAL"),e.qZA())}function Gs(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.fecha_fin," ")}}function $s(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ACCIONES"),e.qZA())}function Vs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.seleccionarTareaDetalle(a))}),e.TgZ(1,"mat-icon"),e._uU(2,"help"),e.qZA()()}}function Ws(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",79)(1,"button",80),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.listarArchivo(r))}),e.TgZ(2,"mat-icon"),e._uU(3,"visibility"),e.qZA()(),e.TgZ(4,"button",81),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.seleccionarArchivo(r))}),e.TgZ(5,"mat-icon"),e._uU(6," functions"),e.qZA()(),e.YNc(7,Vs,3,0,"button",82),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(7),e.Q6J("ngIf","pendiente"!==t.estado)}}function Ks(i,o){1&i&&e._UZ(0,"tr",84)}function Xs(i,o){if(1&i&&e._UZ(0,"tr",85),2&i){const t=o.$implicit,n=e.oxw();e.Udp("background-color",n.getColorByEstado(t.estado))}}function el(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"NOMBRE"),e.qZA())}function tl(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.nombre," ")}}function il(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"DESCRIPCI\xd3N"),e.qZA())}function ol(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.descripcion," ")}}function nl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ENLACE"),e.qZA())}function al(i,o){if(1&i&&(e.TgZ(0,"td",79)(1,"a",86),e._uU(2),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("href",t.enlace,e.LSH)("download",n.obtenerNombreArchivo(t.enlace)),e.xp6(1),e.hij(" ",t.nombre," ")}}function rl(i,o){1&i&&e._UZ(0,"tr",84)}function sl(i,o){1&i&&e._UZ(0,"tr",85)}function ll(i,o){if(1&i&&(e.TgZ(0,"div",104)(1,"div",105),e._UZ(2,"mat-progress-spinner",106),e.TgZ(3,"h1",107),e._uU(4," Enviando correo... "),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("diameter",150)("strokeWidth",5)("value",t.spinnerValue)("mode","determinate")}}function cl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",87)(1,"div",7)(2,"div",8)(3,"form",88),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.enviar())}),e.TgZ(4,"div",89)(5,"div",90)(6,"input",91),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.toUser=a)}),e.qZA(),e.TgZ(7,"label",92),e._uU(8,"Para:"),e.qZA()(),e.TgZ(9,"div",93)(10,"input",94),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.subject=a)}),e.qZA(),e.TgZ(11,"label",95),e._uU(12,"Asunto:"),e.qZA()()(),e.TgZ(13,"div",96)(14,"div",97)(15,"textarea",98),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.message=a)})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.observacion=a)})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.observaciones.observacion=a)}),e.qZA(),e.TgZ(16,"label",99),e._uU(17,"Comentario"),e.qZA()()(),e.TgZ(18,"div",100)(19,"button",101),e._UZ(20,"i",102),e._uU(21," Enviar "),e.qZA()()(),e.YNc(22,ll,5,4,"div",103),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("value",t.correoEnviar)("ngModel",t.toUser),e.xp6(4),e.Q6J("ngModel",t.subject),e.xp6(5),e.Q6J("ngModel",t.message)("ngModel",t.observacion)("ngModel",t.observaciones.observacion),e.xp6(7),e.Q6J("ngIf",t.isSending)}}function dl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",108),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.guardarev())}),e._UZ(1,"i",109),e._uU(2," Guardar "),e.qZA()}if(2&i){const t=e.oxw();e.uIk("data-bs-dismiss",t.verificar?"modal":null)}}function ul(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ID"),e.qZA())}function pl(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.id_observacion," ")}}function hl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"OBSERVACI\xd3N"),e.qZA())}function ml(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.observacion," ")}}function fl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ACTIVIDAD"),e.qZA())}function gl(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.actividad.nombre," ")}}function bl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ESTADO"),e.qZA())}const _l=function(i){return{"background-color":i}};function vl(i,o){if(1&i&&(e.TgZ(0,"td",110),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngStyle",e.VKq(2,_l,"Aprobada"===t.actividad.estado?"green":"red")),e.xp6(1),e.hij(" ",t.actividad.estado," ")}}function Cl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"USUARIO EVALUADOR"),e.qZA())}function xl(i,o){if(1&i&&(e.TgZ(0,"td",79),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.AsE(" ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_nombre," ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_apellido," ")}}function yl(i,o){1&i&&(e.TgZ(0,"th",78),e._uU(1,"ACCIONES"),e.qZA())}function Tl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",79)(1,"button",111),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.Eliminar(r))}),e._UZ(2,"i",112),e.qZA()()}}function Zl(i,o){1&i&&e._UZ(0,"tr",84)}function Sl(i,o){1&i&&e._UZ(0,"tr",85)}function Al(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.noRegistros)}}const Dl=[{path:"dashboard",component:Dn,pathMatch:"full",canActivate:[I.$]},{path:"usuarios",component:Ua,pathMatch:"full",canActivate:[I.$]},{path:"email",component:Fa,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN"]}},{path:"subcriterioSuper",component:dr,pathMatch:"full",canActivate:[I.$]},{path:"indicadoreSuper",component:Rr,pathMatch:"full",canActivate:[I.$]},{path:"evidenciaSuper",component:Mr,pathMatch:"full",canActivate:[I.$]},{path:"actividad-rechazada",component:qr,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN","ADMIN"]}},{path:"criterio_reporte",component:Jr,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN","ADMIN","AUTORIDAD"]}},{path:"actividad_responsable",component:Hr.M,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN","ADMIN"]}},{path:"responsables",component:Fr.o,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN"]}},{path:"aprobaciones",component:Os,pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN"]}},{path:"detalle",component:(()=>{class i{constructor(t,n,a,r,s,l,u,h){this.services=t,this.router=n,this.detalleEvaluaService=a,this.emailService=r,this.archivo=s,this.login=l,this.notificationService=u,this.criteriosService=h,this.columnas=["idactividad","nombre","descripcion","fechainicio","fechafin","actions"],this.columnasArchi=["nombreArchi","descripcionArchi","enlace"],this.columnasObservaciones=["id","observacion","actividad","estado","usuario","acciones"],this.isLoadingPage=!0,this.verificar=!1,this.archivoSeleccionado="",this.panelOpenState=!1,this.isSending=!1,this.spinnerValue=0,this.maxTime=30,this.mostrarbotonDetalle=!1,this.evidencia=new oe.v,this.dataSource=new b.by,this.dataSource2=new b.by,this.dataSource3=new b.by,this.usuarioCorreo=new ee.r,this.issloading=!0,this.isLinear=!0,this.toUser="",this.subject="",this.message="",this.mostrar=!1,this.fechaActual=new Date,this.fechaFormateada=this.fechaActual.toLocaleDateString("es-ES"),this.estadoEvi="",this.listadoActividad=[],this.archivoSe=[],this.nombreActividad="",this.isLoggedIn=!1,this.user=null,this.noti=new W.U,this.idusuario=null,this.nombre=null,this.correoEnviar="",this.disableEvaluar=!1,this.observaciones=new Ps.K,this.observacion="",this.actividadSeleccionada=new j.D,this.actividad=new j.D,this.listadoObservaciones=[],this.aprobado=!1}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(n=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()});const t=localStorage.getItem("eviden");this.id_ev=Number(t),console.log("traido ev "+t),this.modeloMax()}modeloMax(){this.criteriosService.getModeMaximo().subscribe(t=>{this.id_modelo=t.id_modelo,this.inicio()})}inicio(){if(0!=this.id_ev)console.log("evid "+this.id_ev),this.criteriosService.getCorreo(this.id_modelo,this.id_ev).subscribe(t=>{this.correoEnviar=t.correo,this.toUser=this.correoEnviar,this.listar()});else{const t=history.state.data,n=history.state.usuarioEnviar;this.evidencia=t,this.id_ev=this.evidencia.id_evidencia,this.usuarioCorreo=n,this.correoEnviar=this.usuarioCorreo.persona.correo,this.toUser=this.correoEnviar,null==this.evidencia&&(this.router.navigate(["sup/dashboard"]),location.replace("/sup/dashboard")),null==this.usuarioCorreo&&(this.router.navigate(["sup/dashboard"]),location.replace("/sup/dashboard")),this.listar()}}seleccionarArchivo(t){this.archivoSeleccionado=t.nombre,this.actividadSeleccionada=t,console.log(this.actividadSeleccionada)}notificarrechazo(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificarrechazouser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado tu actividad "+this.archivoSeleccionado,this.noti.visto=!1,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev;const t=localStorage.getItem("idUsuario"),n=Number(t);this.noti.usuario=n,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificarrechazoadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificaraprobacion(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificaraprobacionuser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" aprobo tu actividad "+this.archivoSeleccionado,this.noti.visto=!1;const t=localStorage.getItem("idUsuario"),n=Number(t);this.noti.usuario=n,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaraprobacionadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificar(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}notificaruser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" agrego una observaci\xf3n a tu evidencia "+this.archivoSeleccionado,this.noti.visto=!1;const t=localStorage.getItem("idUsuario"),n=Number(t);this.noti.usuario=n,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaradmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha agregado una observacion para "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.notificationService.crear(this.noti).subscribe(n=>{this.noti=n,console.log("Notificacion guardada")},n=>{console.error("No se pudo guardar la notificaci\xf3n",n)})}listar(){this.services.getEviAsig(this.id_ev).subscribe(t=>{this.listadoActividad=t,console.log(this.listadoActividad),this.dataSource.data=this.listadoActividad,0<this.dataSource.data.length?console.log("idActividad:",this.dataSource.data[0].id_actividad):console.log("\xcdndice fuera de rango")})}seleccionarTareaDetalle(t){const n=t.id_actividad;this.noRegistros=null,this.services.getObservacionByActi(n).subscribe(a=>{this.listadoObservaciones=a,a.length>0?(this.dataSource3.data=this.listadoObservaciones,this.disableEvaluar=!0):this.noRegistros="No hay registros disponibles."}),this.listar()}listarArchivo(t){this.archivo.getarchivoActividad(t.id_actividad).subscribe(n=>{this.archivoSe=n,this.dataSource2.data=this.archivoSe}),this.nombreActividad=t.nombre}goBack(){this.router.navigate(["/sup/aprobaciones"])}Aprobado(){x().fire({icon:"success",title:"La actividad ha sido aprobada",showConfirmButton:!1,timer:1500}),this.aprobado=!0,this.verificar=!0,this.mostrar=!1,this.estadoEvi="Aprobada",this.observacion="Ninguna",this.notificaraprobacion(),this.notificaraprobacionadmin(),this.notificaraprobacionuser(),this.disableEvaluar=!0,this.observaciones.observacion=this.observacion="Ninguna"}Rechazado(){this.aprobado=!1,x().fire({icon:"error",title:"La actividad ha sido rechazada."}),this.estadoEvi="Rechazada",this.mostrar=!this.mostrar,this.disableEvaluar=!0}obtenerNombreArchivo(t){return t.substring(t.lastIndexOf("/")+1)}guardarev(){"Rechazada"==this.estadoEvi?(this.Guardar(),this.verificar=!1):"Aprobada"==this.estadoEvi?this.Guardar():x().fire("La actividad fue rechazada","Debe enviar el correo con la observaci\xf3n","warning")}Guardar(){this.aprobado?(this.actividadSeleccionada.estado=this.estadoEvi,this.actividadSeleccionada.usuario=null,console.log(this.actividadSeleccionada),this.actividadSeleccionada?this.services.update(this.actividadSeleccionada.id_actividad,this.actividadSeleccionada).subscribe(t=>{this.listar()}):console.log("id_actividad es undefined"),this.observaciones.observacion=this.observacion,this.observaciones.actividad.id_actividad=this.actividadSeleccionada.id_actividad,this.observaciones.usuario=this.user.id,this.services.createObservacion(this.observaciones).subscribe(t=>x().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success"))):""==this.observaciones.observacion||null==this.observaciones.observacion||""==this.actividadSeleccionada.estado||null==this.actividadSeleccionada.estado?x().fire({title:"Alerta",text:"No se ha agregado ninguna observaci\xf3n por favor agregue alguna ",icon:"warning"}):(this.actividadSeleccionada.estado=this.estadoEvi,this.actividadSeleccionada.usuario=null,console.log(this.actividadSeleccionada),this.actividadSeleccionada?this.services.update(this.actividadSeleccionada.id_actividad,this.actividadSeleccionada).subscribe(t=>{this.listar()}):console.log("id_actividad es undefined"),this.observaciones.observacion=this.observacion,this.observaciones.actividad.id_actividad=this.actividadSeleccionada.id_actividad,this.observaciones.usuario=this.user.id,this.services.createObservacion(this.observaciones).subscribe(t=>x().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success"))),this.LimpiarModal()}getColorByEstado(t){return"pendiente"===t?"rgba(255, 242, 170)":"Aprobada"===t?"rgba(96, 179, 114)":"Rechazada"===t?"rgba(253, 79, 56)":""}Eliminar(t){const n=t.id_observacion;x().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.services.eliminarObser(n).subscribe(r=>{}),this.listar(),x().fire("Eliminado!","Registro eliminado.","success"))})}enviar(){const t=new Date;this.isSending=!0,this.spinnerInterval=setInterval(()=>{const a=((new Date).getTime()-t.getTime())/1e3;this.spinnerValue=Math.round(a/this.maxTime*100),a>=this.maxTime&&clearInterval(this.spinnerInterval)},1e3),this.emailService.sendEmail([this.toUser],this.subject,this.message).subscribe(n=>{clearInterval(this.spinnerInterval),this.isSending=!1;const r=((new Date).getTime()-t.getTime())/1e3;this.verificar=!0,console.log("Email sent successfully! Time taken:",r,"seconds"),this.notificarrechazo(),this.notificarrechazoadmin(),this.notificarrechazouser(),console.log("Email sent successfully!"),x().fire({title:"El correo se ha enviado con \xe9xito",timer:2e3,timerProgressBar:!0,width:"20%",customClass:"custom-alert",position:"top-end",iconHtml:'<span class="custom-icon"><i class="fas fa-check-circle" style="color: green;" ></i></span>',showConfirmButton:!1,didOpen:s=>{s.addEventListener("mouseenter",x().stopTimer),s.addEventListener("mouseleave",x().resumeTimer)}})},n=>{clearInterval(this.spinnerInterval),this.isSending=!1,x().fire({title:"No se pudo enviar el correo electr\xf3nico",timer:2e3,width:"20%",customClass:"custom-alert my-custom-swal",timerProgressBar:!0,position:"top-end",iconHtml:'<span class="custom-icon" ><i class="fas fa-times-circle" style="color: red;" ></i></span>',showConfirmButton:!1,didOpen:a=>{a.addEventListener("mouseenter",x().stopTimer),a.addEventListener("mouseleave",x().resumeTimer)}}),console.error("Error sending email:",n)})}Limpiar(){this.message="",this.subject="",this.observaciones.observacion=""}LimpiarModal(){this.verificar=!1,this.mostrar=!1,this.estadoEvi="",this.subject="",this.observaciones.observacion="",this.message=""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Re._),e.Y36(k.F0),e.Y36(ze.u),e.Y36(de.u),e.Y36(ce.g),e.Y36(K.r),e.Y36(X.U),e.Y36(B.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detalleaprob"]],viewQuery:function(t,n){if(1&t&&e.Gf(U.NW,5),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first)}},decls:163,vars:19,consts:[[2,"font-size","16px"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"container","text-center"],["mat-button","",1,"boton",2,"margin-left","-95%",3,"click"],[2,"font-size","24px"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic"],[1,"blockquote","text-dark"],[1,"card"],[1,"card-body"],[1,"container",2,"margin-top","5%","margin-bottom","5%"],[3,"expanded","opened","closed"],[2,"margin-top","1%"],[2,"text-align","justify"],[1,"table-responsive","mat-elevation-z8",2,"margin-bottom","10%"],["mat-table","",3,"dataSource"],["matColumnDef","idactividad"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","fechainicio"],["matColumnDef","fechafin"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"background-color",4,"matRowDef","matRowDefColumns"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],["id","exampleModalLabel",1,"modal-title",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table-responsive","mat-elevation-z8","modal-table",2,"margin-bottom","10%"],["matColumnDef","nombreArchi"],["matColumnDef","descripcionArchi"],["matColumnDef","enlace"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"modal-footer",2,"background-color","rgb(0, 122, 255)"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"fas","fa-times"],["id","exampleModal2","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],[1,"modal-dialog","modal-xl"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"card-body",2,"height","95%"],[1,"card-title"],[1,"fas","fa-file-alt",2,"margin-right","10px"],[2,"display","flex","justify-content","space-between"],[2,"width","30%","margin-right","10px"],["appearance","outline",1,"full-width"],["disabled","","name","fecha","matInput","",3,"value"],["disabled","","name","usuario","matInput","",3,"value"],["disabled","","name","estado","matInput","","required","",3,"value"],[1,"row"],[1,"col-sm-6","col-lg-3",2,"padding","10px 20px"],[1,"fas","fa-pencil-alt",2,"margin-right","5px"],[1,"container"],[1,"col"],["type","button","title","Haz clic para borrar",1,"btn","btn-warning","btn-block",3,"click"],[1,"fas","fa-eraser"],["type","button","title","Haz clic aqu\xed para aprobar",1,"btn","btn-success","btn-block",3,"click"],[1,"fas","fa-thumbs-up"],["type","button","title","Haz clic aqu\xed para rechazar",1,"btn","btn-danger","btn-block",3,"click"],[1,"fas","fa-thumbs-down"],["class","col-sm-8 col-lg-6","style","width: 75%",4,"ngIf"],["type","button","class","btn btn-success","style","background-color: rgb(10, 8, 94)",3,"click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%",3,"click"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"table-responsive","mat-elevation-z8",2,"margin-bottom","5%"],["matColumnDef","id"],["matColumnDef","observacion"],["matColumnDef","actividad"],["matColumnDef","estado"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","usuario"],["matColumnDef","acciones"],[4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%"],["mat-header-cell",""],["mat-cell",""],["type","button","mat-icon-button","","type","button","title","Ver archivos","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","custom-buttonArchivos",2,"background-color","rgb(58, 156, 156)","margin-right","5%",3,"click"],["type","button","mat-icon-button","","type","button","title","Aprobar - Rechazar Actividades","data-bs-toggle","modal","data-bs-target","#exampleModal2",1,"btn","btn-primary","custom-buttonEvaluar",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"click"],["type","button","class","btn btn-primary custom-buttonDetalle","mat-icon-button","","title","Ver observaciones","style","\n                    background-color: rgb(150, 215, 219);\n                    margin-right: 5%;\n                  ","data-bs-toggle","modal","data-bs-target","#exampleModal3",3,"click",4,"ngIf"],["type","button","mat-icon-button","","title","Ver observaciones","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary","custom-buttonDetalle",2,"background-color","rgb(150, 215, 219)","margin-right","5%",3,"click"],["mat-header-row",""],["mat-row",""],[3,"href","download"],[1,"col-sm-8","col-lg-6",2,"width","75%"],[3,"ngSubmit"],[2,"display","flex","justify-content","flex-start","gap","10rem"],[1,"form-floating","mb-3",2,"width","45%"],["type","text","id","toUser","name","toUser","required","","placeholder","............","required","",1,"form-control",3,"value","ngModel","ngModelChange"],["for","toUser"],[1,"form-floating","mb-3"],["type","text","id","subject","name","subject","required","","placeholder","............","required","",1,"form-control",2,"margin-right","5%",3,"ngModel","ngModelChange"],["for","subject"],[2,"margin-bottom","10%","height","25px"],[1,"form-floating"],["placeholder","Leave a comment here","id","floatingTextarea2","placeholder","Ingrese alguna observaci\xf3n...........","required","","id","message","name","message","required","","rows","12",1,"form-control","card-textarea",2,"max-height","75px","overflow-y","auto",3,"ngModel","ngModelChange"],["for","message"],[1,"button-group",2,"display","flex","justify-content","center"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-envelope"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[1,"overlay"],[1,"spinner",3,"diameter","strokeWidth","value","mode"],[1,"text",2,"color","white"],["type","button",1,"btn","btn-success",2,"background-color","rgb(10, 8, 94)",3,"click"],[1,"fas","fa-save"],["mat-cell","",3,"ngStyle"],["role","button",1,"btn","btn-danger",2,"background-color","red","margin-right","5%",3,"click"],[1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.goBack()}),e.TgZ(4,"mat-icon",4),e._uU(5,"arrow_back"),e.qZA()(),e.TgZ(6,"figure",5)(7,"blockquote",6)(8,"h1")(9,"strong"),e._uU(10," ACTIVIDADES "),e.qZA()()()(),e.TgZ(11,"div",7)(12,"div",8)(13,"div",9)(14,"mat-accordion")(15,"mat-expansion-panel",10),e.NdJ("opened",function(){return n.panelOpenState=!0})("closed",function(){return n.panelOpenState=!1}),e.TgZ(16,"mat-expansion-panel-header")(17,"mat-panel-title",11)(18,"h4")(19,"strong"),e._uU(20," DESCRIPCI\xd3N DE EVIDENCIA"),e.qZA()()(),e.TgZ(21,"mat-panel-description"),e._uU(22),e.qZA()(),e.TgZ(23,"div",12)(24,"p"),e._uU(25),e.qZA()()()()(),e.TgZ(26,"div",13)(27,"table",14),e.ynx(28,15),e.YNc(29,zs,2,0,"th",16),e.YNc(30,Ys,2,1,"td",17),e.BQk(),e.ynx(31,18),e.YNc(32,Bs,2,0,"th",16),e.YNc(33,js,2,1,"td",17),e.BQk(),e.ynx(34,19),e.YNc(35,Qs,2,0,"th",16),e.YNc(36,Ls,2,1,"td",17),e.BQk(),e.ynx(37,20),e.YNc(38,Js,2,0,"th",16),e.YNc(39,Hs,2,1,"td",17),e.BQk(),e.ynx(40,21),e.YNc(41,Fs,2,0,"th",16),e.YNc(42,Gs,2,1,"td",17),e.BQk(),e.ynx(43,22),e.YNc(44,$s,2,0,"th",16),e.YNc(45,Ws,8,1,"td",17),e.BQk(),e.YNc(46,Ks,1,0,"tr",23),e.YNc(47,Xs,1,2,"tr",24),e.qZA()()()(),e.TgZ(48,"div",25)(49,"div",26)(50,"div",27)(51,"div",28)(52,"h1",29),e._uU(53," ARCHIVOS DE:"),e._UZ(54,"span"),e._uU(55),e.qZA(),e._UZ(56,"button",30),e.qZA(),e.TgZ(57,"div",31)(58,"div",32)(59,"table",14),e.ynx(60,33),e.YNc(61,el,2,0,"th",16),e.YNc(62,tl,2,1,"td",17),e.BQk(),e.ynx(63,34),e.YNc(64,il,2,0,"th",16),e.YNc(65,ol,2,1,"td",17),e.BQk(),e.ynx(66,35),e.YNc(67,nl,2,0,"th",16),e.YNc(68,al,3,3,"td",17),e.BQk(),e.YNc(69,rl,1,0,"tr",23),e.YNc(70,sl,1,0,"tr",36),e.qZA()()(),e.TgZ(71,"div",37)(72,"button",38),e._UZ(73,"i",39),e._uU(74," Cerrar "),e.qZA()()()()(),e.TgZ(75,"div",40),e.NdJ("hidden.bs.modal",function(){return n.LimpiarModal()}),e.TgZ(76,"div",41)(77,"div",27)(78,"div",28)(79,"h1",42),e._uU(80," EVALUAR "),e.qZA(),e.TgZ(81,"button",43),e.NdJ("click",function(){return n.LimpiarModal()}),e.qZA()(),e.TgZ(82,"div",31)(83,"div",7)(84,"div",44)(85,"h2",45),e._UZ(86,"i",46),e._uU(87,"Detalles "),e.qZA(),e._UZ(88,"br")(89,"hr"),e.TgZ(90,"div",47)(91,"div",48)(92,"mat-form-field",49)(93,"mat-label"),e._uU(94,"Fecha de revisi\xf3n"),e.qZA(),e._UZ(95,"input",50),e.qZA()(),e.TgZ(96,"div",48)(97,"mat-form-field",49)(98,"mat-label"),e._uU(99,"Usuario Evaluador"),e.qZA(),e._UZ(100,"input",51),e.qZA()(),e.TgZ(101,"div",48)(102,"mat-form-field",49)(103,"mat-label"),e._uU(104,"Estado de Actividad"),e.qZA(),e._UZ(105,"input",52),e.qZA()()()()(),e.TgZ(106,"div",53)(107,"div",54)(108,"div",7)(109,"div",8)(110,"h3",45),e._UZ(111,"i",55),e.TgZ(112,"strong"),e._uU(113,"OBSERVACIONES"),e.qZA()(),e._UZ(114,"br"),e.TgZ(115,"div",56)(116,"div",57)(117,"button",58),e.NdJ("click",function(){return n.Limpiar()}),e._UZ(118,"i",59),e.qZA(),e.TgZ(119,"button",60),e.NdJ("click",function(){return n.Aprobado()}),e._UZ(120,"i",61),e.qZA(),e.TgZ(121,"button",62),e.NdJ("click",function(){return n.Rechazado()}),e._UZ(122,"i",63),e.qZA()()()()()(),e.YNc(123,cl,23,7,"div",64),e.qZA()(),e.TgZ(124,"div",37),e.YNc(125,dl,3,1,"button",65),e.TgZ(126,"button",66),e.NdJ("click",function(){return n.LimpiarModal()}),e._UZ(127,"i",39),e._uU(128," Cancelar "),e.qZA()()()()(),e.TgZ(129,"div",67)(130,"div",26)(131,"div",27)(132,"div",28)(133,"h1",29),e._uU(134," OBSERVACIONES "),e.qZA()(),e.TgZ(135,"div",31)(136,"div",68)(137,"table",14),e.ynx(138,69),e.YNc(139,ul,2,0,"th",16),e.YNc(140,pl,2,1,"td",17),e.BQk(),e.ynx(141,70),e.YNc(142,hl,2,0,"th",16),e.YNc(143,ml,2,1,"td",17),e.BQk(),e.ynx(144,71),e.YNc(145,fl,2,0,"th",16),e.YNc(146,gl,2,1,"td",17),e.BQk(),e.ynx(147,72),e.YNc(148,bl,2,0,"th",16),e.YNc(149,vl,2,4,"td",73),e.BQk(),e.ynx(150,74),e.YNc(151,Cl,2,0,"th",16),e.YNc(152,xl,2,2,"td",17),e.BQk(),e.ynx(153,75),e.YNc(154,yl,2,0,"th",16),e.YNc(155,Tl,3,0,"td",17),e.BQk(),e.YNc(156,Zl,1,0,"tr",23),e.YNc(157,Sl,1,0,"tr",36),e.qZA(),e.YNc(158,Al,3,1,"ng-container",76),e.qZA()(),e.TgZ(159,"div",37)(160,"button",77),e._UZ(161,"i",39),e._uU(162," Cerrar "),e.qZA()()()()()()()()),2&t&&(e.xp6(15),e.Q6J("expanded",!0),e.xp6(7),e.hij(" ",n.panelOpenState?"Abierto":"Cerrado"," "),e.xp6(3),e.Oqu(n.evidencia.descripcion),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.columnas),e.xp6(1),e.Q6J("matRowDefColumns",n.columnas),e.xp6(8),e.hij(" ",n.nombreActividad," "),e.xp6(4),e.Q6J("dataSource",n.dataSource2),e.xp6(10),e.Q6J("matHeaderRowDef",n.columnasArchi),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasArchi),e.xp6(25),e.Q6J("value",n.fechaFormateada),e.xp6(5),e.Q6J("value",n.user.username),e.xp6(5),e.Q6J("value",n.estadoEvi),e.xp6(18),e.Q6J("ngIf",n.mostrar),e.xp6(2),e.Q6J("ngIf",n.verificar),e.xp6(12),e.Q6J("dataSource",n.dataSource3),e.xp6(19),e.Q6J("matHeaderRowDef",n.columnasObservaciones),e.xp6(1),e.Q6J("matRowDefColumns",n.columnasObservaciones),e.xp6(1),e.Q6J("ngIf",n.noRegistros))},dependencies:[S.O5,S.PC,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,q.lW,q.RK,O.KE,O.hX,le.Nt,y._Y,y.Fj,y.JJ,y.JL,y.Q7,y.On,y.F,L.Hw,H.pp,H.ib,H.yz,H.yK,H.u4,Be.Ou],styles:[".boton[_ngcontent-%COMP%]{background-color:#0e0e92;color:#fff}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;color:#fff}"]}),i})(),pathMatch:"full",canActivate:[P.m],data:{allowedRoles:["SUPERADMIN"]}},{path:"modelo",loadChildren:()=>Promise.all([f.e(592),f.e(655)]).then(f.bind(f,7655)).then(i=>i.ModeloModule)},{path:"ponderacion",loadChildren:()=>Promise.all([f.e(592),f.e(906)]).then(f.bind(f,906)).then(i=>i.PonderacionModule)},{path:"flujo-criterio",loadChildren:()=>Promise.all([f.e(592),f.e(705)]).then(f.bind(f,9705)).then(i=>i.FlujoCriterioModule)},{path:"formula",loadChildren:()=>Promise.all([f.e(592),f.e(194)]).then(f.bind(f,7194)).then(i=>i.FormulaModule)}];let Ul=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(Dl),k.Bz]}),i})();var Nl=f(1327);let Rl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[S.ez,Ul,b.p0,U.TU,Nl.m]}),i})()},5402:(je,F,f)=>{f.d(F,{$:()=>G});var S=f(4650),k=f(4120),I=f(1635);let G=(()=>{class R{constructor(z,x){this.loginService=z,this.router=x}canActivate(z,x){return!(!this.loginService.isLoggedIn()||"SUPERADMIN"!=this.loginService.getUserRole())||(this.router.navigate(["login"]),!1)}}return R.\u0275fac=function(z){return new(z||R)(S.LFG(k.r),S.LFG(I.F0))},R.\u0275prov=S.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()}}]);