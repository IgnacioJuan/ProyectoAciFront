"use strict";(self.webpackChunksistema_security=self.webpackChunksistema_security||[]).push([[609],{7609:(Y,S,c)=>{c.r(S),c.d(S,{AdminModule:()=>On});var g=c(6895),A=c(1635),p=c(430),i=c(4650),C=c(4120);let v=(()=>{class e{constructor(t,o){this.loginService=t,this.router=o}canActivate(t,o){return!(!this.loginService.isLoggedIn()||"ADMIN"!=this.loginService.getUserRole())||(this.router.navigate(["login"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(C.r),i.LFG(A.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=c(9808),u=c(4006),r=c(3626),m=c(8739),Z=c(4641),V=c(8493),M=c(2068);const W=["datosModalRef"];function X(e,n){1&e&&(i.TgZ(0,"th",15),i._uU(1,"ID"),i.qZA())}function ii(e,n){if(1&e&&(i.TgZ(0,"td",16),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_criterio," ")}}function ti(e,n){1&e&&(i.TgZ(0,"th",15),i._uU(1,"NOMBRE"),i.qZA())}function ei(e,n){if(1&e&&(i.TgZ(0,"td",16),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombre," ")}}function oi(e,n){1&e&&(i.TgZ(0,"th",15),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function ni(e,n){if(1&e&&(i.TgZ(0,"td",16),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function ai(e,n){1&e&&i._UZ(0,"tr",17)}function ri(e,n){1&e&&i._UZ(0,"tr",18)}const si=function(){return[5,10,20]};Z.vfs=V.I.vfs;let ci=(()=>{class e{constructor(t,o,a){this.criterioservice=t,this.router=o,this.fb=a,this.searchText="",this.crite=new f.v,this.criterios=[],this.guardadoExitoso=!1,this.itemsPerPageLabel="Criterios por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(s,l,h)=>{if(0==h||0==l)return`0 de ${h}`;const _=s*l;return`${_+1} - ${_<(h=Math.max(h,0))?Math.min(_+l,h):_+l} de ${h}`},this.filterPost="",this.dataSource=new r.by,this.columnasUsuario=["id_criterio","nombre","descripcion"],this.frmCriterio=a.group({nombre:["",u.kI.required],descripcion:["",[u.kI.required]]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listar()}listar(){this.criterioservice.obtenerDatosCriterios().subscribe(t=>{this.criterios=t,this.dataSource.data=this.criterios},t=>{console.error("Error al listar los criterios:",t)})}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(o=>JSON.stringify(o).toLowerCase().includes(t))}else this.dataSource.data=this.criterios}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(M.X),i.Y36(A.F0),i.Y36(u.qu))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-criterios-admin"]],viewQuery:function(t,o){if(1&t&&(i.Gf(W,5),i.Gf(m.NW,5)),2&t){let a;i.iGM(a=i.CRH())&&(o.datosModalRef=a.first),i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:25,vars:6,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"card"],[1,"card-body"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],["mat-table","",3,"dataSource"],["matColumnDef","id_criterio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements","itemsPerPageLabel","Items por p\xe1gina:","nextPageLabel","Siguiente","previousPageLabel","Anterior",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(i.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1")(4,"strong"),i._uU(5," LISTADO CRITERIOS"),i.qZA()()(),i._UZ(6,"div"),i.TgZ(7,"div",2)(8,"div",3)(9,"div",4)(10,"input",5),i.NdJ("ngModelChange",function(s){return o.filterPost=s})("input",function(){return o.aplicarFiltro()}),i.qZA()(),i._UZ(11,"br"),i.TgZ(12,"table",6),i.ynx(13,7),i.YNc(14,X,2,0,"th",8),i.YNc(15,ii,2,1,"td",9),i.BQk(),i.ynx(16,10),i.YNc(17,ti,2,0,"th",8),i.YNc(18,ei,2,1,"td",9),i.BQk(),i.ynx(19,11),i.YNc(20,oi,2,0,"th",8),i.YNc(21,ni,2,1,"td",9),i.BQk(),i.YNc(22,ai,1,0,"tr",12),i.YNc(23,ri,1,0,"tr",13),i.qZA(),i._UZ(24,"mat-paginator",14),i.qZA()()()()),2&t&&(i.xp6(10),i.Q6J("ngModel",o.filterPost),i.xp6(2),i.Q6J("dataSource",o.dataSource),i.xp6(10),i.Q6J("matHeaderRowDef",o.columnasUsuario),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasUsuario),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(5,si)))},dependencies:[u.Fj,u.JJ,u.On,m.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css";.input-group[_ngcontent-%COMP%]{margin-top:10px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:auto;border-radius:20px}.input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px}.input-group[_ngcontent-%COMP%]   .fa-search[_ngcontent-%COMP%]{font-size:18px}.tabla[_ngcontent-%COMP%]{width:100%;max-width:900px;margin:0 auto}.tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid #ddd}.tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#2260d3;color:#fff}.tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{margin-left:8px}.tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:10%;border-bottom-width:2px}#buscar[_ngcontent-%COMP%], #titulo[_ngcontent-%COMP%]{width:300px;margin:0 auto}.fa-trash[_ngcontent-%COMP%]{color:red}.fa-edit[_ngcontent-%COMP%]{color:tomato}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}']}),e})();var li=c(2271),z=c(6493),di=c(404);const ui=["datosModalRef"];function mi(e,n){1&e&&(i.TgZ(0,"th",19),i._uU(1,"Criterio"),i.qZA())}function pi(e,n){if(1&e&&(i.TgZ(0,"td",20),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombreCriterio," ")}}function hi(e,n){1&e&&(i.TgZ(0,"th",19),i._uU(1,"ID"),i.qZA())}function gi(e,n){if(1&e&&(i.TgZ(0,"td",20),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_subcriterio," ")}}function _i(e,n){1&e&&(i.TgZ(0,"th",19),i._uU(1,"NOMBRE"),i.qZA())}function fi(e,n){if(1&e&&(i.TgZ(0,"td",20),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombre," ")}}function bi(e,n){1&e&&(i.TgZ(0,"th",19),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function vi(e,n){if(1&e&&(i.TgZ(0,"td",20),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function Ai(e,n){1&e&&(i.TgZ(0,"th",19),i._uU(1,"INDICADORES"),i.qZA())}function Ci(e,n){if(1&e&&(i.TgZ(0,"td",20)(1,"div",21)(2,"p"),i._uU(3," Contiene "),i.TgZ(4,"span",22),i._uU(5),i.qZA(),i._uU(6," Indicadores "),i.qZA()()()),2&e){const t=n.$implicit;i.xp6(5),i.Oqu(t.cantidadIndicadores)}}function Zi(e,n){1&e&&i._UZ(0,"tr",23)}function xi(e,n){1&e&&i._UZ(0,"tr",24)}const Ti=function(){return[5,10,20]};let Ui=(()=>{class e{constructor(t,o,a){this.indicadorservice=t,this.paginatorIntl=o,this.subcriterioservice=a,this.searchText="",this.buscar="",this.subcrite=new li.p,this.subcriterios=[],this.itemsPerPageLabel="Items por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(s,l,h)=>{if(0==h||0==l)return`0 de ${h}`;const _=s*l;return`${_+1} - ${_<(h=Math.max(h,0))?Math.min(_+l,h):_+l} de ${h}`},this.filterPost="",this.dataSource=new r.by,this.columnasUsuario=["nombreCriterio","id_subcriterio","nombre","descripcion","cantidadIndicadores"],this.paginatorIntl.nextPageLabel=this.nextPageLabel,this.paginatorIntl.lastPageLabel=this.lastPageLabel,this.paginatorIntl.itemsPerPageLabel=this.itemsPerPageLabel,this.paginatorIntl.previousPageLabel=this.previousPageLabel,this.paginatorIntl.firstPageLabel=this.firstPageLabel,this.paginatorIntl.getRangeLabel=this.rango}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listar()}listar(){this.subcriterioservice.obtenerDatosSubcriteriosFull().subscribe(t=>{this.subcriterios=t,this.dataSource.data=this.subcriterios},t=>{console.error("Error al listar los subcriterios:",t)})}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(o=>JSON.stringify(o).toLowerCase().includes(t))}else this.dataSource.data=this.subcriterios}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(z.Q),i.Y36(m.ye),i.Y36(di.j))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-subcriterios-admin"]],viewQuery:function(t,o){if(1&t&&(i.Gf(ui,5),i.Gf(m.NW,5)),2&t){let a;i.iGM(a=i.CRH())&&(o.datosModalRef=a.first),i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:31,vars:6,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[2,"text-transform","uppercase"],[1,"card"],[1,"card-body"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","nombreCriterio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_subcriterio"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","cantidadIndicadores"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements","itemsPerPageLabel","Items por p\xe1gina:","nextPageLabel","Siguiente","previousPageLabel","Anterior",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[2,"color","red"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(i.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1",2)(4,"strong")(5,"a"),i._uU(6,"LISTADO SUBCRITERIOS "),i.qZA()()()(),i.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"input",6),i.NdJ("ngModelChange",function(s){return o.filterPost=s})("input",function(){return o.aplicarFiltro()}),i.qZA()(),i.TgZ(11,"div",7)(12,"table",8),i.ynx(13,9),i.YNc(14,mi,2,0,"th",10),i.YNc(15,pi,2,1,"td",11),i.BQk(),i.ynx(16,12),i.YNc(17,hi,2,0,"th",10),i.YNc(18,gi,2,1,"td",11),i.BQk(),i.ynx(19,13),i.YNc(20,_i,2,0,"th",10),i.YNc(21,fi,2,1,"td",11),i.BQk(),i.ynx(22,14),i.YNc(23,bi,2,0,"th",10),i.YNc(24,vi,2,1,"td",11),i.BQk(),i.ynx(25,15),i.YNc(26,Ai,2,0,"th",10),i.YNc(27,Ci,7,1,"td",11),i.BQk(),i.YNc(28,Zi,1,0,"tr",16),i.YNc(29,xi,1,0,"tr",17),i.qZA(),i._UZ(30,"mat-paginator",18),i.qZA()()()()()),2&t&&(i.xp6(10),i.Q6J("ngModel",o.filterPost),i.xp6(2),i.Q6J("dataSource",o.dataSource),i.xp6(16),i.Q6J("matHeaderRowDef",o.columnasUsuario),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasUsuario),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(5,Ti)))},dependencies:[u.Fj,u.JJ,u.On,m.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),e})();var Si=c(8896);const Ni=["datosModalRef"];function Ei(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"SUBCRITERIO"),i.qZA())}function yi(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombreSubcriterio," ")}}function Di(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"ID"),i.qZA())}function Mi(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_indicador," ")}}function wi(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"NOMBRE"),i.qZA())}function Ii(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombre," ")}}function Ri(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function qi(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function ki(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"PESO"),i.qZA())}function Pi(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.peso," ")}}function Oi(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"ESTANDAR"),i.qZA())}function Yi(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.estandar," ")}}function zi(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"TIPO"),i.qZA())}function Ji(e,n){if(1&e&&(i.TgZ(0,"td",24),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.tipo," ")}}function Qi(e,n){1&e&&(i.TgZ(0,"th",23),i._uU(1,"EVIDENCIAS"),i.qZA())}function Li(e,n){if(1&e&&(i.TgZ(0,"td",24)(1,"div",25)(2,"p"),i._uU(3," Contiene "),i.TgZ(4,"span",26),i._uU(5),i.qZA(),i._uU(6," Evidencias "),i.qZA()()()),2&e){const t=n.$implicit;i.xp6(5),i.Oqu(t.cantidadEvidencia)}}function Bi(e,n){1&e&&i._UZ(0,"tr",27)}function $i(e,n){1&e&&i._UZ(0,"tr",28)}const ji=function(){return[5,10,20]};let Fi=(()=>{class e{constructor(t){this.indicadorservice=t,this.indic=new Si.s,this.indicadors=[],this.filterPost="",this.dataSource=new r.by,this.columnasUsuario=["nombreSubcriterio","id_indicador","nombre","descripcion","peso","estandar","tipo","cantidadEvidencia"]}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listar()}listar(){this.indicadorservice.obtenerDatosIndicadoresFull().subscribe(t=>{this.indicadors=t,this.dataSource.data=this.indicadors},t=>{console.error("Error al listar los indicadors:",t)})}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(o=>JSON.stringify(o).toLowerCase().includes(t))}else this.dataSource.data=this.indicadors}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(z.Q))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-incadores-admin"]],viewQuery:function(t,o){if(1&t&&(i.Gf(Ni,5),i.Gf(m.NW,5)),2&t){let a;i.iGM(a=i.CRH())&&(o.datosModalRef=a.first),i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:42,vars:6,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[2,"text-transform","uppercase"],[1,"card"],[1,"card-body"],["role","search","id","buscar"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","nombreSubcriterio"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_indicador"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","peso"],["matColumnDef","estandar"],["matColumnDef","tipo"],["matColumnDef","cantidadEvidencia"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements","itemsPerPageLabel","Items por p\xe1gina:","nextPageLabel","Siguiente","previousPageLabel","Anterior",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[1,"d-flex"],[2,"color","red"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(i.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1",2)(4,"strong")(5,"a"),i._uU(6,"LISTADO INDICADORES "),i.qZA()()()(),i.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"input",7),i.NdJ("ngModelChange",function(s){return o.filterPost=s})("input",function(){return o.aplicarFiltro()}),i.qZA()(),i._UZ(12,"br"),i.qZA(),i.TgZ(13,"div",8)(14,"table",9),i.ynx(15,10),i.YNc(16,Ei,2,0,"th",11),i.YNc(17,yi,2,1,"td",12),i.BQk(),i.ynx(18,13),i.YNc(19,Di,2,0,"th",11),i.YNc(20,Mi,2,1,"td",12),i.BQk(),i.ynx(21,14),i.YNc(22,wi,2,0,"th",11),i.YNc(23,Ii,2,1,"td",12),i.BQk(),i.ynx(24,15),i.YNc(25,Ri,2,0,"th",11),i.YNc(26,qi,2,1,"td",12),i.BQk(),i.ynx(27,16),i.YNc(28,ki,2,0,"th",11),i.YNc(29,Pi,2,1,"td",12),i.BQk(),i.ynx(30,17),i.YNc(31,Oi,2,0,"th",11),i.YNc(32,Yi,2,1,"td",12),i.BQk(),i.ynx(33,18),i.YNc(34,zi,2,0,"th",11),i.YNc(35,Ji,2,1,"td",12),i.BQk(),i.ynx(36,19),i.YNc(37,Qi,2,0,"th",11),i.YNc(38,Li,7,1,"td",12),i.BQk(),i.YNc(39,Bi,1,0,"tr",20),i.YNc(40,$i,1,0,"tr",21),i.qZA(),i._UZ(41,"mat-paginator",22),i.qZA()()()()()),2&t&&(i.xp6(11),i.Q6J("ngModel",o.filterPost),i.xp6(3),i.Q6J("dataSource",o.dataSource),i.xp6(25),i.Q6J("matHeaderRowDef",o.columnasUsuario),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasUsuario),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(5,ji)))},dependencies:[u.Fj,u.JJ,u.On,m.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),e})();var Hi=c(9398);class J{constructor(){this.id_asignacion=0}}var w=c(285),Gi=c(5226),d=c.n(Gi),Q=c(2693),y=c(1818);function Ki(e,n){if(1&e&&(i.TgZ(0,"option",34),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.username,"")}}function Vi(e,n){if(1&e&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("ngValue",t.id_criterio),i.xp6(1),i.hij(" ",t.nombre,"")}}function Wi(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"tr")(1,"th"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.TgZ(7,"td")(8,"button",36),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.editar(s))}),i._uU(9," Editar"),i._UZ(10,"i",37),i.qZA(),i.TgZ(11,"button",38),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.eliminar(s))}),i._uU(12,"Eliminar"),i.qZA()()()}if(2&e){const t=n.$implicit;i.xp6(2),i.Oqu(t.id_asignacion),i.xp6(2),i.Oqu(t.usuario.username),i.xp6(2),i.Oqu(t.criterio.nombre)}}function Xi(e,n){if(1&e&&(i.TgZ(0,"option",34),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.username,"")}}function it(e,n){if(1&e&&(i.TgZ(0,"option",35),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("ngValue",t.id_criterio),i.xp6(1),i.hij(" ",t.nombre,"")}}let tt=(()=>{class e{constructor(t,o,a){this.login=t,this.asignaService=o,this.notificationService=a,this.usuarioResponsable=[],this.criterios=[],this.asignaciones=[],this.asigna=new J,this.asignaN=new J,this.noti=new w.U,this.user=null,this.idusuario=null,this.nombre=null,this.nombreasignado=null,this.isLoggedIn=!1}ngOnInit(){this.listaResponsable(),this.listaCriterios(),this.listaAsignaciones(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()})}listaResponsable(){this.asignaService.listarUsuario().subscribe(t=>{this.usuarioResponsable=t,console.log(this.usuarioResponsable)})}listaCriterios(){this.asignaService.listarCriterios().subscribe(t=>{this.criterios=t,console.log(this.criterios)})}listaAsignaciones(){this.asignaService.listarAsignarResponsable().subscribe(t=>{this.asignaciones=t,console.log(this.asignaciones)})}notificar(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha asignado el criterio "+this.nombre+" a "+this.nombreasignado,this.noti.visto=!1,this.noti.usuario=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}notificaruser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" te ha asignado el criterio "+this.nombre,this.noti.visto=!1,this.noti.usuario=this.idusuario,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}notificaradmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha asignado el criterio "+this.nombre+" a "+this.nombreasignado,this.noti.visto=!1,this.noti.usuario=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}guardar(t){console.log(t.criterio),null!=t.usuario||null!=t.usuario||null!=t.criterio||null!=t.criterio?this.asignaService.createAsigna(t).subscribe(o=>{t=o,this.idusuario=o.usuario.id,this.nombreasignado=o.usuario.username,this.nombre=o.criterio.nombre,d().fire({title:"Asignado \xe9xitosamente",icon:"success",iconColor:"#17550c",color:"#0c3255",confirmButtonColor:"#0c3255",background:"#63B68B"}),this.listaAsignaciones(),this.notificar(),this.notificaruser(),this.notificaradmin(),console.log("hhh"+t)}):d().fire("Llene todos los campos","","warning")}editar(t){localStorage.setItem("id_asig",t.id_asignacion.toString()),console.log(t.id_asignacion),this.asignaN=t,this.Editar()}Editar(){let t=localStorage.getItem("id_asig");console.log(t),this.asignaService.getAsignacionId(Number(t)).subscribe(o=>{this.asignaN=o,this.idusuario=o.usuario.id,this.nombreasignado=o.usuario.username,this.nombre=o.criterio.nombre,console.log(this.asignaN)}),this.listaAsignaciones(),this.notificar(),this.notificaruser(),this.notificaradmin()}Actualizar(t){console.log(t),d().fire({title:"\xbfDesea modificar los campos?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"SI",denyButtonText:"NO"}).then(o=>{o.isConfirmed?this.asignaService.updateAsigna(t).subscribe(a=>{this.asignaN=a,d().fire({title:"Asignacion modificada \xe9xitosamente",icon:"success",iconColor:"#17550c",color:"#0c3255",confirmButtonColor:"#0c3255",background:"#63B68B"}),this.listaAsignaciones(),this.notificar(),this.notificaradmin(),this.notificaruser()}):o.isDenied&&d().fire("Ningun campo modificado","","info")})}eliminar(t){d().fire({title:"\xbfEsta Seguro?",text:"No ser\xe1 capaz de revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Borrarlo!"}).then(o=>{o.isConfirmed&&this.asignaService.deleteAsigna(t).subscribe(a=>{this.asignaciones=this.asignaciones.filter(s=>s!==t),d().fire("Borrado!","Su archivo ha sido borrado.","success")})})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(C.r),i.Y36(Q._),i.Y36(y.U))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-asigna"]],decls:79,vars:9,consts:[[1,"container","mb-3"],[1,"text-center"],[1,"row"],[1,"col"],["type","button","data-bs-toggle","modal","data-bs-target","#mo2",1,"btn","btn-primary"],["for",""],["id","selecionarr","aria-label","Default select example","name","selecionar","required","",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"container","text-center","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"table","table-striped"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"container"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["action",""],["id","selecionarr","aria-label","Default select example","name","selecionar",1,"form-select",3,"ngModel","ngModelChange"],["selected","","disabled",""],[1,"container","text-center",2,"padding","10px 0"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"modal-footer"],["id","mo2","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[3,"value"],[3,"ngValue"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary",3,"click"],[1,""],[1,"btn","btn-danger",2,"margin-left","10px",3,"click"]],template:function(t,o){1&t&&(i.TgZ(0,"form")(1,"div",0)(2,"h1",1)(3,"strong"),i._uU(4,"Asignar Responsables"),i.qZA()()(),i.TgZ(5,"div",0)(6,"div",2)(7,"div",3)(8,"button",4),i._uU(9,"\ncrear responsable\n"),i.qZA(),i.TgZ(10,"label",5),i._uU(11,"Seleccione el Responsable"),i.qZA(),i.TgZ(12,"select",6),i.NdJ("ngModelChange",function(s){return o.asigna.usuario=s}),i.YNc(13,Ki,2,2,"option",7),i.qZA()(),i.TgZ(14,"div",3)(15,"label",5),i._uU(16,"Seleccione el Criterio"),i.qZA(),i.TgZ(17,"select",6),i.NdJ("ngModelChange",function(s){return o.asigna.criterio=s}),i.YNc(18,Vi,2,2,"option",8),i.qZA()()()(),i.TgZ(19,"div",9)(20,"button",10),i.NdJ("click",function(){return o.guardar(o.asigna)}),i._uU(21,"Asignar"),i.qZA()()(),i.TgZ(22,"div",0)(23,"table",11)(24,"thead")(25,"tr")(26,"th",12),i._uU(27,"Id"),i.qZA(),i.TgZ(28,"th",12),i._uU(29,"Responsable"),i.qZA(),i.TgZ(30,"th",12),i._uU(31,"Criterio"),i.qZA(),i.TgZ(32,"th",12),i._uU(33,"Accion"),i.qZA()()(),i.TgZ(34,"tbody",13),i.YNc(35,Wi,13,3,"tr",14),i.qZA()()(),i.TgZ(36,"div",15)(37,"div",16)(38,"div",17)(39,"div",18)(40,"div",19)(41,"h1",20),i._uU(42,"Editar la asignaci\xf3n de Responsable "),i.qZA(),i._UZ(43,"button",21),i.qZA(),i.TgZ(44,"div",22)(45,"form",23)(46,"div",15)(47,"label",5),i._uU(48,"Elija el Usuario"),i.qZA()(),i.TgZ(49,"div",15)(50,"select",24),i.NdJ("ngModelChange",function(s){return o.asignaN.usuario=s}),i.TgZ(51,"option",25),i._uU(52," Seleccione el Usuario "),i.qZA(),i.YNc(53,Xi,2,2,"option",7),i.qZA()(),i.TgZ(54,"div",15)(55,"label",5),i._uU(56,"Elija el Criterio"),i.qZA()(),i.TgZ(57,"div",15)(58,"select",24),i.NdJ("ngModelChange",function(s){return o.asignaN.criterio=s}),i.TgZ(59,"option",25),i._uU(60," Seleccione el criterio "),i.qZA(),i.YNc(61,it,2,2,"option",8),i.qZA()()(),i.TgZ(62,"div",26)(63,"button",27),i.NdJ("click",function(){return o.Actualizar(o.asignaN)}),i._uU(64,"Modificar"),i.qZA()()(),i._UZ(65,"div",28),i.qZA()()()(),i.TgZ(66,"div",29)(67,"div",30)(68,"div",18)(69,"div",19)(70,"h5",31),i._uU(71,"Modal title"),i.qZA(),i._UZ(72,"button",21),i.qZA(),i._UZ(73,"div",22),i.TgZ(74,"div",28)(75,"button",32),i._uU(76,"Cerrar"),i.qZA(),i.TgZ(77,"button",33),i._uU(78,"Aceptar"),i.qZA()()()()()),2&t&&(i.xp6(12),i.Q6J("ngModel",o.asigna.usuario),i.xp6(1),i.Q6J("ngForOf",o.usuarioResponsable),i.xp6(4),i.Q6J("ngModel",o.asigna.criterio),i.xp6(1),i.Q6J("ngForOf",o.criterios),i.xp6(17),i.Q6J("ngForOf",o.asignaciones),i.xp6(15),i.Q6J("ngModel",o.asignaN.usuario),i.xp6(3),i.Q6J("ngForOf",o.usuarioResponsable),i.xp6(5),i.Q6J("ngModel",o.asignaN.criterio),i.xp6(3),i.Q6J("ngForOf",o.criterios))},dependencies:[g.sg,u._Y,u.YN,u.Kr,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F],styles:["body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}"]}),e})();var T=c(4411),N=c(6302),et=c(5560),ot=c(8584),L=c(2185),nt=c(5412),B=c(161),$=c(8519),E=c(4859),x=c(9549),k=c(4144),P=c(7392),j=c(4633),F=c(1572),at=c(8217);function rt(e,n){1&e&&(i.TgZ(0,"div",77),i._UZ(1,"mat-spinner",78),i.TgZ(2,"p"),i._uU(3,"Cargando..."),i.qZA()())}function st(e,n){if(1&e&&(i.TgZ(0,"mat-list-option",79),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("value",t),i.xp6(1),i.AsE(" ",t.persona.primer_nombre," ",t.persona.primer_apellido," ")}}function ct(e,n){1&e&&(i.TgZ(0,"div",77),i._UZ(1,"mat-spinner",78),i.TgZ(2,"p"),i._uU(3,"Cargando..."),i.qZA()())}function lt(e,n){if(1&e&&(i.TgZ(0,"th",91),i._uU(1,"ID"),i.qZA()),2&e){const t=i.oxw(2);i.Udp("display",t.ocultar?"":"none")}}function dt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=i.oxw(2);i.Udp("display",o.ocultar?"":"none"),i.xp6(1),i.hij(" ",t.id_evidencia," ")}}function ut(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"NOMBRE"),i.qZA())}function mt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",null==t.indicador||null==t.indicador.subcriterio||null==t.indicador.subcriterio.criterio?null:t.indicador.subcriterio.criterio.nombre," ")}}function pt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"SUBCRITERIO"),i.qZA())}function ht(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",null==t.indicador||null==t.indicador.subcriterio?null:t.indicador.subcriterio.nombre," ")}}function gt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"INDICADORES"),i.qZA())}function _t(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",null==t.indicador?null:t.indicador.nombre," ")}}function ft(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function bt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function vt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"ACCIONES"),i.qZA())}function At(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",98),i.NdJ("click",function(){i.CHM(t);const a=i.oxw().$implicit,s=i.oxw(2);return i.KtG(s.seleccionarTareaDetalle(a))}),i.TgZ(1,"mat-icon"),i._uU(2,"help"),i.qZA()()}}function Ct(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",92)(1,"div",21)(2,"button",93),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.verDetalles(s))}),i._UZ(3,"i",94),i.qZA(),i.TgZ(4,"button",95),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.seleccionarTarea(s))}),i.TgZ(5,"mat-icon"),i._uU(6," functions"),i.qZA()()(),i.TgZ(7,"div",21)(8,"button",96),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.calificar(s))}),i.TgZ(9,"mat-icon"),i._uU(10,"filter_frames"),i.qZA()(),i.YNc(11,At,3,0,"button",97),i.qZA()()}if(2&e){const t=n.$implicit,o=i.oxw(2);i.xp6(2),i.Q6J("disabled","pendiente"===t.estado&&o.disableVerDetalles),i.xp6(2),i.Q6J("disabled","Aprobada"===t.estado),i.xp6(7),i.Q6J("ngIf","pendiente"!==t.estado)}}function Zt(e,n){1&e&&i._UZ(0,"tr",99)}function xt(e,n){if(1&e&&i._UZ(0,"tr",100),2&e){const t=n.$implicit,o=i.oxw(2);i.Udp("background-color",o.getColorByEstado(t.estado))}}function Tt(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",80)(1,"div",81)(2,"div",10)(3,"input",82),i.NdJ("input",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.applyFilter())}),i.qZA()(),i.TgZ(4,"table",62),i.ynx(5,83),i.YNc(6,lt,2,2,"th",84),i.YNc(7,dt,2,3,"td",85),i.BQk(),i.ynx(8,86),i.YNc(9,ut,2,0,"th",64),i.YNc(10,mt,2,1,"td",65),i.BQk(),i.ynx(11,87),i.YNc(12,pt,2,0,"th",64),i.YNc(13,ht,2,1,"td",65),i.BQk(),i.ynx(14,88),i.YNc(15,gt,2,0,"th",64),i.YNc(16,_t,2,1,"td",65),i.BQk(),i.ynx(17,89),i.YNc(18,ft,2,0,"th",64),i.YNc(19,bt,2,1,"td",65),i.BQk(),i.ynx(20,72),i.YNc(21,vt,2,0,"th",64),i.YNc(22,Ct,12,3,"td",65),i.BQk(),i.YNc(23,Zt,1,0,"tr",73),i.YNc(24,xt,1,2,"tr",90),i.qZA()()()}if(2&e){const t=i.oxw();i.xp6(3),i.Q6J("formControl",t.idFilter),i.xp6(1),i.Q6J("dataSource",t.dataSource),i.xp6(19),i.Q6J("matHeaderRowDef",t.columnas),i.xp6(1),i.Q6J("matRowDefColumns",t.columnas)}}function Ut(e,n){if(1&e&&(i.TgZ(0,"div",118)(1,"div",119),i._UZ(2,"mat-progress-spinner",120),i.TgZ(3,"h1",121),i._uU(4," Enviando correo... "),i.qZA()()()),2&e){const t=i.oxw(2);i.xp6(2),i.Q6J("diameter",150)("strokeWidth",5)("value",t.spinnerValue)("mode","determinate")}}function St(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",101)(1,"div",4)(2,"div",5)(3,"form",102),i.NdJ("ngSubmit",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.enviar())}),i.TgZ(4,"div",103)(5,"div",104)(6,"input",105),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.toUser=a)}),i.qZA(),i.TgZ(7,"label",106),i._uU(8,"Para:"),i.qZA()(),i.TgZ(9,"div",107)(10,"input",108),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.subject=a)}),i.qZA(),i.TgZ(11,"label",109),i._uU(12,"Asunto:"),i.qZA()()(),i.TgZ(13,"div",110)(14,"div",111)(15,"textarea",112),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.observacion=a)})("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.message=a)}),i.qZA(),i.TgZ(16,"label",113),i._uU(17,"Comentario"),i.qZA()()(),i.TgZ(18,"div",114)(19,"button",115),i._UZ(20,"i",116),i._uU(21," Enviar "),i.qZA()()(),i.YNc(22,Ut,5,4,"div",117),i.qZA()()()}if(2&e){const t=i.oxw();i.xp6(6),i.Q6J("value",t.correoEnviar)("ngModel",t.toUser),i.xp6(4),i.Q6J("ngModel",t.subject),i.xp6(5),i.Q6J("ngModel",t.observacion)("ngModel",t.message),i.xp6(7),i.Q6J("ngIf",t.isSending)}}function Nt(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",122),i.NdJ("click",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.guardarap())}),i._UZ(1,"i",123),i._uU(2," Guardar "),i.qZA()}if(2&e){const t=i.oxw();i.uIk("data-bs-dismiss",t.verificar?"modal":null)}}function Et(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"ID"),i.qZA())}function yt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_detalle_evaluacion," ")}}function Dt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"EVIDENCIA"),i.qZA())}function Mt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.evidencia.id_evidencia," ")}}function wt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"OBSERVACI\xd3N"),i.qZA())}function It(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.observacion," ")}}function Rt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"ESTADO"),i.qZA())}const qt=function(e,n){return{rechazada:e,aprobada:n}};function kt(e,n){if(1&e&&(i.TgZ(0,"td",124),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("ngClass",i.WLB(2,qt,!t.estado,t.estado)),i.xp6(1),i.hij(" ",t.estado?"Aprobada":"Rechazada"," ")}}function Pt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"FECHA"),i.qZA())}function Ot(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,t.fecha,"dd/MM/yyyy")," ")}}function Yt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"USUARIO EVALUADOR"),i.qZA())}function zt(e,n){if(1&e&&(i.TgZ(0,"td",92),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.AsE(" ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_nombre," ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_apellido," ")}}function Jt(e,n){1&e&&(i.TgZ(0,"th",91),i._uU(1,"ACCIONES"),i.qZA())}function Qt(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",92)(1,"button",125),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.Eliminar(s))}),i._UZ(2,"i",126),i.qZA()()}}function Lt(e,n){1&e&&i._UZ(0,"tr",99)}function Bt(e,n){1&e&&i._UZ(0,"tr",100)}function $t(e,n){if(1&e&&(i.ynx(0),i.TgZ(1,"p"),i._uU(2),i.qZA(),i.BQk()),2&e){const t=i.oxw();i.xp6(2),i.Oqu(t.noRegistros)}}let jt=(()=>{class e{constructor(t,o,a,s,l,h,_,b){this.evidenciaService=t,this.router=o,this.dialog=a,this.emailService=s,this.login=l,this.notificationService=h,this.detalleEvaluaService=_,this.criteriosService=b,this.columnas=["id","nombre","subcriterio","indicadores","descripcion","actions"],this.verificar=!1,this.columnasDetalle=["iddetalle","evi","observacion","estado","fecha","usua","actions"],this.dataSource=new r.by,this.dataSource4=new r.by,this.mostrarBoton=!1,this.idUsuario=0,this.isLoading=!1,this.usuarioResponsable=[],this.idEvidencia=0,this.idFilter=new u.NI,this.filterPostid=0,this.idBuscado="",this.usuarioSeleccionado=new T.r,this.Evidencia=new N.v,this.filterPost="",this.isSending=!1,this.spinnerValue=0,this.ocultar=!1,this.mostrar=!1,this.maxTime=30,this.sent=!1,this.toUser="",this.subject="",this.message="",this.isLoggedIn=!1,this.user=null,this.rol=null,this.noti=new w.U,this.idusuario=null,this.nombre=null,this.nombreev=null,this.aprobado=!1,this.descripcionSeleccionada=null,this.fechaActual=new Date,this.fechaFormateada=this.fechaActual.toLocaleDateString("es-ES"),this.correoEnviar="",this.estadoEvi="PENDIENTE",this.evid=new N.v,this.evidDetalle=new N.v,this.disableVerDetalles=!1,this.disableEvaluar=!1,this.observacion="",this.detalleEvi=new et.V,this.listadodetalleEval=[]}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.listaResponsable(),this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.modeloMax(),localStorage.removeItem("eviden")}modeloMax(){this.criteriosService.getModeMaximo().subscribe(t=>{this.id_modelo=t.id_modelo})}calificar(t){this.idevi=t.id_evidencia,this.evidenciaService.getevical(this.idevi,this.id_modelo).subscribe(o=>{console.log("Datos ev "+JSON.stringify(o));const a=o.tipo,s=o.id_in,l=o.peso;console.log("tipo "+a+" id ind "+s+" peso "+l),this.evaluar(a,s,l)})}evaluar(t,o,a){console.log("tipo "+t+" id ind "+o+" peso "+a),this.dialog.open(ot.n,{data:{valor:t,id:o,peso:a}}).afterClosed().subscribe(l=>{console.log(l),"success"==l.event&&(console.log(l),d().fire({position:"center",icon:"success",title:"Calificaci\xf3n registrada",showConfirmButton:!0,timer:1500}))})}applyFilter(){this.dataSource.filter=this.idFilter.value.trim().toLowerCase()}notificarrechazo(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificarrechazouser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado tu evidencia "+this.descripcionSeleccionada,this.noti.visto=!1,this.noti.url="/res/evidenasignada",this.noti.idactividad=0;const t=localStorage.getItem("idUsuario"),o=Number(t);this.noti.usuario=o,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificarrechazoadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");console.log("Nombres usuario "+t),this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/apruebaAdmin",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificaraprob(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificaraprobuser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado tu evidencia "+this.descripcionSeleccionada,this.noti.visto=!1,this.noti.url="/res/evidenasignada",this.noti.idactividad=0;const t=localStorage.getItem("idUsuario"),o=Number(t);this.noti.usuario=o,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaraprobadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");console.log("Nombres usuario "+t),this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la evidencia "+this.descripcionSeleccionada+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/apruebaAdmin",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}onSelectionChange(t){this.isLoading=!0,this.usuarioSeleccionado=t.options[0].value,localStorage.setItem("idUsuario",this.usuarioSeleccionado.id.toString()),localStorage.setItem("nombres",this.usuarioSeleccionado.persona.primer_nombre+" "+this.usuarioSeleccionado.persona.primer_apellido),this.evidenciaService.geteviasig(this.usuarioSeleccionado.username).subscribe(o=>{this.evidencias=o,this.dataSource.data=this.evidencias,this.isLoading=!1}),console.log(this.evidencias),this.mostrarBoton=!0,this.correoEnviar=this.usuarioSeleccionado.persona.correo,this.toUser=this.correoEnviar}listaResponsable(){this.isLoading=!0,this.evidenciaService.listarUsuario().subscribe(t=>{const o=t.filter((a,s,l)=>s===l.findIndex(h=>h.id===a.id));this.usuarioResponsable=o,this.isLoading=!1})}verDetalles(t){console.log("id ev "+t.id_evidencia),this.router.navigate(["/adm/detalleAprobarRechazar"],{state:{data:t,usuarioEnviar:this.usuarioSeleccionado}})}seleccionarTarea(t){this.evid=t}seleccionarTareaDetalle(t){this.evidDetalle=t,this.detalleEvaluaService.getDetalleEvi(this.evidDetalle.id_evidencia).subscribe(o=>{this.listadodetalleEval=o,console.log(o),this.dataSource4.data=o},o=>{console.log(o)}),this.Listar()}Listar(){this.noRegistros=null,this.detalleEvaluaService.getDetalleEvi(this.evidDetalle.id_evidencia).subscribe(t=>{t.length>0?(this.listadodetalleEval=t,this.dataSource4.data=t):this.noRegistros="No hay registros disponibles."},t=>{console.log(t)})}enviar(){this.notificarrechazo(),this.notificarrechazoadmin(),this.notificarrechazouser();const t={destinatarios:[this.toUser],mensaje:"Correo enviado con \xe9xito"};this.emailService.sendEmail([this.toUser],this.subject,this.message).subscribe(o=>{this.enviarNotificacion(t)},o=>{console.error("Error sending email:",o)})}enviarNotificacion(t){this.notificationService.crear(t).subscribe(o=>{this.verificar=!0,console.log("Notificaci\xf3n enviada con \xe9xito")},o=>{console.error("No se pudo enviar la notificaci\xf3n",o)})}getColorByEstado(t){return"pendiente"===t?"rgba(255, 242, 170)":"Aprobada"===t?"rgba(96, 179, 114)":"Rechazada"===t?"rgba(253, 79, 56)":""}guardarap(){"Rechazada"==this.estadoEvi?(this.ModificarTarea(),this.verificar=!1):"Aprobada"==this.estadoEvi?this.ModificarTarea():d().fire("La actividad fue rechazada","Debe enviar el correo con la observaci\xf3n","warning")}Aprobado(t){this.descripcionSeleccionada=t.descripcion,console.log("id Evidencia "+t.id_evidencia),this.aprobado=!0,this.verificar=!0,d().fire({icon:"success",title:"La tarea ha sido aprobada",showConfirmButton:!1,timer:1500}),this.mostrar=!1,this.estadoEvi="Aprobada",this.observacion="Ninguna",this.notificaraprob(),this.notificaraprobadmin(),this.notificaraprobuser()}Rechazado(t){this.aprobado=!1,this.descripcionSeleccionada=t.descripcion,d().fire({icon:"error",title:"La tarea ha sido rechazada."}),this.estadoEvi="Rechazada",this.mostrar=!this.mostrar,this.observacion="",this.verificar=!1}ModificarTarea(){this.detalleEvi.evidencia.id_evidencia=this.evid.id_evidencia,this.detalleEvi.usuario.id=this.user.id,this.detalleEvi.observacion=this.observacion,this.detalleEvi.id_modelo=this.id_modelo,this.aprobado||null!=this.detalleEvi.estado&&null!=this.detalleEvi.observacion&&""!=this.detalleEvi.observacion?(this.evid.estado=this.estadoEvi,this.detalleEvi.estado="Aprobada"==this.evid.estado,this.detalleEvaluaService.create(this.detalleEvi).subscribe(t=>d().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success")),this.evidenciaService.actualizar(this.evid.id_evidencia,this.evid).subscribe(t=>{d().fire({title:"\xa1Registro  exitoso!",icon:"success",showConfirmButton:!1,timer:1500})},t=>{d().fire({title:"\xa1Error al guardar!",text:"Hubo un error al guardar la tarea.",icon:"error",confirmButtonText:"OK"}),console.log(t)})):d().fire("No agreg\xf3 ninguna observaci\xf3n","Porfavor agregue alguna","warning"),this.LimpiarModal()}Eliminar(t){const o=t.id_detalle_evaluacion;d().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.detalleEvaluaService.eliminar(o).subscribe(s=>{this.Listar()}),d().fire("Eliminado!","Registro eliminado.","success"))})}Limpiar(){this.message="",this.subject="",this.detalleEvi.observacion=""}LimpiarModal(){this.mostrar=!1,this.verificar=!1,this.estadoEvi="",this.subject="",this.detalleEvi.observacion="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(L.u),i.Y36(A.F0),i.Y36(nt.uw),i.Y36(B.u),i.Y36(C.r),i.Y36(y.U),i.Y36($.u),i.Y36(M.X))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-aprobar-rechazar-admin"]],viewQuery:function(t,o){if(1&t&&i.Gf(m.NW,5),2&t){let a;i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:144,vars:19,consts:[["class","loading-overlay",4,"ngIf"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"container","text-center"],[1,"row",2,"margin-top","10%","margin-bottom","10%"],[1,"card"],[1,"card-body"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic","font-size","smaller"],[1,"blockquote","text-dark"],[1,"info-message"],[1,"info-text",2,"opacity","0.5"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"selection-list-container",3,"multiple","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"card",2,"height","95%"],[1,"d-flex","flex-row","align-items-center"],[1,"row","align-items-center"],["class","col text-center","style","max-height: 300px; overflow-y: scroll",4,"ngIf"],[1,"container"],[1,"row","justify-content-end"],[1,"col"],[2,"display","flex","align-items","center"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(253, 79, 56)"],[1,"label",2,"font-size","12px","opacity","0.7"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(96, 179, 114)"],[1,"mr-1",2,"width","20px","height","20px","background-color","rgb(255, 242, 170)"],["id","exampleModal2","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"card-body",2,"height","95%"],[1,"card-title"],[1,"fas","fa-file-alt",2,"margin-right","10px"],[2,"display","flex","justify-content","space-between"],[2,"width","30%","margin-right","10px"],["appearance","outline",1,"full-width"],["disabled","","name","fecha","matInput","",3,"value"],["disabled","","name","usuario","matInput","",3,"value"],["disabled","","name","estado","matInput","","required","",3,"value"],[2,"width","auto","margin-right","10px"],["disabled","","name","estado","matInput","",3,"value"],[1,"row"],[1,"col-sm-6","col-lg-3",2,"padding","10px 20px"],[1,"fas","fa-pencil-alt",2,"margin-right","5px"],["type","button","title","Haz clic para borrar",1,"btn","btn-warning","btn-block",3,"click"],[1,"fas","fa-eraser"],["type","button","title","Haz clic aqu\xed para aprobar",1,"btn","btn-success","btn-block",3,"click"],[1,"fas","fa-thumbs-up"],["type","button","title","Haz clic aqu\xed para rechazar",1,"btn","btn-danger","btn-block",3,"click"],[1,"fas","fa-thumbs-down"],["class","col-sm-8 col-lg-6","style","width: 75%",4,"ngIf"],[1,"modal-footer",2,"background-color","rgb(0, 122, 255)"],["type","button","class","btn btn-success","style","background-color: rgb(10, 8, 94)",3,"click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%",3,"click"],[1,"fas","fa-times"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","exampleModalLabel",1,"modal-title",2,"font-family","Arial, sans-serif","color","white"],[1,"table-responsive","mat-elevation-z8","modal-table",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","iddetalle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","evi"],["matColumnDef","observacion"],["matColumnDef","estado"],["mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","fecha"],["matColumnDef","usua"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%"],[1,"loading-overlay"],["diameter","40"],[3,"value"],[1,"col","text-center",2,"max-height","300px","overflow-y","scroll"],[1,"mat-elevation-z8","table-responsive",2,"margin-bottom","10%"],["type","text","name","filterPost3","placeholder","Buscar por ID de tarea asignada",1,"form-control",3,"formControl","input"],["matColumnDef","id"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","subcriterio"],["matColumnDef","indicadores"],["matColumnDef","descripcion"],["mat-row","",3,"background-color",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"btn","btn-primary","custom-button2",2,"background-color","rgb(58, 156, 156)","margin-right","5%",3,"disabled","click"],[1,"fas","fa-list"],["type","button","mat-icon-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal2",1,"btn","btn-primary","custom-buttonEvaluar",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"disabled","click"],["type","button","mat-icon-button","","type","button",1,"btn","btn-primary","custom-button",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"click"],["type","button","class","btn btn-primary custom-buttonDetalle","mat-icon-button","","style","\n                            background-color: rgb(150, 215, 219);\n                            margin-right: 5%;\n                          ","data-bs-toggle","modal","data-bs-target","#exampleModal3",3,"click",4,"ngIf"],["type","button","mat-icon-button","","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary","custom-buttonDetalle",2,"background-color","rgb(150, 215, 219)","margin-right","5%",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-sm-8","col-lg-6",2,"width","75%"],[3,"ngSubmit"],[2,"display","flex","justify-content","flex-start","gap","10rem"],[1,"form-floating","mb-3",2,"width","45%"],["type","text","id","toUser","name","toUser","required","","placeholder","............","required","",1,"form-control",3,"value","ngModel","ngModelChange"],["for","toUser"],[1,"form-floating","mb-3"],["type","text","id","subject","name","subject","required","","placeholder","............","required","",1,"form-control",2,"margin-right","5%",3,"ngModel","ngModelChange"],["for","subject"],[2,"margin-bottom","10%","height","25px"],[1,"form-floating"],["placeholder","Leave a comment here","id","floatingTextarea2","placeholder","Ingrese alguna observaci\xf3n...........","required","","id","message","name","message","required","","rows","12",1,"form-control","card-textarea",2,"max-height","75px","overflow-y","auto",3,"ngModel","ngModelChange"],["for","message"],[1,"button-group",2,"display","flex","justify-content","center"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-envelope"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[1,"overlay"],[1,"spinner",3,"diameter","strokeWidth","value","mode"],[1,"text",2,"color","white"],["type","button",1,"btn","btn-success",2,"background-color","rgb(10, 8, 94)",3,"click"],[1,"fas","fa-save"],["mat-cell","",3,"ngClass"],["role","button",1,"btn","btn-danger",2,"background-color","red","margin-right","5%",3,"click"],[1,"fa","fa-trash"]],template:function(t,o){1&t&&(i.TgZ(0,"body"),i.YNc(1,rt,4,0,"div",0),i.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"figure",6)(8,"blockquote",7)(9,"h1")(10,"strong"),i._uU(11," LISTADO DE RESPONSABLES "),i.qZA()()()(),i.TgZ(12,"div",8)(13,"span",9),i._uU(14,"Seleccione un responsable"),i.qZA()(),i.TgZ(15,"div",10)(16,"input",11),i.NdJ("ngModelChange",function(s){return o.filterPost=s}),i.qZA()(),i.TgZ(17,"mat-selection-list",12),i.NdJ("selectionChange",function(s){return o.onSelectionChange(s)}),i.YNc(18,st,2,3,"mat-list-option",13),i.ALo(19,"buscarUsuario"),i.YNc(20,ct,4,0,"div",0),i.qZA()()(),i.TgZ(21,"div",14)(22,"div",5)(23,"div",15)(24,"figure",6)(25,"blockquote",7)(26,"h1")(27,"strong"),i._uU(28," EVIDENCIAS ASIGNADAS"),i.qZA()()()()(),i.TgZ(29,"div",16),i.YNc(30,Tt,25,4,"div",17),i.TgZ(31,"div",18)(32,"div",19)(33,"div",20)(34,"div",21),i._UZ(35,"div",22),i.TgZ(36,"span",23),i._uU(37,"Rechazadas"),i.qZA()()(),i.TgZ(38,"div",20)(39,"div",21),i._UZ(40,"div",24),i.TgZ(41,"span",23),i._uU(42,"Aprobadas"),i.qZA()()(),i.TgZ(43,"div",20)(44,"div",21),i._UZ(45,"div",25),i.TgZ(46,"span",23),i._uU(47,"Pendientes"),i.qZA()()()()()()()(),i.TgZ(48,"div",26),i.NdJ("hidden.bs.modal",function(){return o.LimpiarModal()}),i.TgZ(49,"div",27)(50,"div",28)(51,"div",29)(52,"h1",30),i._uU(53," EVALUAR "),i.qZA(),i.TgZ(54,"button",31),i.NdJ("click",function(){return o.LimpiarModal()}),i.qZA()(),i.TgZ(55,"div",32)(56,"div",4)(57,"div",33)(58,"h2",34),i._UZ(59,"i",35),i._uU(60,"Detalles "),i.qZA(),i._UZ(61,"br")(62,"hr"),i.TgZ(63,"div",36)(64,"div",37)(65,"mat-form-field",38)(66,"mat-label"),i._uU(67,"Fecha de revisi\xf3n"),i.qZA(),i._UZ(68,"input",39),i.qZA()(),i.TgZ(69,"div",37)(70,"mat-form-field",38)(71,"mat-label"),i._uU(72,"Usuario Evaluador"),i.qZA(),i._UZ(73,"input",40),i.qZA()(),i.TgZ(74,"div",37)(75,"mat-form-field",38)(76,"mat-label"),i._uU(77,"Estado de Tarea"),i.qZA(),i._UZ(78,"input",41),i.qZA()()(),i.TgZ(79,"div",42)(80,"mat-form-field",38)(81,"mat-label"),i._uU(82,"Descripci\xf3n Tarea"),i.qZA(),i._UZ(83,"input",43),i.qZA()()()(),i.TgZ(84,"div",44)(85,"div",45)(86,"div",4)(87,"div",5)(88,"h3",34),i._UZ(89,"i",46),i.TgZ(90,"strong"),i._uU(91,"OBSERVACIONES"),i.qZA()(),i._UZ(92,"br"),i.TgZ(93,"div",18)(94,"div",20)(95,"button",47),i.NdJ("click",function(){return o.Limpiar()}),i._UZ(96,"i",48),i.qZA(),i.TgZ(97,"button",49),i.NdJ("click",function(){return o.Aprobado(o.evid)}),i._UZ(98,"i",50),i.qZA(),i.TgZ(99,"button",51),i.NdJ("click",function(){return o.Rechazado(o.evid)}),i._UZ(100,"i",52),i.qZA()()()()()(),i.YNc(101,St,23,6,"div",53),i.qZA()(),i.TgZ(102,"div",54),i.YNc(103,Nt,3,1,"button",55),i.TgZ(104,"button",56),i.NdJ("click",function(){return o.LimpiarModal()}),i._UZ(105,"i",57),i._uU(106," Cancelar "),i.qZA()()()()(),i.TgZ(107,"div",58)(108,"div",59)(109,"div",28)(110,"div",29)(111,"h1",60),i._uU(112," OBSERVACIONES "),i.qZA()(),i.TgZ(113,"div",32)(114,"div",61)(115,"table",62),i.ynx(116,63),i.YNc(117,Et,2,0,"th",64),i.YNc(118,yt,2,1,"td",65),i.BQk(),i.ynx(119,66),i.YNc(120,Dt,2,0,"th",64),i.YNc(121,Mt,2,1,"td",65),i.BQk(),i.ynx(122,67),i.YNc(123,wt,2,0,"th",64),i.YNc(124,It,2,1,"td",65),i.BQk(),i.ynx(125,68),i.YNc(126,Rt,2,0,"th",64),i.YNc(127,kt,2,5,"td",69),i.BQk(),i.ynx(128,70),i.YNc(129,Pt,2,0,"th",64),i.YNc(130,Ot,3,4,"td",65),i.BQk(),i.ynx(131,71),i.YNc(132,Yt,2,0,"th",64),i.YNc(133,zt,2,2,"td",65),i.BQk(),i.ynx(134,72),i.YNc(135,Jt,2,0,"th",64),i.YNc(136,Qt,3,0,"td",65),i.BQk(),i.YNc(137,Lt,1,0,"tr",73),i.YNc(138,Bt,1,0,"tr",74),i.qZA(),i.YNc(139,$t,3,1,"ng-container",75),i.qZA()(),i.TgZ(140,"div",54)(141,"button",76),i._UZ(142,"i",57),i._uU(143," Cerrar "),i.qZA()()()()()()()()()),2&t&&(i.xp6(1),i.Q6J("ngIf",o.isLoading),i.xp6(15),i.Q6J("ngModel",o.filterPost),i.xp6(1),i.Q6J("multiple",!1),i.xp6(1),i.Q6J("ngForOf",i.xi3(19,16,o.usuarioResponsable,o.filterPost)),i.xp6(2),i.Q6J("ngIf",o.isLoading),i.xp6(10),i.Q6J("ngIf",o.mostrarBoton),i.xp6(38),i.Q6J("value",o.fechaFormateada),i.xp6(5),i.Q6J("value",o.user.username),i.xp6(5),i.Q6J("value",o.estadoEvi),i.xp6(5),i.Q6J("value",o.evid.descripcion),i.xp6(18),i.Q6J("ngIf",o.mostrar),i.xp6(2),i.Q6J("ngIf",o.verificar),i.xp6(12),i.Q6J("dataSource",o.dataSource4),i.xp6(22),i.Q6J("matHeaderRowDef",o.columnasDetalle),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasDetalle),i.xp6(1),i.Q6J("ngIf",o.noRegistros))},dependencies:[g.mk,g.sg,g.O5,E.RK,x.KE,x.hX,k.Nt,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F,u.oH,P.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,j.Ub,j.vS,F.Ou,g.uU,at.Z],styles:['input[_ngcontent-%COMP%]:disabled, mat-label[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-close[_ngcontent-%COMP%]{background-color:red}.mat-form-field[_ngcontent-%COMP%]{width:100%;height:50px}.message[_ngcontent-%COMP%]{resize:vertical;height:100px}.card-textarea[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.selection-list-container[_ngcontent-%COMP%]{background-color:#f2f2f2;max-height:200px;overflow-y:auto}.custom-button[_ngcontent-%COMP%]{position:relative}.custom-button[_ngcontent-%COMP%]:after{content:"Calificar";position:absolute;top:-30px;left:50%;transform:translate(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-button[_ngcontent-%COMP%]:hover:after{opacity:1}.custom-button2[_ngcontent-%COMP%]{position:relative}.custom-button2[_ngcontent-%COMP%]:after{content:"Ver actividad";position:absolute;top:-30px;left:50%;transform:translate(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-button2[_ngcontent-%COMP%]:hover:after{opacity:1}.pendiente[_ngcontent-%COMP%]{background-color:#f1c9ae}.aprobada[_ngcontent-%COMP%]{background-color:green}.rechazada[_ngcontent-%COMP%]{background-color:red}.custom-buttonEvaluar[_ngcontent-%COMP%]{position:relative}.custom-buttonEvaluar[_ngcontent-%COMP%]:after{content:"Evaluar";position:absolute;top:50%;right:-50%;transform:translateY(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-buttonEvaluar[_ngcontent-%COMP%]:hover:after{opacity:1}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center}.overlay[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center}.spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.text[_ngcontent-%COMP%]{position:absolute;top:65%;left:50%;transform:translate(-50%,-50%);color:#000;font-size:24px;text-align:center;margin:0}.custom-buttonEvaluar[disabled][_ngcontent-%COMP%]:not(.tooltipstered) + .tooltip[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{display:none}.modal-table[_ngcontent-%COMP%]{max-height:calc(100vh - 100px)}.modal-dialog[_ngcontent-%COMP%]{max-width:50%}.modal-content[_ngcontent-%COMP%]{overflow:auto}.custom-buttonDetalle[_ngcontent-%COMP%]{position:relative}.custom-buttonDetalle[_ngcontent-%COMP%]:after{content:"Detalles";position:absolute;top:50%;right:-50%;transform:translateY(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-buttonDetalle[_ngcontent-%COMP%]:hover:after{opacity:1}.mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:100px}.mat-input-element[_ngcontent-%COMP%]{padding:8px 12px;border-radius:4px;border:1px solid #ccc;font-size:14px;transition:border-color .2s}.mat-input-element[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.mat-form-field.mat-focused[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{box-shadow:0 0 6px #007bff80}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;color:#fff}']}),e})();var H=c(7940),Ft=c(8505),Ht=c(262),Gt=c(2843),I=c(3179),Kt=c(9003),Vt=c(5679),Wt=c(253),Xt=c(9921),ie=c(5763),te=c(3242),ee=c(2130),G=c(3546),O=c(9602),oe=c(6805);const ne=["paginator"],ae=["paginator2"],re=["paginator3"];function se(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"C\xe9dula"),i.qZA())}function ce(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.Oqu(t.cedula)}}function le(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Primer Apellido"),i.qZA())}function de(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.primer_apellido," ")}}function ue(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Segundo Apellido"),i.qZA())}function me(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.segundo_apellido," ")}}function pe(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Primer Nombre"),i.qZA())}function he(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.primer_nombre," ")}}function ge(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Segundo Nombre"),i.qZA())}function _e(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.segundo_nombre," ")}}function fe(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Celular"),i.qZA())}function be(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.Oqu(t.celular)}}function ve(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Acciones"),i.qZA())}function Ae(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",110)(1,"button",111),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.seleccionar(s))}),i.TgZ(2,"mat-icon"),i._uU(3,"person_add"),i.qZA()()()}}function Ce(e,n){1&e&&i._UZ(0,"tr",112)}function Ze(e,n){1&e&&i._UZ(0,"tr",113)}function xe(e,n){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," El campo de contrase\xf1a es obligatorio "),i.qZA())}function Te(e,n){if(1&e&&(i.TgZ(0,"option",114),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("value",t.rolId),i.xp6(1),i.hij(" ",t.rolNombre," ")}}function Ue(e,n){1&e&&(i.TgZ(0,"mat-error"),i._uU(1," El campo de selecci\xf3n de rol es obligatorio "),i.qZA())}function Se(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"ID"),i.qZA())}function Ne(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id," ")}}function Ee(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Nombre"),i.qZA())}function ye(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombres," ")}}function De(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Rol"),i.qZA())}function Me(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.rol," ")}}function we(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Usuario"),i.qZA())}function Ie(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.usua," ")}}function Re(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Evidencia"),i.qZA())}function qe(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.evidencias," ")}}function ke(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"ACCIONES"),i.qZA())}function Pe(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",120),i.NdJ("click",function(){i.CHM(t);const a=i.oxw().$implicit,s=i.oxw();return i.KtG(s.editarFecha(a))}),i._UZ(1,"i",121),i._uU(2," Editar "),i.qZA()}}function Oe(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",110)(1,"button",115),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.eliminar(s))}),i._UZ(2,"i",116),i.qZA(),i.TgZ(3,"button",117),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.seleccionarUsuario(s))}),i._UZ(4,"i",118),i.qZA(),i.YNc(5,Pe,3,0,"button",119),i.qZA()}if(2&e){const t=i.oxw();i.xp6(5),i.Q6J("ngIf",t.mostrarBotonEditarFecha)}}function Ye(e,n){1&e&&i._UZ(0,"tr",112)}function ze(e,n){1&e&&i._UZ(0,"tr",113)}function Je(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",64),i.NdJ("click",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.OcultarbotonDetalleEvalucaion())}),i.TgZ(1,"span"),i._uU(2,"Ocultar"),i.qZA(),i.TgZ(3,"mat-icon",122),i._uU(4,"visibility_off"),i.qZA()()}}function Qe(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"RESPONSABLE"),i.qZA())}function Le(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.getRowSpan("usuario",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("usuario",o)),i.xp6(1),i.hij(" ",t.respon," ")}}function Be(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"CRITERIO"),i.qZA())}function $e(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.getRowSpan("criterio",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("criterio",o)),i.xp6(1),i.Oqu(t.crite)}}function je(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"SUBCRITERIO"),i.qZA())}function Fe(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.getRowSpan("subcriterio",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("subcriterio",o)),i.xp6(1),i.Oqu(t.subcrite)}}function He(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"INDICADOR"),i.qZA())}function Ge(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.getRowSpan("evidencia",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("evidencia",o)),i.xp6(1),i.Oqu(t.indi)}}function Ke(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1,"ID"),i.qZA()),2&e){const t=i.oxw(2);i.Udp("display",t.ocultar?"":"none")}}function Ve(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.ocultar&&a.getRowSpan("idasigna",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("idasigna",o)),i.xp6(1),i.hij(" ",t.idevid," ")}}function We(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1,"ID ev"),i.qZA()),2&e){const t=i.oxw(2);i.Udp("display",t.ocultar?"":"none")}}function Xe(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.ocultar&&a.getRowSpan("ideviden",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("ideviden",o)),i.xp6(1),i.hij(" ",t.ideviden," ")}}function io(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"DESCRIPCI\xd3N EVIDENCIA"),i.qZA())}function to(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw(2);i.Udp("display",a.getRowSpan("descripcion",o)?"":"none"),i.uIk("rowspan",a.getRowSpan("descripcion",o)),i.xp6(1),i.hij(" ",t.descev," ")}}function eo(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Fecha Inicio"),i.qZA())}function oo(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,t.ini,"yyyy-MM-dd")," ")}}function no(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"Fecha fin"),i.qZA())}function ao(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,t.fini,"yyyy-MM-dd")," ")}}function ro(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1,"ACCIONES"),i.qZA())}function so(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",110)(1,"button",128),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.EditarAsigna(s))}),i._UZ(2,"i",129),i.qZA(),i.TgZ(3,"button",115),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.eliminarAsignacion(s))}),i._UZ(4,"i",116),i.qZA()()}}function co(e,n){1&e&&i._UZ(0,"tr",112)}function lo(e,n){1&e&&i._UZ(0,"tr",113)}function uo(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",13)(1,"div",75)(2,"figure",1)(3,"blockquote",2)(4,"h1")(5,"strong"),i._uU(6," ASIGNACI\xd3N DE EVIDENCIAS"),i.qZA()()()()(),i.TgZ(7,"div",14)(8,"div",14)(9,"div",53)(10,"input",54),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.buscar=a)}),i.qZA()()(),i.TgZ(11,"div",123)(12,"table",56),i.ALo(13,"responsable"),i.ynx(14,60),i.YNc(15,Qe,2,0,"th",17),i.YNc(16,Le,2,4,"td",99),i.BQk(),i.ynx(17,93),i.YNc(18,Be,2,0,"th",17),i.YNc(19,$e,2,4,"td",99),i.BQk(),i.ynx(20,96),i.YNc(21,je,2,0,"th",17),i.YNc(22,Fe,2,4,"td",99),i.BQk(),i.ynx(23,61),i.YNc(24,He,2,0,"th",17),i.YNc(25,Ge,2,4,"td",99),i.BQk(),i.ynx(26,124),i.YNc(27,Ke,2,2,"th",94),i.YNc(28,Ve,2,4,"td",99),i.BQk(),i.ynx(29,125),i.YNc(30,We,2,2,"th",94),i.YNc(31,Xe,2,4,"td",99),i.BQk(),i.ynx(32,98),i.YNc(33,io,2,0,"th",17),i.YNc(34,to,2,4,"td",99),i.BQk(),i.ynx(35,126),i.YNc(36,eo,2,0,"th",17),i.YNc(37,oo,3,4,"td",18),i.BQk(),i.ynx(38,127),i.YNc(39,no,2,0,"th",17),i.YNc(40,ao,3,4,"td",18),i.BQk(),i.ynx(41,62),i.YNc(42,ro,2,0,"th",17),i.YNc(43,so,5,0,"td",18),i.BQk(),i.YNc(44,co,1,0,"tr",25),i.YNc(45,lo,1,0,"tr",26),i.qZA()()()()}if(2&e){const t=i.oxw();i.xp6(10),i.Q6J("ngModel",t.buscar),i.xp6(2),i.Q6J("dataSource",i.xi3(13,4,t.dataSource4,t.buscar)),i.xp6(32),i.Q6J("matHeaderRowDef",t.columnasEvidenciaAsignacion),i.xp6(1),i.Q6J("matRowDefColumns",t.columnasEvidenciaAsignacion)}}function mo(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1," CRITERIO "),i.qZA()),2&e){const t=i.oxw();i.Udp("display",t.verCriterio?"":"none")}}function po(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw();i.Udp("background-color",t.Color)("display",a.verCriterio&&a.getRowSpan2("subcriterio",o)?"":"none"),i.uIk("rowspan",a.getRowSpan2("criterio",o)),i.xp6(1),i.hij(" ",t.nombsub," ")}}function ho(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1," SUBCRITERIO "),i.qZA()),2&e){const t=i.oxw();i.Udp("display",t.verSubcriterio?"":"none")}}function go(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw();i.Udp("background-color",t.randomColor)("display",a.verSubcriterio&&a.getRowSpan2("subcriterio",o)?"":"none"),i.uIk("rowspan",a.getRowSpan2("subcriterio",o)),i.xp6(1),i.hij(" ",t.nombsub," ")}}function _o(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1," INDICADOR "),i.qZA()),2&e){const t=i.oxw();i.Udp("display",t.verIndicador?"":"none")}}function fo(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw();i.Udp("background-color",t.Colores)("display",a.verIndicador&&a.getRowSpan2("indicador",o)?"":"none"),i.uIk("rowspan",a.getRowSpan2("indicador",o)),i.xp6(1),i.hij(" ",t.nombind," ")}}function bo(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1," DESCRIPCI\xd3N "),i.qZA())}function vo(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw();i.Udp("display",a.getRowSpan2("descripcion",o)?"":"none"),i.uIk("rowspan",a.getRowSpan2("descripcion",o)),i.xp6(1),i.hij(" ",t.descripc," ")}}function Ao(e,n){if(1&e&&(i.TgZ(0,"th",109),i._uU(1,"ID"),i.qZA()),2&e){const t=i.oxw();i.Udp("display",t.ocultar?"":"none")}}function Co(e,n){if(1&e&&(i.TgZ(0,"td",110),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=n.index,a=i.oxw();i.Udp("display",a.ocultar&&a.getRowSpan2("idev",o)?"":"none"),i.xp6(1),i.hij(" ",t.idev," ")}}function Zo(e,n){1&e&&(i.TgZ(0,"th",109),i._uU(1," ASIGNAR "),i.qZA())}function xo(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",110)(1,"button",130),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.AsignaUsuario(s))}),i._UZ(2,"i",131),i.qZA()()}}function To(e,n){1&e&&i._UZ(0,"tr",112)}function Uo(e,n){1&e&&i._UZ(0,"tr",113)}let So=[],No=(()=>{class e{ngAfterViewInit(){this.dataSource2.paginator=this.paginator||null,this.listar(),this.Listado()}constructor(t,o,a,s,l,h,_,b,Yn,zn,Jn,Qn){this.personaService=t,this.modeser=o,this.usuariosService=a,this.criteservice=s,this.fenix_service=l,this.responsableService=h,this.evidenciaService=_,this.asignarEvidenciaService=b,this.formBuilder=Yn,this.login=zn,this.paginatorIntl=Jn,this.notificationService=Qn,this.columnas=["id","nombre","rol","usuario","evidencia","actions"],this.columnasEvidencia=["criterio","subcriterio","indicador","descripcion","idev","actions"],this.columnasEvidenciaAsignacion=["usuario","criterio","subcriterio","evidencia","idasigna","ideviden","descripcion","inicio","fin","actions"],this.rowspanArray=[],this.spans=[],this.spans2=[],this.mostrarBotonEditarFecha=!1,this.itemsPerPageLabel="Datos por p\xe1gina",this.nextPageLabel="Siguiente",this.lastPageLabel="\xdaltima",this.firstPageLabel="Primera",this.previousPageLabel="Anterior",this.rango=(Ln,R,U)=>{if(0==U||0==R)return`0 de ${U}`;const q=Ln*R;return`${q+1} - ${q<(U=Math.max(U,0))?Math.min(q+R,U):q+R} de ${U}`},this.usuarioGuardar=new T.r,this.dataSource2=new r.by,this.dataSource3=[],this.dataSource4=[],this.fenix=new Kt.M,this.listaPersonas=[],this.listaUsuarios=[],this.listaUsuariosResponsables=[],this.listaEvidencias=[],this.verCriterio=!1,this.verSubcriterio=!1,this.verIndicador=!0,this.verDescripcion=!0,this.ocultar=!1,this.listaAsignaEvidencias=[],this.filterPost="",this.buscar="",this.personaSele=new Vt.m,this.evidenciaSele=new N.v,this.usuarioSele=new T.r,this.usuariosEdit=new T.r,this.usuariosEditGuar=new T.r,this.asignacion=new I.Y,this.asignar=new I.Y,this.asignar2=new I.Y,this.asigedit=new I.Y,this.roles=[{rolId:3,rolNombre:"RESPONSABLE"}],this.rol=0,this.mostrarbotonDetalle=!1,this.isLoggedIn=!1,this.user=null,this.noti=new w.U,this.idusuario=null,this.nombre=null,this.nombreasignado=null,this.displayedColumns=["cedula","primer_apellido","segundo_apellido","primer_nombre","segundo_nombre","celular","acciones"],this.dataSource=So,this.formulario=this.formBuilder.group({username:{value:"",disabled:!0},password:["",u.kI.required]}),this.paginatorIntl.nextPageLabel=this.nextPageLabel,this.paginatorIntl.lastPageLabel=this.lastPageLabel,this.paginatorIntl.firstPageLabel=this.firstPageLabel,this.paginatorIntl.previousPageLabel=this.previousPageLabel,this.paginatorIntl.itemsPerPageLabel=this.itemsPerPageLabel,this.paginatorIntl.getRangeLabel=this.rango,this.dataSource2.data=this.listaUsuarios}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.personaService.getPersonas().subscribe(t=>this.listaPersonas=t),this.modeloMax(),this.listar(),this.Listado(),this.ListarAsignacion()}showCriterio(){this.verCriterio=!this.verCriterio}showSubcriterio(){this.verSubcriterio=!this.verSubcriterio}showIndicador(){this.verIndicador=!this.verIndicador}cacheSpan(t,o){for(let a=0;a<this.dataSource4.length;){let s=o(this.dataSource4[a]),l=1;for(let h=a+1;h<this.dataSource4.length&&s===o(this.dataSource4[h]);h++)l++;this.spans2[a]||(this.spans2[a]={}),this.spans2[a][t]=l,a+=l}}getRowSpan(t,o){return this.spans2[o]&&this.spans2[o][t]}EditarAsigna(t){this.idasigna=t.idevid,this.asignar2.fecha_inicio=t.ini,this.asignar2.fecha_fin=t.fini}notificar(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha asignado la evidencia "+this.nombreasignado+" a "+this.nombre,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}notificaruser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" te ha asignado la evidencia "+this.nombreasignado,this.noti.visto=!1,this.noti.usuario=this.idusuario,this.noti.url="/res/evidenasignada",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}notificaradmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha asignado la evidencia "+this.nombreasignado+" a "+this.nombre,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/apruebaAdmin",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}consultarPorNombreCompleto(){null==this.fenix.primer_nombre&&null==this.fenix.primer_apellido||""==this.fenix.primer_nombre&&""==this.fenix.primer_apellido?d().fire("Error","Debe llenar los campos","error"):this.fenix_service.getDocenteByNombresCompletos(this.fenix.primer_nombre,this.fenix.primer_apellido).subscribe(t=>{this.dataSource=t,console.log(this.dataSource)})}consultarPorCedula(){null!=this.fenix.cedula&&""!=this.fenix.cedula?(console.log("si entra"),this.fenix_service.getDocenteByCedula(this.fenix.cedula).subscribe(t=>{this.dataSource=t,console.log(this.dataSource)})):d().fire("Error","Debe ingresar una cedula","error")}isFechaPasada(t){return new Date(t.fecha_fin)<new Date}editarFecha(t){}consultarPorApellido(){null!=this.fenix.primer_apellido&&""!=this.fenix.primer_apellido?this.fenix_service.getDocenteByPrimerApellido(this.fenix.primer_apellido).subscribe(t=>{this.dataSource=t}):d().fire("Error","Debe ingresar un apellido","error")}consultarPrimerNombre(){null!=this.fenix.primer_nombre&&""!=this.fenix.primer_nombre?this.fenix_service.getDocenteByPrimerNombre(this.fenix.primer_nombre).subscribe(t=>{this.dataSource=t}):d().fire("Error","Debe ingresar un nombre","error")}consultarPorPrimerApellidoAndSegundoApellido(){null!=this.fenix.primer_apellido&&""!=this.fenix.primer_apellido||null!=this.fenix.segundo_apellido&&""!=this.fenix.segundo_apellido?this.fenix_service.getDocenteByPrimerApellidoAndSegundoApellido(this.fenix.primer_apellido,this.fenix.segundo_apellido).subscribe(t=>{this.dataSource=t}):d().fire("Error","Debe ingresar un apellido","error")}consultar(){if(this.fenix.primer_nombre&&this.fenix.primer_apellido)this.consultarPorNombreCompleto();else if(this.fenix.cedula)this.consultarPorCedula();else if(this.fenix.primer_apellido&&this.fenix.segundo_apellido)this.consultarPorPrimerApellidoAndSegundoApellido();else if(this.fenix.primer_apellido)this.consultarPorApellido();else{if(!this.fenix.primer_nombre)return void d().fire("Error","Debe ingresar un valor a buscar","error");this.consultarPrimerNombre()}}seleccionar(t){this.personaSele.cedula=t.cedula,this.personaSele.primer_apellido=t.primer_apellido,this.personaSele.segundo_apellido=t.segundo_apellido,this.personaSele.primer_nombre=t.primer_nombre,this.personaSele.segundo_nombre=t.segundo_nombre,this.personaSele.celular=t.celular,this.personaSele.correo=t.correo,this.personaSele.direccion=t.direccion,console.log(this.personaSele),this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.persona=this.personaSele}seleccionarUsuario(t){this.usuarioSele.id=t.id,console.log("id traido "+this.usuarioSele.id),this.usuarioSele.username=t.usua,this.usuarioSele.persona=t.nombres,this.nombre=t.nombres}AsignaUsuario(t){null!=this.asignar.fecha_inicio&&null!=this.asignar.fecha_fin?this.asignar.fecha_inicio>=this.asignar.fecha_fin?d().fire("Error","La fecha de inicio no puede ser mayor a la fecha fin","error"):(this.asignacion.evidencia.id_evidencia=t.idev,this.nombreasignado=t.descripc,this.asignacion.id_modelo=this.id_modelo,this.asignacion.fecha_inicio=this.asignar.fecha_inicio,this.asignacion.fecha_fin=this.asignar.fecha_fin,this.asignacion.usuario.id=this.usuarioSele.id,console.log("Asigna: "+JSON.stringify(this.asignacion)),this.asignarEvidenciaService.createAsigna(this.asignacion).subscribe(o=>{this.idusuario=this.usuarioSele.id,console.log("Nombre asignado "+this.nombreasignado+" Nombre "+this.nombre+" id: "+this.idusuario),this.notificaruser(),this.notificar(),this.notificaradmin(),this.listar(),this.ListarAsignacion(),this.Listado(),d().fire("Exitoso","Se ha completado la asignaci\xf3n con exito","success")},o=>{console.error("Error al asignar usuario",o),d().fire("Error","Ha ocurrido un error","warning")})):d().fire("Error","Debe llenar todos los campos","error")}MostrarBotonDetalleEvalucaion(){this.mostrarbotonDetalle=!0,this.ListarAsignacion()}OcultarbotonDetalleEvalucaion(){this.mostrarbotonDetalle=!1}ListarAsignacion(){this.dataSource4=[],this.spans2=[],this.asignarEvidenciaService.getAsignacion().subscribe(t=>{this.listaAsignaEvidencias=t,this.dataSource4=this.listaAsignaEvidencias,console.log("DAtos as "+JSON.stringify(this.dataSource4)),this.cacheSpan("usuario",o=>o.respon),this.cacheSpan("criterio",o=>o.respon+o.crite),this.cacheSpan("subcriterio",o=>o.respon+o.crite+o.subcrite),this.cacheSpan("evidencia",o=>o.respon+o.crite+o.subcrite+o.indi),this.cacheSpan("idasigna",o=>o.respon+o.crite+o.subcrite+o.indi+o.idevid),this.cacheSpan("ideviden",o=>o.respon+o.crite+o.subcrite+o.indi+o.idevid+o.ideviden),this.cacheSpan("descripcion",o=>o.respon+o.crite+o.subcrite+o.indi+o.idevid+o.ideviden+o.descev)},t=>{console.log("aqui error "+t)})}Actualizarfecha(){null!=this.asignar2.fecha_inicio&&null!=this.asignar2.fecha_fin?this.asignar2.fecha_inicio>=this.asignar2.fecha_fin?d().fire("Error","La fecha de inicio no puede ser mayor a la fecha fin","error"):d().fire({title:"Actualizar",text:"Se cambiaran las fechas de esta asignaci\xf3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Guardar",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&(this.asigedit.id_asignacion_evidencia=this.idasigna,this.asigedit.fecha_inicio=this.asignar2.fecha_inicio,this.asigedit.fecha_fin=this.asignar2.fecha_fin,console.log("Datos actualizar "+JSON.stringify(this.asigedit)),this.asignarEvidenciaService.editarAsigna(this.asigedit).subscribe(o=>{this.Listado(),this.listar(),this.ListarAsignacion()}),d().fire("Actualizado!","Se cambiaron las fechas de las asignaciones.","success"))}):d().fire("Error","Debe llenar todos los campos","error")}Listado(){this.responsableService.getResponsables().subscribe(t=>{this.listaUsuariosResponsables=t,this.dataSource2.data=this.listaUsuariosResponsables,console.log(this.listaUsuariosResponsables)})}seleccionar2(t){this.personaSele=t,this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.persona.id_persona=this.personaSele.id_persona}EditarUsuari(t){this.usuariosEdit=t}limpiarFormulario(){}registrarUsuario(){console.log(this.usuarioGuardar),this.personaService.findByCedula(this.personaSele.cedula).subscribe(t=>{t?(this.usuarioGuardar.username=t.cedula,this.usuarioGuardar.persona=t,this.crearUsuario()):this.personaService.createPersona(this.personaSele).subscribe(o=>{console.log(o),this.usuarioGuardar.username=o.cedula,this.usuarioGuardar.persona=o,this.crearUsuario()},o=>{console.log(o),d().fire({icon:"error",title:"No se pudo registrar persona",text:"Error al registrar!",footer:'<a href=""></a>'})})},t=>{console.error("Error al listar los indicadors:",t)})}crearUsuario(){console.log(this.usuarioGuardar),this.usuariosService.createUsuario(this.usuarioGuardar,this.rol).subscribe(()=>{d().fire("Usuario Registrado!","El usuario ha sido registrado \xe9xitosamente","success"),this.Listado(),this.formulario.reset(),this.formulario.markAsPristine()},t=>{console.log(t),d().fire({icon:"error",title:"No se pudo registrar usuario",text:"Error al registrar!",footer:'<a href=""></a>'})})}guardarUsuario(){this.usuarioGuardar.username=this.personaSele.cedula,this.usuarioGuardar.password=this.formulario.value.password,this.rol=3,console.log(this.usuarioGuardar.username),console.log(this.usuarioGuardar.password),console.log(this.rol),this.usuarioGuardar.username&&this.usuarioGuardar.password&&this.rol?this.usuariosService.obtenerUsuario(this.usuarioGuardar.username).pipe((0,Ft.b)(t=>{t?d().fire("Usuario existente","El usuario ya est\xe1 registrado","warning"):this.registrarUsuario()}),(0,Ht.K)(t=>(console.log(t),d().fire({icon:"error",title:"Error al comprobar usuario",text:"Error al comprobar la existencia del usuario",footer:'<a href=""></a>'}),(0,Gt._)(t)))).subscribe():d().fire("Campos Vacios","Por favor llene todos los campos","warning")}modeloMax(){this.criteservice.getModeMaximo().subscribe(t=>{this.id_modelo=t.id_modelo,this.inicio=t.fecha_inicio,this.fin=t.fecha_fin})}eliminar(t){const o=t.id;d().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.usuariosService.eliminarUsuarioLogic(o).subscribe(s=>{this.Listado()}),d().fire("Eliminado!","Registro eliminado.","success"))})}eliminarAsignacion(t){const o=t.idevid,a=t.ideviden;d().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&(console.log("id_evidencia"+a+"id usuario "+this.user.id+"id modelo "+this.id_modelo),this.asignarEvidenciaService.eliminasigna(o,a,this.user.id,this.id_modelo).subscribe(l=>{this.nombreasignado=t.descev,this.nombre=t.usuario.persona.primer_nombre+" "+t.usuario.persona.primer_apellido,console.log("Nombre eliminar "+this.nombreasignado+" nombres: "+this.nombre),this.notificarelimadmin(),this.notificarelsupern(),this.ListarAsignacion(),this.Listado(),d().fire("Eliminado!","Registro eliminado.","success")},l=>{400===l.status?d().fire("Error",l.error,"error"):(console.error("Error al eliminar el registro:",l),d().fire("Error","No se pudo eliminar el registro.","error"))}))})}notificarelimadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha eliminado la asignacion de la evidencia "+this.nombreasignado+" a "+this.nombre,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}notificarelsupern(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha eliminado la asignacion de la evidencia "+this.nombreasignado+" a "+this.nombre,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/sup/aprobaciones",this.noti.idactividad=0,this.notificationService.crear(this.noti).subscribe(t=>{this.noti=t,console.log("Notificacion guardada")},t=>{console.error("No se pudo guardar la notificaci\xf3n",t)})}Actualizar(t){t.id=this.usuariosEdit.id,d().fire({title:"\xbfDesea modificar los campos?",showCancelButton:!0,confirmButtonText:"SI",denyButtonText:"NO"}).then(o=>{o.isConfirmed?this.usuariosService.actualizar(t.id,t).subscribe(a=>{d().fire("Usuario Modificado!","El usuario ha sido modificado \xe9xitosamente","success"),this.Listado(),this.usuariosEdit=new T.r,this.usuariosEditGuar=new T.r}):d().fire("Se ha cancelado la operaci\xf3n","","info")})}listar(){this.dataSource3=[],this.spans=[],this.evidenciaService.geteviadmin(this.user.id).subscribe(t=>{this.listaEvidencias=t,this.dataSource3=this.listaEvidencias,this.cacheSpan2("criterio",o=>o.nombcri),this.cacheSpan2("subcriterio",o=>o.nombcri+o.nombsub),this.cacheSpan2("indicador",o=>o.nombcri+o.nombsub+o.nombind),this.cacheSpan2("descripcion",o=>o.nombcri+o.nombsub+o.nombind+o.descripc),this.cacheSpan2("idevi",o=>o.nombcri+o.nombsub+o.nombind+o.descripc+o.idev),console.log(t),setTimeout(()=>{this.aplicar()},0)})}aplicar(){this.dataSource3.forEach(t=>{t.randomColor=this.generarColor()}),this.dataSource3.forEach(t=>{t.Colores=this.generarColor2()}),this.dataSource3.forEach(t=>{t.Color=this.generarColor3()})}generarColor(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor2(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}generarColor3(){return`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.3)`}cacheSpan2(t,o){for(let a=0;a<this.dataSource3.length;){let s=o(this.dataSource3[a]),l=1;for(let h=a+1;h<this.dataSource3.length&&s===o(this.dataSource3[h]);h++)l++;this.spans[a]||(this.spans[a]={}),this.spans[a][t]=l,a+=l}}getRowSpan2(t,o){return this.spans[o]&&this.spans[o][t]}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(Wt.J),i.Y36(Xt.y),i.Y36(ie.i),i.Y36(M.X),i.Y36(te.x),i.Y36(Q._),i.Y36(L.u),i.Y36(ee.Z),i.Y36(u.qu),i.Y36(C.r),i.Y36(m.ye),i.Y36(y.U))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-asignacion-evidencia"]],viewQuery:function(t,o){if(1&t&&(i.Gf(ne,5),i.Gf(ae,5),i.Gf(re,5)),2&t){let a;i.iGM(a=i.CRH())&&(o.paginator=a.first),i.iGM(a=i.CRH())&&(o.paginator2=a.first),i.iGM(a=i.CRH())&&(o.paginator3=a.first)}},decls:261,vars:52,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic"],[1,"blockquote","text-dark"],[1,"container"],[1,"col","col-lg-3"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","Ingrese la c\xe9dula","name","cedula",3,"ngModel","ngModelChange"],["matInput","","placeholder","Ingresar un nombre","name","primer_nombre",3,"ngModel","ngModelChange"],["matInput","","placeholder","Ingrese el apellido","name","primer_apellido",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"row",2,"margin-bottom","5%"],[1,"col"],[1,"card"],[1,"card-body"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","cedula"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primer_apellido"],["matColumnDef","segundo_apellido"],["matColumnDef","primer_nombre"],["matColumnDef","segundo_nombre"],["matColumnDef","celular"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["disabled","","type","text","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"value"],[1,"input-group-text"],["disabled","","type","text","aria-label","First name",1,"form-control",3,"value"],["disabled","","type","text","aria-label","Last name",1,"form-control",3,"value"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["required","","formControlName","username","name","username","matInput","","placeholder","Digite su nombre de usuario",3,"value"],["formControlName","password","type","password","matInput","","placeholder","Digite su contrase\xf1a"],[4,"ngIf"],["appearance","fill"],["formControlName","rol","matNativeControl",""],[3,"value",4,"ngFor","ngForOf"],[1,"container","text-center"],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"disabled"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",2,"margin-left","5%"],[1,"fas","fa-times"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"form-group"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"mat-elevation-z8","table-responsive","tabla-container",2,"margin-bottom","5%"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["matColumnDef","nombre"],["matColumnDef","rol"],["matColumnDef","usuario"],["matColumnDef","evidencia"],["matColumnDef","actions"],[1,"container",2,"text-align","left"],["mat-fab","","extended","","color","primary",2,"margin-bottom","5%",3,"click"],["mat-fab","","extended","","color","primary","style","margin-bottom: 5%",3,"click",4,"ngIf"],["class","card",4,"ngIf"],["id","exampleModal4","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content",2,"height","89%"],[1,"modal-header","text-center",2,"background-color","rgb(0, 122, 255)"],[1,"modal-title","font-weight-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"row"],[1,"col-sm-6"],[1,"card-header"],[1,"card-title","text-center"],[1,"col-md-12"],[1,"form-floating","mb-3"],["disabled","","type","text","id","floatingInput",1,"form-control",3,"value"],["for","floatingInput"],[1,"col-md-6"],[1,"date-fields"],["appearance","fill",1,"date-field"],["matInput","","name","fecha_inicio",3,"matDatepicker","ngModel","min","max","ngModelChange"],["matIconSuffix","",3,"for"],["disabled","false"],["dp1",""],["matInput","","name","fecha_fin",3,"matDatepicker","ngModel","min","max","ngModelChange"],["dp2",""],[1,"mat-elevation-z8",2,"margin-bottom","10%"],[1,"btn-tabs"],["mat-button","",1,"btn-tab",3,"ngClass","click"],["matColumnDef","criterio"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","",3,"background-color","display",4,"matCellDef"],["matColumnDef","subcriterio"],["matColumnDef","indicador"],["matColumnDef","descripcion"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","idev"],[1,"modal-footer",2,"background-color","rgb(0, 122, 255)"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"date-edits"],["appearance","fill",1,"date-edit"],["dp3",""],["dp4",""],["mat-raised-button","","color","primary","data-bs-dismiss","modal",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary",2,"background-color","rgb(151, 166, 189)","margin-right","1%",3,"click"],["mat-header-row",""],["mat-row",""],[3,"value"],[1,"btn","btn-danger",2,"margin-right","5%",3,"click"],[1,"fas","fa-user-times"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal4",1,"btn","btn-primary","custom-buttonArchivos",2,"background-color","rgb(32, 67, 165)",3,"click"],[1,"fas","fa-plus-circle"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fas","fa-calendar-alt"],[1,"hide-icon"],[1,"table-responsive","mat-elevation-z8","tabla-container",2,"margin-bottom","5%"],["matColumnDef","idasigna"],["matColumnDef","ideviden"],["matColumnDef","inicio"],["matColumnDef","fin"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary",2,"margin-right","5%",3,"click"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-primary",2,"margin-left","5%",3,"click"],[1,"fas","fa-plus"]],template:function(t,o){if(1&t&&(i.TgZ(0,"body")(1,"div",0)(2,"figure",1)(3,"blockquote",2)(4,"h1")(5,"strong"),i._uU(6," BUSCAR USUARIOS"),i.qZA()()()(),i.TgZ(7,"div",3)(8,"div",4)(9,"form",5)(10,"mat-form-field",6)(11,"mat-label"),i._uU(12,"C\xe9dula:"),i.qZA(),i.TgZ(13,"input",7),i.NdJ("ngModelChange",function(s){return o.fenix.cedula=s}),i.qZA()(),i.TgZ(14,"mat-form-field",6)(15,"mat-label"),i._uU(16,"Primer Nombre:"),i.qZA(),i.TgZ(17,"input",8),i.NdJ("ngModelChange",function(s){return o.fenix.primer_nombre=s}),i.qZA()(),i.TgZ(18,"mat-form-field",6)(19,"mat-label"),i._uU(20,"Primer Apellido:"),i.qZA(),i.TgZ(21,"input",9),i.NdJ("ngModelChange",function(s){return o.fenix.primer_apellido=s}),i.qZA()(),i.TgZ(22,"button",10),i.NdJ("click",function(){return o.consultar()}),i._uU(23," Buscar "),i.TgZ(24,"mat-icon"),i._uU(25,"search"),i.qZA()()()(),i.TgZ(26,"div",11),i._UZ(27,"div",12)(28,"div",12)(29,"div",12),i.qZA()(),i.TgZ(30,"div",13)(31,"div",14)(32,"table",15),i.ynx(33,16),i.YNc(34,se,2,0,"th",17),i.YNc(35,ce,2,1,"td",18),i.BQk(),i.ynx(36,19),i.YNc(37,le,2,0,"th",17),i.YNc(38,de,2,1,"td",18),i.BQk(),i.ynx(39,20),i.YNc(40,ue,2,0,"th",17),i.YNc(41,me,2,1,"td",18),i.BQk(),i.ynx(42,21),i.YNc(43,pe,2,0,"th",17),i.YNc(44,he,2,1,"td",18),i.BQk(),i.ynx(45,22),i.YNc(46,ge,2,0,"th",17),i.YNc(47,_e,2,1,"td",18),i.BQk(),i.ynx(48,23),i.YNc(49,fe,2,0,"th",17),i.YNc(50,be,2,1,"td",18),i.BQk(),i.ynx(51,24),i.YNc(52,ve,2,0,"th",17),i.YNc(53,Ae,4,0,"td",18),i.BQk(),i.YNc(54,Ce,1,0,"tr",25),i.YNc(55,Ze,1,0,"tr",26),i.qZA(),i.TgZ(56,"div",27),i.NdJ("hidden.bs.modal",function(){return o.limpiarFormulario()}),i.TgZ(57,"div",28)(58,"div",29)(59,"div",30)(60,"h1",31),i._uU(61," Asignar Usuario Responsable "),i.qZA(),i.TgZ(62,"button",32),i.NdJ("click",function(){return o.limpiarFormulario()}),i.qZA()(),i.TgZ(63,"div",33)(64,"div",34)(65,"span",35),i._uU(66,"C\xe9dula"),i.qZA(),i._UZ(67,"input",36),i.qZA(),i.TgZ(68,"div",34)(69,"span",37),i._uU(70,"Nombre y apellido"),i.qZA(),i._UZ(71,"input",38)(72,"input",39),i.qZA(),i._UZ(73,"hr"),i.TgZ(74,"mat-card-header")(75,"mat-card-title"),i._uU(76,"Ingrese los datos para el nuevo usuario"),i.qZA()(),i._UZ(77,"hr"),i.TgZ(78,"form",40),i.NdJ("ngSubmit",function(){return o.guardarUsuario()}),i.TgZ(79,"mat-form-field",41)(80,"mat-label"),i._uU(81,"Nombre de usuario"),i.qZA(),i._UZ(82,"input",42),i.qZA(),i.TgZ(83,"mat-form-field",41)(84,"mat-label"),i._uU(85,"Contrase\xf1a"),i.qZA(),i._UZ(86,"input",43),i.YNc(87,xe,2,0,"mat-error",44),i.qZA(),i.TgZ(88,"mat-form-field",45)(89,"mat-label"),i._uU(90,"ROL"),i.qZA(),i.TgZ(91,"select",46),i.YNc(92,Te,2,2,"option",47),i.qZA(),i.YNc(93,Ue,2,0,"mat-error",44),i.qZA(),i.TgZ(94,"div",48)(95,"button",49)(96,"mat-icon"),i._uU(97,"save"),i.qZA(),i._uU(98,"Registrar "),i.qZA(),i.TgZ(99,"button",50),i._UZ(100,"i",51),i._uU(101," Cancelar "),i.qZA()()()()()()()()(),i.TgZ(102,"blockquote",52)(103,"h1")(104,"strong"),i._uU(105," LISTADO DE RESPONSABLES"),i.qZA()()(),i.TgZ(106,"div",13)(107,"div",14)(108,"div",14)(109,"div",53)(110,"input",54),i.NdJ("ngModelChange",function(s){return o.filterPost=s}),i.qZA()()(),i.TgZ(111,"div",55)(112,"table",56),i.ALo(113,"responsable"),i.ynx(114,57),i.YNc(115,Se,2,0,"th",17),i.YNc(116,Ne,2,1,"td",18),i.BQk(),i.ynx(117,58),i.YNc(118,Ee,2,0,"th",17),i.YNc(119,ye,2,1,"td",18),i.BQk(),i.ynx(120,59),i.YNc(121,De,2,0,"th",17),i.YNc(122,Me,2,1,"td",18),i.BQk(),i.ynx(123,60),i.YNc(124,we,2,0,"th",17),i.YNc(125,Ie,2,1,"td",18),i.BQk(),i.ynx(126,61),i.YNc(127,Re,2,0,"th",17),i.YNc(128,qe,2,1,"td",18),i.BQk(),i.ynx(129,62),i.YNc(130,ke,2,0,"th",17),i.YNc(131,Oe,6,1,"td",18),i.BQk(),i.YNc(132,Ye,1,0,"tr",25),i.YNc(133,ze,1,0,"tr",26),i.qZA()(),i.TgZ(134,"div",63)(135,"button",64),i.NdJ("click",function(){return o.MostrarBotonDetalleEvalucaion()}),i.TgZ(136,"mat-icon"),i._uU(137,"list"),i.qZA(),i._uU(138," LISTADO DE ASIGNACIONES "),i.qZA(),i.YNc(139,Je,5,0,"button",65),i.qZA(),i.YNc(140,uo,46,7,"div",66),i.TgZ(141,"div",67)(142,"div",68)(143,"div",69)(144,"div",70)(145,"strong")(146,"h1",71),i._uU(147," Asignar Evidencia "),i.qZA()(),i._UZ(148,"button",72),i.qZA(),i.TgZ(149,"div",33)(150,"div",73)(151,"div",74)(152,"div",13)(153,"div",75)(154,"h2",76),i._uU(155,"Usuario Seleccionado"),i.qZA()(),i.TgZ(156,"div",14)(157,"div",73)(158,"div",77)(159,"div",78),i._UZ(160,"input",79),i.TgZ(161,"label",80),i._uU(162,"Usuario"),i.qZA()()(),i.TgZ(163,"div",81)(164,"div",78),i._UZ(165,"input",79),i.TgZ(166,"label",80),i._uU(167,"Nombres"),i.qZA()()()(),i.TgZ(168,"div",82)(169,"mat-form-field",83)(170,"mat-label"),i._uU(171,"Fecha Inicial:"),i.qZA(),i.TgZ(172,"input",84),i.NdJ("ngModelChange",function(s){return o.asignar.fecha_inicio=s}),i.qZA(),i.TgZ(173,"mat-hint"),i._uU(174,"MM/DD/YYYY"),i.qZA(),i._UZ(175,"mat-datepicker-toggle",85)(176,"mat-datepicker",86,87),i.qZA(),i.TgZ(178,"mat-form-field",83)(179,"mat-label"),i._uU(180,"Fecha Final:"),i.qZA(),i.TgZ(181,"input",88),i.NdJ("ngModelChange",function(s){return o.asignar.fecha_fin=s}),i.qZA(),i.TgZ(182,"mat-hint"),i._uU(183,"MM/DD/YYYY"),i.qZA(),i._UZ(184,"mat-datepicker-toggle",85)(185,"mat-datepicker",86,89),i.qZA()()()()(),i.TgZ(187,"div",74)(188,"div",13)(189,"div",75)(190,"h2"),i._uU(191,"Listado de Evidencias"),i.qZA()(),i.TgZ(192,"div",14)(193,"div",90)(194,"div",91)(195,"button",92),i.NdJ("click",function(){return o.showCriterio()}),i._uU(196," Criterio "),i.qZA(),i.TgZ(197,"button",92),i.NdJ("click",function(){return o.showSubcriterio()}),i._uU(198," Subcriterio "),i.qZA(),i.TgZ(199,"button",92),i.NdJ("click",function(){return o.showIndicador()}),i._uU(200," Indicador "),i.qZA()(),i.TgZ(201,"table",56),i.ynx(202,93),i.YNc(203,mo,2,2,"th",94),i.YNc(204,po,2,6,"td",95),i.BQk(),i.ynx(205,96),i.YNc(206,ho,2,2,"th",94),i.YNc(207,go,2,6,"td",95),i.BQk(),i.ynx(208,97),i.YNc(209,_o,2,2,"th",94),i.YNc(210,fo,2,6,"td",95),i.BQk(),i.ynx(211,98),i.YNc(212,bo,2,0,"th",17),i.YNc(213,vo,2,4,"td",99),i.BQk(),i.ynx(214,100),i.YNc(215,Ao,2,2,"th",94),i.YNc(216,Co,2,3,"td",99),i.BQk(),i.ynx(217,62),i.YNc(218,Zo,2,0,"th",17),i.YNc(219,xo,3,0,"td",18),i.BQk(),i.YNc(220,To,1,0,"tr",25),i.YNc(221,Uo,1,0,"tr",26),i.qZA()()()()()()(),i.TgZ(222,"div",101)(223,"button",102),i._UZ(224,"i",51),i._uU(225," Cerrar "),i.qZA()()()()()()()(),i.TgZ(226,"div",103)(227,"div",28)(228,"div",29)(229,"div",70)(230,"strong")(231,"h1",71),i._uU(232," Editar Fechas "),i.qZA()(),i._UZ(233,"button",72),i.qZA(),i.TgZ(234,"div",33)(235,"div",104)(236,"mat-form-field",105)(237,"mat-label"),i._uU(238,"Fecha Inicial:"),i.qZA(),i.TgZ(239,"input",84),i.NdJ("ngModelChange",function(s){return o.asignar2.fecha_inicio=s}),i.qZA(),i.TgZ(240,"mat-hint"),i._uU(241,"MM/DD/YYYY"),i.qZA(),i._UZ(242,"mat-datepicker-toggle",85)(243,"mat-datepicker",86,106),i.qZA(),i.TgZ(245,"mat-form-field",105)(246,"mat-label"),i._uU(247,"Fecha Final:"),i.qZA(),i.TgZ(248,"input",88),i.NdJ("ngModelChange",function(s){return o.asignar2.fecha_fin=s}),i.qZA(),i.TgZ(249,"mat-hint"),i._uU(250,"MM/DD/YYYY"),i.qZA(),i._UZ(251,"mat-datepicker-toggle",85)(252,"mat-datepicker",86,107),i.qZA()(),i.TgZ(254,"div",48)(255,"button",108),i.NdJ("click",function(){return o.Actualizarfecha()}),i.TgZ(256,"mat-icon"),i._uU(257,"save"),i.qZA(),i._uU(258,"Guardar "),i.qZA(),i.TgZ(259,"button",50),i._uU(260," Cancelar "),i.qZA()()()()()()()),2&t){const a=i.MAs(177),s=i.MAs(186),l=i.MAs(244),h=i.MAs(253);let _,b;i.xp6(13),i.Q6J("ngModel",o.fenix.cedula),i.xp6(4),i.Q6J("ngModel",o.fenix.primer_nombre),i.xp6(4),i.Q6J("ngModel",o.fenix.primer_apellido),i.xp6(11),i.Q6J("dataSource",o.dataSource),i.xp6(22),i.Q6J("matHeaderRowDef",o.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",o.displayedColumns),i.xp6(12),i.Q6J("value",o.personaSele.cedula),i.xp6(4),i.Q6J("value",o.personaSele.primer_nombre),i.xp6(1),i.Q6J("value",o.personaSele.primer_apellido),i.xp6(6),i.Q6J("formGroup",o.formulario),i.xp6(4),i.Q6J("value",o.personaSele.cedula),i.xp6(5),i.Q6J("ngIf",(null==(_=o.formulario.get("password"))?null:_.invalid)&&(null==(_=o.formulario.get("password"))?null:_.touched)),i.xp6(5),i.Q6J("ngForOf",o.roles),i.xp6(1),i.Q6J("ngIf",(null==(b=o.formulario.get("rol"))?null:b.invalid)&&(null==(b=o.formulario.get("rol"))?null:b.touched)),i.xp6(2),i.Q6J("disabled",o.formulario.invalid),i.xp6(15),i.Q6J("ngModel",o.filterPost),i.xp6(2),i.Q6J("dataSource",i.xi3(113,49,o.dataSource2.data,o.filterPost)),i.xp6(20),i.Q6J("matHeaderRowDef",o.columnas),i.xp6(1),i.Q6J("matRowDefColumns",o.columnas),i.xp6(6),i.Q6J("ngIf",o.mostrarbotonDetalle),i.xp6(1),i.Q6J("ngIf",o.mostrarbotonDetalle),i.xp6(20),i.Q6J("value",o.usuarioSele.username),i.xp6(5),i.Q6J("value",o.usuarioSele.persona),i.xp6(7),i.Q6J("matDatepicker",a)("ngModel",o.asignar.fecha_inicio)("min",o.inicio)("max",o.fin),i.xp6(3),i.Q6J("for",a),i.xp6(6),i.Q6J("matDatepicker",s)("ngModel",o.asignar.fecha_fin)("min",o.inicio)("max",o.fin),i.xp6(3),i.Q6J("for",s),i.xp6(11),i.Q6J("ngClass",o.verCriterio?"selected":""),i.xp6(2),i.Q6J("ngClass",o.verSubcriterio?"selected":""),i.xp6(2),i.Q6J("ngClass",o.verIndicador?"selected":""),i.xp6(2),i.Q6J("dataSource",o.dataSource3),i.xp6(19),i.Q6J("matHeaderRowDef",o.columnasEvidencia),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasEvidencia),i.xp6(18),i.Q6J("matDatepicker",l)("ngModel",o.asignar2.fecha_inicio)("min",o.inicio)("max",o.fin),i.xp6(3),i.Q6J("for",l),i.xp6(6),i.Q6J("matDatepicker",h)("ngModel",o.asignar2.fecha_fin)("min",o.inicio)("max",o.fin),i.xp6(3),i.Q6J("for",h)}},dependencies:[g.mk,g.sg,g.O5,E.lW,E.RK,E.cs,x.KE,x.hX,x.bx,x.TO,x.R9,k.Nt,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F,u.sg,u.u,G.dk,G.n5,P.Hw,O.Mq,O.hl,O.nW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,g.uU,oe.d],styles:['.cdk-overlay-container{z-index:2000}.tabla-container[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.date-fields[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.date-field[_ngcontent-%COMP%]{flex-basis:calc(33.33% - 10px);width:calc(33.33% - 10px)}.date-edits[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.date-edit[_ngcontent-%COMP%]{width:100%;max-width:300px;margin:10px}.btn-tabs[_ngcontent-%COMP%]{display:flex}.btn-tab[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#dca500;color:#000;font-weight:700;transform-origin:top right;transform:skew(-20deg);margin-right:-10px;cursor:pointer;transition:background-color .3s ease-in-out,color .3s ease-in-out}.btn-tab.selected[_ngcontent-%COMP%]{background-color:#044c9b;color:#fff}.modal-table[_ngcontent-%COMP%]{max-height:calc(100vh - 100px)}input[_ngcontent-%COMP%]:disabled, mat-label[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-close[_ngcontent-%COMP%]{background-color:red}.mat-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.custom-buttonArchivos[_ngcontent-%COMP%]{position:relative}.custom-buttonArchivos[_ngcontent-%COMP%]:after{content:"Asignar";position:absolute;top:-5px;left:50%;transform:translate(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-buttonArchivos[_ngcontent-%COMP%]:hover:after{opacity:1}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}']}),e})();var Eo=c(7160),K=c(2802),yo=c(3224),Do=c(3891),D=c(7084);function Mo(e,n){1&e&&(i.TgZ(0,"div",80),i._UZ(1,"mat-spinner",81),i.TgZ(2,"p"),i._uU(3,"Cargando..."),i.qZA()())}function wo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ID"),i.qZA())}function Io(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_actividad," ")}}function Ro(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"NOMBRE"),i.qZA())}function qo(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombre," ")}}function ko(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function Po(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function Oo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"FECHA DE INICIO"),i.qZA())}function Yo(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.fecha_inicio," ")}}function zo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"FECHA FINAL"),i.qZA())}function Jo(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.fecha_fin," ")}}function Qo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ACCIONES"),i.qZA())}function Lo(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",87),i.NdJ("click",function(){i.CHM(t);const a=i.oxw().$implicit,s=i.oxw();return i.KtG(s.seleccionarTareaDetalle(a))}),i.TgZ(1,"mat-icon"),i._uU(2,"help"),i.qZA()()}}function Bo(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",83)(1,"button",84),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.listarArchivo(s))}),i.TgZ(2,"mat-icon"),i._uU(3,"visibility"),i.qZA()(),i.TgZ(4,"button",85),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.seleccionarArchivo(s))}),i.TgZ(5,"mat-icon"),i._uU(6,"star"),i.qZA()(),i.YNc(7,Lo,3,0,"button",86),i.qZA()}if(2&e){const t=n.$implicit;i.xp6(4),i.Q6J("disabled","Aprobada"===t.estado),i.xp6(3),i.Q6J("ngIf","pendiente"!==t.estado)}}function $o(e,n){1&e&&i._UZ(0,"tr",88)}function jo(e,n){if(1&e&&i._UZ(0,"tr",89),2&e){const t=n.$implicit,o=i.oxw();i.Udp("background-color",o.getColorByEstado(t.estado))}}function Fo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ID"),i.qZA())}function Ho(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_archivo," ")}}function Go(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"NOMBRE"),i.qZA())}function Ko(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.nombre," ")}}function Vo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"DESCRIPCI\xd3N"),i.qZA())}function Wo(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.descripcion," ")}}function Xo(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ENLACE"),i.qZA())}function tn(e,n){if(1&e&&(i.TgZ(0,"td",83)(1,"a",90),i._uU(2),i.qZA()()),2&e){const t=n.$implicit,o=i.oxw();i.xp6(1),i.Q6J("href",t.enlace,i.LSH)("download",o.obtenerNombreArchivo(t.enlace)),i.xp6(1),i.hij(" ",t.enlace," ")}}function en(e,n){1&e&&i._UZ(0,"tr",88)}function on(e,n){1&e&&i._UZ(0,"tr",89)}function nn(e,n){if(1&e&&(i.TgZ(0,"div",108)(1,"div",109),i._UZ(2,"mat-progress-spinner",110),i.TgZ(3,"h1",111),i._uU(4," Enviando correo... "),i.qZA()()()),2&e){const t=i.oxw(2);i.xp6(2),i.Q6J("diameter",150)("strokeWidth",5)("value",t.spinnerValue)("mode","determinate")}}function an(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"div",91)(1,"div",8)(2,"div",9)(3,"form",92),i.NdJ("ngSubmit",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.enviar())}),i.TgZ(4,"div",93)(5,"div",94)(6,"input",95),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.toUser=a)}),i.qZA(),i.TgZ(7,"label",96),i._uU(8,"Para:"),i.qZA()(),i.TgZ(9,"div",97)(10,"input",98),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.subject=a)}),i.qZA(),i.TgZ(11,"label",99),i._uU(12,"Asunto:"),i.qZA()()(),i.TgZ(13,"div",100)(14,"div",101)(15,"textarea",102),i.NdJ("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.message=a)})("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.observacion=a)})("ngModelChange",function(a){i.CHM(t);const s=i.oxw();return i.KtG(s.observaciones.observacion=a)}),i.qZA(),i.TgZ(16,"label",103),i._uU(17,"Comentario"),i.qZA()()(),i.TgZ(18,"div",104)(19,"button",105),i._UZ(20,"i",106),i._uU(21," Enviar "),i.qZA()()(),i.YNc(22,nn,5,4,"div",107),i.qZA()()()}if(2&e){const t=i.oxw();i.xp6(6),i.Q6J("value",t.correoEnviar)("ngModel",t.toUser),i.xp6(4),i.Q6J("ngModel",t.subject),i.xp6(5),i.Q6J("ngModel",t.message)("ngModel",t.observacion)("ngModel",t.observaciones.observacion),i.xp6(7),i.Q6J("ngIf",t.isSending)}}function rn(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"button",112),i.NdJ("click",function(){i.CHM(t);const a=i.oxw();return i.KtG(a.guardarap())}),i._UZ(1,"i",113),i._uU(2," Guardar "),i.qZA()}if(2&e){const t=i.oxw();i.uIk("data-bs-dismiss",t.verificar?"modal":null)}}function sn(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ID"),i.qZA())}function cn(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.id_observacion," ")}}function ln(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"OBSERVACI\xd3N"),i.qZA())}function dn(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.observacion," ")}}function un(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ACTIVIDAD"),i.qZA())}function mn(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.actividad.nombre," ")}}function pn(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ESTADO"),i.qZA())}const hn=function(e){return{"background-color":e}};function gn(e,n){if(1&e&&(i.TgZ(0,"td",114),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.Q6J("ngStyle",i.VKq(2,hn,"Aprobada"===t.actividad.estado?"green":"red")),i.xp6(1),i.hij(" ",t.actividad.estado," ")}}function _n(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"USUARIO EVALUADOR"),i.qZA())}function fn(e,n){if(1&e&&(i.TgZ(0,"td",83),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.AsE(" ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_nombre," ",null==t||null==t.usuario||null==t.usuario.persona?null:t.usuario.persona.primer_apellido," ")}}function bn(e,n){1&e&&(i.TgZ(0,"th",82),i._uU(1,"ACCIONES"),i.qZA())}function vn(e,n){if(1&e){const t=i.EpF();i.TgZ(0,"td",83)(1,"button",115),i.NdJ("click",function(){const s=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.Eliminar(s))}),i._UZ(2,"i",116),i.qZA()()}}function An(e,n){1&e&&i._UZ(0,"tr",88)}function Cn(e,n){1&e&&i._UZ(0,"tr",89)}function Zn(e,n){if(1&e&&(i.ynx(0),i.TgZ(1,"p"),i._uU(2),i.qZA(),i.BQk()),2&e){const t=i.oxw();i.xp6(2),i.Oqu(t.noRegistros)}}let xn=(()=>{class e{constructor(t,o,a,s,l,h,_,b){this.services=t,this.router=o,this.detalleEvaluaService=a,this.emailService=s,this.archivo=l,this.login=h,this.notificationService=_,this.criteriosService=b,this.columnas=["idactividad","nombre","descripcion","fechainicio","fechafin","actions"],this.columnasArchi=["idArchivo","nombreArchi","descripcionArchi","enlace"],this.verificar=!1,this.columnasObservaciones=["id","observacion","actividad","estado","usuario","acciones"],this.isLoadingPage=!0,this.aprobado=!1,this.archivoSeleccionado="",this.panelOpenState=!1,this.isSending=!1,this.spinnerValue=0,this.maxTime=30,this.mostrarbotonDetalle=!1,this.evidencia=new N.v,this.evidencia2=new N.v,this.dataSource=new r.by,this.dataSource2=new r.by,this.dataSource3=new r.by,this.usuarioCorreo=new T.r,this.issloading=!0,this.isLinear=!0,this.toUser="",this.subject="",this.message="",this.mostrar=!1,this.fechaActual=new Date,this.fechaFormateada=this.fechaActual.toLocaleDateString("es-ES"),this.estadoEvi="",this.listadoActividad=[],this.archivoSe=[],this.nombreActividad="",this.isLoggedIn=!1,this.user=null,this.noti=new w.U,this.idusuario=null,this.nombre=null,this.correoEnviar="",this.disableEvaluar=!1,this.observaciones=new Eo.K,this.observacion="",this.idEviden="",this.actividadSeleccionada=new K.D,this.actividad=new K.D,this.listadoObservaciones=[]}ngAfterViewInit(){this.dataSource.paginator=this.paginator||null}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(o=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()});const t=localStorage.getItem("eviden");this.id_ev=Number(t),console.log("traido ev "+t),this.compa!=this.id_ev&&(this.compa=this.id_ev,this.modeloMax()),this.modeloMax()}modeloMax(){this.criteriosService.getModeMaximo().subscribe(t=>{this.id_modelo=t.id_modelo,this.inicio()})}inicio(){if(this.isLoadingPage=!0,0!=this.id_ev)console.log("evid "+this.id_ev),this.criteriosService.getCorreo(this.id_modelo,this.id_ev).subscribe(t=>{this.correoEnviar=t.correo,this.toUser=this.correoEnviar,this.listar(),this.isLoadingPage=!1});else{const t=history.state.data,o=history.state.usuarioEnviar;this.evidencia=t,this.id_ev=this.evidencia.id_evidencia,this.usuarioCorreo=o,this.correoEnviar=this.usuarioCorreo.persona.correo,this.toUser=this.correoEnviar,null==this.evidencia&&(this.router.navigate(["user-dashboard"]),location.replace("/use/user-dashboard")),null==this.usuarioCorreo&&(this.router.navigate(["user-dashboard"]),location.replace("/use/user-dashboard")),this.listar()}}seleccionarArchivo(t){this.archivoSeleccionado=t.nombre,this.actividadSeleccionada=t}notificarrechazo(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificarrechazouser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado tu actividad "+this.archivoSeleccionado,this.noti.visto=!1,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev;const t=localStorage.getItem("idUsuario"),o=Number(t);this.noti.usuario=o,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificarrechazoadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha rechazado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificaraprobacion(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificaraprobacionuser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" aprobo tu actividad "+this.archivoSeleccionado,this.noti.visto=!1,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev;const t=localStorage.getItem("idUsuario"),o=Number(t);this.noti.usuario=o,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaraprobacionadmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificar(){this.noti.fecha=new Date,this.noti.rol="SUPERADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha aprobado la actividad "+this.archivoSeleccionado+" de "+t,this.noti.usuario=0,this.noti.url="/sup/detalle",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}notificaruser(){this.noti.fecha=new Date,this.noti.rol="",this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" agrego una observaci\xf3n a tu evidencia "+this.archivoSeleccionado,this.noti.visto=!1;const t=localStorage.getItem("idUsuario"),o=Number(t);this.noti.usuario=o,this.noti.url="/res/ActividadesResponsable",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(a=>{this.noti=a,console.log("Notificacion guardada")},a=>{console.error("No se pudo guardar la notificaci\xf3n",a)})}notificaradmin(){this.noti.fecha=new Date,this.noti.rol="ADMIN";const t=localStorage.getItem("nombres");this.noti.mensaje=this.user.persona.primer_nombre+" "+this.user.persona.primer_apellido+" ha agregado una observacion para "+this.archivoSeleccionado+" de "+t,this.noti.visto=!1,this.noti.usuario=0,this.noti.url="/adm/detalleAprobarRechazar",this.noti.idactividad=this.id_ev,this.notificationService.crear(this.noti).subscribe(o=>{this.noti=o,console.log("Notificacion guardada")},o=>{console.error("No se pudo guardar la notificaci\xf3n",o)})}guardarap(){"Rechazada"==this.estadoEvi?(this.Guardar(),this.verificar=!1):"Aprobada"==this.estadoEvi?this.Guardar():d().fire("La evidencia fue rechazada","Debe enviar el correo con la observaci\xf3n","warning")}listar(){console.log("evid a listar"+this.id_ev),this.services.getEviAsig(this.id_ev).subscribe(t=>{this.listadoActividad=t,console.log(this.listadoActividad),this.dataSource.data=this.listadoActividad,0<this.dataSource.data.length?console.log("idActividad:",this.dataSource.data[0].id_actividad):console.log("\xcdndice fuera de rango")})}seleccionarTareaDetalle(t){const o=t.id_actividad;this.noRegistros=null,this.services.getObservacionByActi(o).subscribe(a=>{this.listadoObservaciones=a,a.length>0?(this.dataSource3.data=this.listadoObservaciones,this.disableEvaluar=!0):this.noRegistros="No hay registros disponibles."}),this.listar()}listarArchivo(t){this.archivo.getarchivoActividad(t.id_actividad).subscribe(o=>{this.archivoSe=o,this.dataSource2.data=this.archivoSe}),this.nombreActividad=t.nombre}goBack(){this.router.navigate(["/adm/apruebaAdmin"])}Aprobado(){d().fire({icon:"success",title:"La actividad ha sido aprobada",showConfirmButton:!1,timer:1500}),this.aprobado=!0,this.verificar=!0,this.mostrar=!1,this.estadoEvi="Aprobada",this.observacion="Ninguna",this.notificaraprobacion(),this.notificaraprobacionadmin(),this.notificaraprobacionuser(),this.disableEvaluar=!0,this.observaciones.observacion=this.observacion="Ninguna"}Rechazado(){this.aprobado=!1,this.verificar=!1,d().fire({icon:"error",title:"La actividad ha sido rechazada."}),this.estadoEvi="Rechazada",this.mostrar=!this.mostrar,this.disableEvaluar=!0}obtenerNombreArchivo(t){return t.substring(t.lastIndexOf("/")+1)}Guardar(){this.aprobado?(this.actividadSeleccionada.estado=this.estadoEvi,this.actividadSeleccionada.usuario=null,console.log(this.actividadSeleccionada),this.actividadSeleccionada?this.services.update(this.actividadSeleccionada.id_actividad,this.actividadSeleccionada).subscribe(t=>{this.listar()}):console.log("id_actividad es undefined"),this.observaciones.observacion=this.observacion,this.observaciones.actividad.id_actividad=this.actividadSeleccionada.id_actividad,this.observaciones.usuario=this.user.id,this.services.createObservacion(this.observaciones).subscribe(t=>d().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success"))):""==this.observaciones.observacion||null==this.observaciones.observacion||""==this.actividadSeleccionada.estado||null==this.actividadSeleccionada.estado?d().fire({title:"Alerta",text:"No se ha agregado ninguna observaci\xf3n por favor agregue alguna ",icon:"warning"}):(this.actividadSeleccionada.estado=this.estadoEvi,this.actividadSeleccionada.usuario=null,console.log(this.actividadSeleccionada),this.actividadSeleccionada?this.services.update(this.actividadSeleccionada.id_actividad,this.actividadSeleccionada).subscribe(t=>{this.listar()}):console.log("id_actividad es undefined"),this.observaciones.observacion=this.observacion,this.observaciones.actividad.id_actividad=this.actividadSeleccionada.id_actividad,this.observaciones.usuario=this.user.id,this.services.createObservacion(this.observaciones).subscribe(t=>d().fire("Guardado con \xe9xito!","Observaciones guardado con \xe9xito","success"))),this.LimpiarModal()}getColorByEstado(t){return"pendiente"===t?"rgba(255, 242, 170)":"Aprobada"===t?"rgba(96, 179, 114)":"Rechazada"===t?"rgba(253, 79, 56)":""}Eliminar(t){const o=t.id_observacion;d().fire({title:"Desea eliminarlo?",text:"No podr\xe1 revertirlo!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminarlo!"}).then(a=>{a.isConfirmed&&(this.services.eliminarObser(o).subscribe(s=>{}),this.listar(),d().fire("Eliminado!","Registro eliminado.","success"))})}enviar(){const t=new Date;this.isSending=!0,this.spinnerInterval=setInterval(()=>{const a=((new Date).getTime()-t.getTime())/1e3;this.spinnerValue=Math.round(a/this.maxTime*100),a>=this.maxTime&&clearInterval(this.spinnerInterval)},1e3),this.emailService.sendEmail([this.toUser],this.subject,this.message).subscribe(o=>{clearInterval(this.spinnerInterval),this.isSending=!1;const s=((new Date).getTime()-t.getTime())/1e3;this.notificarrechazo(),this.notificarrechazoadmin(),this.notificarrechazouser(),console.log("Email sent successfully! Time taken:",s,"seconds"),console.log("Email sent successfully!"),this.verificar=!0,d().fire({title:"El correo se ha enviado con \xe9xito",timer:2e3,timerProgressBar:!0,width:"20%",customClass:"custom-alert",position:"top-end",iconHtml:'<span class="custom-icon"><i class="fas fa-check-circle" style="color: green;" ></i></span>',showConfirmButton:!1,didOpen:l=>{l.addEventListener("mouseenter",d().stopTimer),l.addEventListener("mouseleave",d().resumeTimer)}})},o=>{clearInterval(this.spinnerInterval),this.isSending=!1,d().fire({title:"No se pudo enviar el correo electr\xf3nico",timer:2e3,width:"20%",customClass:"custom-alert my-custom-swal",timerProgressBar:!0,position:"top-end",iconHtml:'<span class="custom-icon" ><i class="fas fa-times-circle" style="color: red;" ></i></span>',showConfirmButton:!1,didOpen:a=>{a.addEventListener("mouseenter",d().stopTimer),a.addEventListener("mouseleave",d().resumeTimer)}}),console.error("Error sending email:",o)})}Limpiar(){this.message="",this.subject="",this.observaciones.observacion=""}LimpiarModal(){this.mostrar=!1,this.verificar=!1,this.estadoEvi="",this.subject="",this.observaciones.observacion="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(yo._),i.Y36(A.F0),i.Y36($.u),i.Y36(B.u),i.Y36(Do.g),i.Y36(C.r),i.Y36(y.U),i.Y36(M.X))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-aprobar-rechazar-detalle-admin"]],viewQuery:function(t,o){if(1&t&&i.Gf(m.NW,5),2&t){let a;i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:167,vars:19,consts:[[2,"font-size","16px"],["class","loading-overlay",4,"ngIf"],[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"container","text-center"],["mat-button","","color","primary",2,"margin-left","-95%",3,"click"],[2,"font-size","24px"],[1,"text-center","text-dark",2,"margin-top","5%","font-style","italic"],[1,"blockquote","text-dark"],[1,"card"],[1,"card-body"],[1,"container",2,"margin-top","5%","margin-bottom","5%"],[3,"opened","closed"],[2,"margin-top","1%"],[2,"text-align","justify"],[1,"table-responsive","mat-elevation-z8",2,"margin-bottom","10%"],["mat-table","",3,"dataSource"],["matColumnDef","idactividad"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","fechainicio"],["matColumnDef","fechafin"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"background-color",4,"matRowDef","matRowDefColumns"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header",2,"background-color","rgb(0, 122, 255)"],["id","exampleModalLabel",1,"modal-title",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table-responsive","mat-elevation-z8","modal-table",2,"margin-bottom","10%"],["matColumnDef","idArchivo"],["matColumnDef","nombreArchi"],["matColumnDef","descripcionArchi"],["matColumnDef","enlace"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"modal-footer",2,"background-color","rgb(0, 122, 255)"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"fas","fa-times"],["id","exampleModal2","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden.bs.modal"],[1,"modal-dialog","modal-xl"],[1,"modal-title","text-center","display-2","fw-bold",2,"font-family","Arial, sans-serif","color","white"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"card-body",2,"height","95%"],[1,"card-title"],[1,"fas","fa-file-alt",2,"margin-right","10px"],[2,"display","flex","justify-content","space-between"],[2,"width","30%","margin-right","10px"],["appearance","outline",1,"full-width"],["disabled","","name","fecha","matInput","",3,"value"],["disabled","","name","usuario","matInput","",3,"value"],["disabled","","name","estado","matInput","","required","",3,"value"],[1,"row"],[1,"col-sm-6","col-lg-3",2,"padding","10px 20px"],[1,"fas","fa-pencil-alt",2,"margin-right","5px"],[1,"container"],[1,"col"],["type","button","title","Haz clic para borrar",1,"btn","btn-warning","btn-block",3,"click"],[1,"fas","fa-eraser"],["type","button","title","Haz clic aqu\xed para aprobar",1,"btn","btn-success","btn-block",3,"click"],[1,"fas","fa-thumbs-up"],["type","button","title","Haz clic aqu\xed para rechazar",1,"btn","btn-danger","btn-block",3,"click"],[1,"fas","fa-thumbs-down"],["class","col-sm-8 col-lg-6","style","width: 75%",4,"ngIf"],["type","button","class","btn btn-success","style","background-color: rgb(10, 8, 94)",3,"click",4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%",3,"click"],["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"table-responsive","mat-elevation-z8",2,"margin-bottom","5%"],["matColumnDef","id"],["matColumnDef","observacion"],["matColumnDef","actividad"],["matColumnDef","estado"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","usuario"],["matColumnDef","acciones"],[4,"ngIf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",2,"margin-left","5%"],[1,"loading-overlay"],["diameter","40"],["mat-header-cell",""],["mat-cell",""],["type","button","mat-icon-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","custom-buttonArchivos",2,"background-color","rgb(58, 156, 156)","margin-right","5%",3,"click"],["type","button","mat-icon-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal2",1,"btn","btn-primary","custom-buttonEvaluar",2,"background-color","rgb(190, 170, 78)","margin-right","5%",3,"disabled","click"],["type","button","class","btn btn-primary custom-buttonDetalle","mat-icon-button","","style","\n                    background-color: rgb(150, 215, 219);\n                    margin-right: 5%;\n                  ","data-bs-toggle","modal","data-bs-target","#exampleModal3",3,"click",4,"ngIf"],["type","button","mat-icon-button","","data-bs-toggle","modal","data-bs-target","#exampleModal3",1,"btn","btn-primary","custom-buttonDetalle",2,"background-color","rgb(150, 215, 219)","margin-right","5%",3,"click"],["mat-header-row",""],["mat-row",""],[3,"href","download"],[1,"col-sm-8","col-lg-6",2,"width","75%"],[3,"ngSubmit"],[2,"display","flex","justify-content","flex-start","gap","10rem"],[1,"form-floating","mb-3",2,"width","45%"],["type","text","id","toUser","name","toUser","required","","placeholder","............","required","",1,"form-control",3,"value","ngModel","ngModelChange"],["for","toUser"],[1,"form-floating","mb-3"],["type","text","id","subject","name","subject","required","","placeholder","............","required","",1,"form-control",2,"margin-right","5%",3,"ngModel","ngModelChange"],["for","subject"],[2,"margin-bottom","10%","height","25px"],[1,"form-floating"],["placeholder","Leave a comment here","id","floatingTextarea2","placeholder","Ingrese alguna observaci\xf3n...........","required","","id","message","name","message","required","","rows","12",1,"form-control","card-textarea",2,"max-height","75px","overflow-y","auto",3,"ngModel","ngModelChange"],["for","message"],[1,"button-group",2,"display","flex","justify-content","center"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-envelope"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],[1,"overlay"],[1,"spinner",3,"diameter","strokeWidth","value","mode"],[1,"text",2,"color","white"],["type","button",1,"btn","btn-success",2,"background-color","rgb(10, 8, 94)",3,"click"],[1,"fas","fa-save"],["mat-cell","",3,"ngStyle"],["role","button",1,"btn","btn-danger",2,"background-color","red","margin-right","5%",3,"click"],[1,"fa","fa-trash"]],template:function(t,o){1&t&&(i.TgZ(0,"body",0),i.YNc(1,Mo,4,0,"div",1),i.TgZ(2,"div",2)(3,"div",3)(4,"button",4),i.NdJ("click",function(){return o.goBack()}),i.TgZ(5,"mat-icon",5),i._uU(6,"arrow_back"),i.qZA()(),i.TgZ(7,"figure",6)(8,"blockquote",7)(9,"h1")(10,"strong"),i._uU(11," ACTIVIDADES "),i.qZA()()()(),i.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"mat-accordion")(16,"mat-expansion-panel",11),i.NdJ("opened",function(){return o.panelOpenState=!0})("closed",function(){return o.panelOpenState=!1}),i.TgZ(17,"mat-expansion-panel-header")(18,"mat-panel-title",12)(19,"h4")(20,"strong"),i._uU(21," DESCRIPCI\xd3N DE EVIDENCIA"),i.qZA()()(),i.TgZ(22,"mat-panel-description"),i._uU(23),i.qZA()(),i.TgZ(24,"div",13)(25,"p"),i._uU(26),i.qZA()()()()(),i.TgZ(27,"div",14)(28,"table",15),i.ynx(29,16),i.YNc(30,wo,2,0,"th",17),i.YNc(31,Io,2,1,"td",18),i.BQk(),i.ynx(32,19),i.YNc(33,Ro,2,0,"th",17),i.YNc(34,qo,2,1,"td",18),i.BQk(),i.ynx(35,20),i.YNc(36,ko,2,0,"th",17),i.YNc(37,Po,2,1,"td",18),i.BQk(),i.ynx(38,21),i.YNc(39,Oo,2,0,"th",17),i.YNc(40,Yo,2,1,"td",18),i.BQk(),i.ynx(41,22),i.YNc(42,zo,2,0,"th",17),i.YNc(43,Jo,2,1,"td",18),i.BQk(),i.ynx(44,23),i.YNc(45,Qo,2,0,"th",17),i.YNc(46,Bo,8,2,"td",18),i.BQk(),i.YNc(47,$o,1,0,"tr",24),i.YNc(48,jo,1,2,"tr",25),i.qZA()()()(),i.TgZ(49,"div",26)(50,"div",27)(51,"div",28)(52,"div",29)(53,"h1",30),i._uU(54," ARCHIVOS DE:"),i._UZ(55,"span"),i._uU(56),i.qZA(),i._UZ(57,"button",31),i.qZA(),i.TgZ(58,"div",32)(59,"div",33)(60,"table",15),i.ynx(61,34),i.YNc(62,Fo,2,0,"th",17),i.YNc(63,Ho,2,1,"td",18),i.BQk(),i.ynx(64,35),i.YNc(65,Go,2,0,"th",17),i.YNc(66,Ko,2,1,"td",18),i.BQk(),i.ynx(67,36),i.YNc(68,Vo,2,0,"th",17),i.YNc(69,Wo,2,1,"td",18),i.BQk(),i.ynx(70,37),i.YNc(71,Xo,2,0,"th",17),i.YNc(72,tn,3,3,"td",18),i.BQk(),i.YNc(73,en,1,0,"tr",24),i.YNc(74,on,1,0,"tr",38),i.qZA()()(),i.TgZ(75,"div",39)(76,"button",40),i._UZ(77,"i",41),i._uU(78," Cerrar "),i.qZA()()()()(),i.TgZ(79,"div",42),i.NdJ("hidden.bs.modal",function(){return o.LimpiarModal()}),i.TgZ(80,"div",43)(81,"div",28)(82,"div",29)(83,"h1",44),i._uU(84," EVALUAR "),i.qZA(),i.TgZ(85,"button",45),i.NdJ("click",function(){return o.LimpiarModal()}),i.qZA()(),i.TgZ(86,"div",32)(87,"div",8)(88,"div",46)(89,"h2",47),i._UZ(90,"i",48),i._uU(91,"Detalles "),i.qZA(),i._UZ(92,"br")(93,"hr"),i.TgZ(94,"div",49)(95,"div",50)(96,"mat-form-field",51)(97,"mat-label"),i._uU(98,"Fecha de revisi\xf3n"),i.qZA(),i._UZ(99,"input",52),i.qZA()(),i.TgZ(100,"div",50)(101,"mat-form-field",51)(102,"mat-label"),i._uU(103,"Usuario Evaluador"),i.qZA(),i._UZ(104,"input",53),i.qZA()(),i.TgZ(105,"div",50)(106,"mat-form-field",51)(107,"mat-label"),i._uU(108,"Estado de Actividad"),i.qZA(),i._UZ(109,"input",54),i.qZA()()()()(),i.TgZ(110,"div",55)(111,"div",56)(112,"div",8)(113,"div",9)(114,"h3",47),i._UZ(115,"i",57),i.TgZ(116,"strong"),i._uU(117,"OBSERVACIONES"),i.qZA()(),i._UZ(118,"br"),i.TgZ(119,"div",58)(120,"div",59)(121,"button",60),i.NdJ("click",function(){return o.Limpiar()}),i._UZ(122,"i",61),i.qZA(),i.TgZ(123,"button",62),i.NdJ("click",function(){return o.Aprobado()}),i._UZ(124,"i",63),i.qZA(),i.TgZ(125,"button",64),i.NdJ("click",function(){return o.Rechazado()}),i._UZ(126,"i",65),i.qZA()()()()()(),i.YNc(127,an,23,7,"div",66),i.qZA()(),i.TgZ(128,"div",39),i.YNc(129,rn,3,1,"button",67),i.TgZ(130,"button",68),i.NdJ("click",function(){return o.LimpiarModal()}),i._UZ(131,"i",41),i._uU(132," Cancelar "),i.qZA()()()()(),i.TgZ(133,"div",69)(134,"div",27)(135,"div",28)(136,"div",29)(137,"h1",30),i._uU(138," OBSERVACIONES "),i.qZA()(),i.TgZ(139,"div",32)(140,"div",70)(141,"table",15),i.ynx(142,71),i.YNc(143,sn,2,0,"th",17),i.YNc(144,cn,2,1,"td",18),i.BQk(),i.ynx(145,72),i.YNc(146,ln,2,0,"th",17),i.YNc(147,dn,2,1,"td",18),i.BQk(),i.ynx(148,73),i.YNc(149,un,2,0,"th",17),i.YNc(150,mn,2,1,"td",18),i.BQk(),i.ynx(151,74),i.YNc(152,pn,2,0,"th",17),i.YNc(153,gn,2,4,"td",75),i.BQk(),i.ynx(154,76),i.YNc(155,_n,2,0,"th",17),i.YNc(156,fn,2,2,"td",18),i.BQk(),i.ynx(157,77),i.YNc(158,bn,2,0,"th",17),i.YNc(159,vn,3,0,"td",18),i.BQk(),i.YNc(160,An,1,0,"tr",24),i.YNc(161,Cn,1,0,"tr",38),i.qZA(),i.YNc(162,Zn,3,1,"ng-container",78),i.qZA()(),i.TgZ(163,"div",39)(164,"button",79),i._UZ(165,"i",41),i._uU(166," Cerrar "),i.qZA()()()()()()()()),2&t&&(i.xp6(1),i.Q6J("ngIf",o.isLoadingPage),i.xp6(22),i.hij(" ",o.panelOpenState?"OPEN":"CLOSED"," "),i.xp6(3),i.Oqu(o.evidencia.descripcion),i.xp6(2),i.Q6J("dataSource",o.dataSource),i.xp6(19),i.Q6J("matHeaderRowDef",o.columnas),i.xp6(1),i.Q6J("matRowDefColumns",o.columnas),i.xp6(8),i.hij(" ",o.nombreActividad," "),i.xp6(4),i.Q6J("dataSource",o.dataSource2),i.xp6(13),i.Q6J("matHeaderRowDef",o.columnasArchi),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasArchi),i.xp6(25),i.Q6J("value",o.fechaFormateada),i.xp6(5),i.Q6J("value",o.user.username),i.xp6(5),i.Q6J("value",o.estadoEvi),i.xp6(18),i.Q6J("ngIf",o.mostrar),i.xp6(2),i.Q6J("ngIf",o.verificar),i.xp6(12),i.Q6J("dataSource",o.dataSource3),i.xp6(19),i.Q6J("matHeaderRowDef",o.columnasObservaciones),i.xp6(1),i.Q6J("matRowDefColumns",o.columnasObservaciones),i.xp6(1),i.Q6J("ngIf",o.noRegistros))},dependencies:[g.O5,g.PC,E.lW,E.RK,x.KE,x.hX,k.Nt,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F,P.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.pp,D.ib,D.yz,D.yK,D.u4,F.Ou],styles:['.modal-table[_ngcontent-%COMP%]{max-height:calc(100vh - 100px)}.modal-dialog[_ngcontent-%COMP%]{max-width:50%}.modal-content[_ngcontent-%COMP%]{overflow:auto}input[_ngcontent-%COMP%]:disabled, mat-label[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-close[_ngcontent-%COMP%]{background-color:red}.mat-cell[_ngcontent-%COMP%]{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.spinner-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center}.overlay[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center}.spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.text[_ngcontent-%COMP%]{position:absolute;top:65%;left:50%;transform:translate(-50%,-50%);color:#000;font-size:24px;text-align:center;margin:0}.custom-alert[_ngcontent-%COMP%]{height:25%}.my-custom-swal[_ngcontent-%COMP%]   .custom-icon[_ngcontent-%COMP%]{color:red}.custom-buttonArchivos[_ngcontent-%COMP%]{position:relative}.custom-buttonArchivos[_ngcontent-%COMP%]:after{content:"Archivos";position:absolute;top:-5px;left:50%;transform:translate(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-buttonArchivos[_ngcontent-%COMP%]:hover:after{opacity:1}.custom-buttonEvaluar[_ngcontent-%COMP%]{position:relative}.custom-buttonEvaluar[_ngcontent-%COMP%]:after{content:"Evaluar";position:absolute;top:50%;right:-50%;transform:translateY(-50%);padding:5px 10px;background-color:#222020cc;color:#fff;font-size:14px;border-radius:5px;opacity:0;transition:opacity .3s ease}.custom-buttonEvaluar[_ngcontent-%COMP%]:hover:after{opacity:1}tr.selected[_ngcontent-%COMP%]{background-color:#91e791}tr.selected2[_ngcontent-%COMP%]{background-color:#f1938c}.rechazada[_ngcontent-%COMP%]{color:red}body[_ngcontent-%COMP%]{font:1em/1.618 Inter,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:30px;color:#224}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;color:#fff}']}),e})();var Tn=c(9518);function Un(e,n){if(1&e&&(i.TgZ(0,"th",16),i._uU(1,"ID"),i.qZA()),2&e){const t=i.oxw();i.Udp("display",t.ocultar?"":"none")}}function Sn(e,n){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const t=n.$implicit,o=i.oxw();i.Udp("display",o.ocultar?"":"none"),i.xp6(1),i.hij(" ",t.id," ")}}function Nn(e,n){1&e&&(i.TgZ(0,"th",16),i._uU(1,"FECHA"),i.qZA())}function En(e,n){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.ALo(2,"date"),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",i.xi3(2,1,t.fecha,"yyyy-MM-dd HH:mm:ss")," ")}}function yn(e,n){1&e&&(i.TgZ(0,"th",16),i._uU(1,"MENSAJE"),i.qZA())}function Dn(e,n){if(1&e&&(i.TgZ(0,"td",17),i._uU(1),i.qZA()),2&e){const t=n.$implicit;i.xp6(1),i.hij(" ",t.mensaje," ")}}function Mn(e,n){1&e&&i._UZ(0,"tr",18)}function wn(e,n){1&e&&i._UZ(0,"tr",19)}const In=function(){return[5,10,20]},qn=[{path:"admin",component:p.M,pathMatch:"full",canActivate:[v]},{path:"criterios",component:ci,pathMatch:"full",canActivate:[v]},{path:"historialnotif",component:(()=>{class e{ngAfterViewInit(){console.log("Paginator:",this.paginator),this.paginator&&(this.dataSource.paginator=this.paginator)}constructor(t,o){this.notificacionService=t,this.login=o,this.notificaciones=[],this.rol=null,this.displayedColumns=["Id","Fecha","Mensaje"],this.dataSource=new r.by,this.ocultar=!1,this.isLoggedIn=!1,this.user=null,this.numNotificacionesSinLeer=0,this.filterPost="",this.rol=this.login.getUserRole()}ngOnInit(){this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.dataSource.filterPredicate=(t,o)=>o.split(" ").every(s=>t.id.toString().includes(s)||t.fecha.toString().includes(s)||t.mensaje.toLowerCase().includes(s)),this.listarnot(this.user.id)}listarnot(t){"ADMIN"==this.rol||"SUPERADMIN"==this.rol?(console.log("rol john "+this.rol),this.notificacionService.allnotificacionTODO(this.rol).subscribe(o=>{this.notificaciones=o,this.dataSource.data=o,console.log("john"+o),this.numNotificacionesSinLeer=this.notificaciones.filter(a=>!a.visto).length,this.numNotificacionesSinLeer=this.dataSource.data.filter(a=>!a.visto).length,this.notificacionService.getNotificaciones(t).subscribe(a=>{this.notificaciones=this.notificaciones.concat(a),this.dataSource.data=this.dataSource.data.concat(a),this.numNotificacionesSinLeer+=a.filter(s=>!s.visto).length},a=>{console.error("No se pudieron listar las notificaciones propias")})},o=>{console.error("No se pudieron listar las notificaciones")})):this.notificacionService.getNotificaciones(t).subscribe(o=>{this.notificaciones=o,this.dataSource.data=o,this.numNotificacionesSinLeer=this.notificaciones.filter(a=>!a.visto).length,this.numNotificacionesSinLeer=this.dataSource.data.filter(a=>!a.visto).length},o=>{console.error("No se pudieron listar las notificaciones")})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}aplicarFiltro(){if(this.filterPost){const t=this.filterPost.toLowerCase();this.dataSource.data=this.dataSource.data.filter(o=>JSON.stringify(o).toLowerCase().includes(t))}else this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser(),this.login.loginStatusSubjec.asObservable().subscribe(t=>{this.isLoggedIn=this.login.isLoggedIn(),this.user=this.login.getUser()}),this.listarnot(this.user.id)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(y.U),i.Y36(C.r))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-historial_notifi"]],viewQuery:function(t,o){if(1&t&&i.Gf(m.NW,5),2&t){let a;i.iGM(a=i.CRH())&&(o.paginator=a.first)}},decls:24,vars:9,consts:[[1,"container","bg-light","border","border-start-0","rounded-4"],[1,"blockquote","text-dark",2,"margin-top","5%"],[1,"card"],["type","text","name","filterPost3","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",3,"display",4,"matHeaderCellDef"],["mat-cell","",3,"display",4,"matCellDef"],["matColumnDef","Fecha"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Mensaje"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","tab-apr",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"tab-apr"]],template:function(t,o){1&t&&(i.TgZ(0,"body")(1,"div",0)(2,"blockquote",1)(3,"h1")(4,"strong"),i._uU(5," HISORIAL DE NOTIFICACIONES"),i.qZA()()(),i._UZ(6,"div"),i.TgZ(7,"div",2)(8,"input",3),i.NdJ("ngModelChange",function(s){return o.filterPost=s})("input",function(){return o.aplicarFiltro()}),i.qZA(),i.TgZ(9,"div",4)(10,"table",5),i.ALo(11,"buscar"),i.ynx(12,6),i.YNc(13,Un,2,2,"th",7),i.YNc(14,Sn,2,3,"td",8),i.BQk(),i.ynx(15,9),i.YNc(16,Nn,2,0,"th",10),i.YNc(17,En,3,4,"td",11),i.BQk(),i.ynx(18,12),i.YNc(19,yn,2,0,"th",10),i.YNc(20,Dn,2,1,"td",11),i.BQk(),i.YNc(21,Mn,1,0,"tr",13),i.YNc(22,wn,1,0,"tr",14),i.qZA(),i._UZ(23,"mat-paginator",15),i.qZA()()()()),2&t&&(i.xp6(8),i.Q6J("ngModel",o.filterPost),i.xp6(2),i.Q6J("dataSource",i.xi3(11,5,o.dataSource,o.filterPost)),i.xp6(11),i.Q6J("matHeaderRowDef",o.displayedColumns),i.xp6(1),i.Q6J("matRowDefColumns",o.displayedColumns),i.xp6(1),i.Q6J("pageSizeOptions",i.DdM(8,In)))},dependencies:[u.Fj,u.JJ,u.On,m.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,g.uU,Tn.o]}),e})(),pathMatch:"full",canActivate:[v]},{path:"subcriterios",component:Ui,pathMatch:"full",canActivate:[v]},{path:"indicadores",component:Fi,pathMatch:"full",canActivate:[v]},{path:"evaluacion",component:Hi.o,pathMatch:"full",canActivate:[v]},{path:"asigna",component:tt,pathMatch:"full",canActivate:[v]},{path:"apruebaAdmin",component:jt,pathMatch:"full",canActivate:[H.m],data:{allowedRoles:["SUPERADMIN","ADMIN"]}},{path:"asignaEvidencia",component:No,pathMatch:"full",canActivate:[v]},{path:"detalleAprobarRechazar",component:xn,pathMatch:"full",canActivate:[H.m],data:{allowedRoles:["SUPERADMIN","ADMIN"]}}];let kn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[A.Bz.forChild(qn),A.Bz]}),e})();var Pn=c(1327);let On=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[g.ez,kn,Pn.m]}),e})()},6493:(Y,S,c)=>{c.d(S,{Q:()=>v});var g=c(4004),A=c(262),p=c(5567),i=c(529),C=c(4650);let v=(()=>{class f{constructor(r){this.http=r,this.apiUrl="URL_DEL_BACKEND"}listarIndicador(){return this.http.get(`${p.Z}/api/indicadores/listar`).pipe((0,g.U)(r=>r))}getIndicadors(){return this.http.get(`${p.Z}/api/indicadores/listar`)}crear(r){return this.http.post(`${p.Z}/api/indicadores/crear`,r).pipe((0,A.K)(m=>{throw console.error(m),m}))}actualizar(r,m){return this.http.put(`${p.Z}/api/indicadores/actualizar/${r}`,m)}eliminar(r,m){return this.http.put(`${p.Z}/api/indicadores/eliminar/${r}`,m)}listarIndicadorPorSubcriterio(r){return this.http.get(`${p.Z}/api/indicadores/listarPorSubcriterio/${r}`).pipe((0,g.U)(m=>m))}listarIndicadorPorCriterioModelo(r,m){return this.http.get(`${p.Z}/api/indicadores/listarIndicadorPorCriterioModelo/${r}/${m}`).pipe((0,g.U)(Z=>Z))}obtenerEnlaceArchivoPorIndicador(r,m){return this.http.get(`${this.apiUrl}/api/obtenerEnlaceArchivoPorIndicador?id_indicador=${r}&nombre_indicador=${m}`)}indicadoresPorCriterios(r){const Z={params:(new i.LE).set("idCriterios",r.join(",")),responseType:"json"};return this.http.get(`${p.Z}/api/indicadores/indicadoresPorCriterios`,Z)}indicadoresPorCriteriosPruebaAlvCL(r){const Z={params:(new i.LE).set("idCriterios",r.join(",")),responseType:"json"};return this.http.get(`${p.Z}/api/indicadores/indicadoresPorCriteriosPruebaCL`,Z)}indicadoresPorCriteriosPruebaAlvCT(r){const Z={params:(new i.LE).set("idCriterios",r.join(",")),responseType:"json"};return this.http.get(`${p.Z}/api/indicadores/indicadoresPorCriteriosPruebaCT`,Z)}ponderarIndicador(r,m){return this.http.put(`${p.Z}/api/indicadores/ponderacion/${r}`,m)}getIndicadores(){return this.http.get(`${p.Z}/api/indicadores/listar`)}getSubcrindica(r,m){return this.http.get(`${p.Z}/api/indicadores/subcritindicador/${r}/${m}`)}getIndicadorById(r){return this.http.get(`${p.Z}/api/indicadores/buscar/id_indicador/${r}`)}obtenerIndicadoresPorCriterio(r){return this.http.get(`${p.Z}/api/indicadores/obtenerIndicadoresPorCriterio/${r}`).pipe((0,g.U)(m=>m))}obtenerDatosIndicadores(r){return this.http.get(`${p.Z}/api/indicadores/datosIndicadores/${r}`)}recoverPdfLink(r){return this.http.get(`${p.Z}/archivo/recoverPdf/${r}`).pipe((0,g.U)(m=>m))}getarchivorecoverPdf(r){return this.http.get(`${p.Z}/archivo/recoverPdf/${r}`)}obtenerDatosIndicadoresFull(){return this.http.get(`${p.Z}/api/indicadores/datosIndicadoresFull`)}getIndicadorPorModelo(r){return this.http.get(`${p.Z}/api/indicadores/indicadorespormodelo/${r}`)}getIndicadorColProjection(r){return this.http.get(`${p.Z}/api/indicadores/indicadorval/${r}`)}getIndicAdmin(r,m){return this.http.get(`${p.Z}/api/indicadores/indicvaladmin/${r}/${m}`)}}return f.\u0275fac=function(r){return new(r||f)(C.LFG(i.eN))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9921:(Y,S,c)=>{c.d(S,{y:()=>v});var g=c(262),A=c(4004),p=c(5567),i=c(4650),C=c(529);let v=(()=>{class f{constructor(r){this.http=r}createModelo(r){return this.http.post(`${p.Z}/api/modelo/crear`,r).pipe((0,g.K)(m=>{throw console.error(m),m}))}listarModelo(){return this.http.get(`${p.Z}/api/modelo/listar`).pipe((0,A.U)(r=>r))}getModeloById(r){return this.http.get(`${p.Z}/api/modelo/buscar/${r}`)}listarModeloExcepto(r){return this.http.get(`${p.Z}/api/modelo/listarModeloExcepto/${r}`).pipe((0,A.U)(m=>m))}eliminarlogic(r){return this.http.put(`${p.Z}/api/modelo/eliminarlogic/${r}`,r)}modificar(r){return this.http.put(`${p.Z}/api/modelo/modificar/${r.id_modelo}`,r)}getModeMaximo(){return this.http.get(`${p.Z}/api/modelo/listarMax`)}getModelosVista(){return this.http.get(`${p.Z}/api/modelo/datosModelo`)}getlistmodelindi(r){return this.http.get(`${p.Z}/api/modelo/listmodelindi/${r}`)}getlisdescrite(r,m){return this.http.get(`${p.Z}/api/modelo/listcritedes/${r}/${m}`)}getliscritemod(r,m){return this.http.get(`${p.Z}/api/modelo/listcritmod/${r}/${m}`)}getliscriteno(r,m){return this.http.get(`${p.Z}/api/modelo/listcritedesNOM/${r}/${m}`)}getcriterioadmin(r,m){return this.http.get(`${p.Z}/api/modelo/listcriterioadmin/${r}/${m}`)}getcriterioresp(r,m){return this.http.get(`${p.Z}/api/modelo/criterespon/${r}/${m}`)}}return f.\u0275fac=function(r){return new(r||f)(i.LFG(C.eN))},f.\u0275prov=i.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);