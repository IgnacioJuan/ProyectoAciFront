<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SistemaACI</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <link
      rel="stylesheet"
      href="./assets/plugins/fontawesome-free/css/all.min.css"
    />
    <link rel="stylesheet" href="./assets/dist/css/adminlte.min.css" />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/5.13.0/css/all.css"
      integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="@{/css/bootstrap.css}"
      rel="stylesheet"
      href="../static/css/bootstrap.css"
    />
    <script href="@{/js/jquery.js}" src="../static/js/jquery.js"></script>
    <script href="@{/js/bootstrap.js}" src="../static/js/bootstrap.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
  </head>
  <body class="mat-typography sidebar-mini sidebar-collapse">
    <app-root class="wrapper"></app-root>

    <script src="./assets/plugins/jquery/jquery.min.js"></script>
    <script src="./assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/dist/js/adminlte.min.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>


<!-- Agregar un script para capturar el archivo seleccionado y enviarlo a Google Drive -->
<script src="https://apis.google.com/js/api.js"></script>
<script>
  // Configurar las credenciales de OAuth 2.0
 
  // Inicializar la API de Google Drive
  function initClient() {
    gapi.client.init({
      apiKey: API_KEY,
      clientId: CLIENT_ID,
      discoveryDocs: DISCOVERY_DOCS,
      scope: SCOPES
    }).then(() => {
      // Agregar un evento de escucha para cuando se envÃ­e el formulario
      const form = document.getElementById('file-form');
      const submitButton = document.getElementById('submit-button');
      form.addEventListener('submit', (event) => {
        // Prevenir el comportamiento predeterminado de enviar el formulario
        event.preventDefault();

        // Obtener el archivo seleccionado
        const file = document.getElementById('file-input').files[0];

        // Crear un objeto de archivo de Google Drive
        const fileMetadata = {
          name: file.name
        };

        // Crear una instancia de FileReader para leer el contenido del archivo
        const reader = new FileReader();
        reader.readAsBinaryString(file);
        reader.onload = () => {
          // Crear un objeto de archivo de Google Drive
          const media = {
            mimeType: file.type,
            body: reader.result
          };
          gapi.client.drive.files.create({
            resource: fileMetadata,
            media: media,
            fields: 'id'
          }).then((response) => {
            console.log('Archivo subido:', response.result);
          }, (error) => {
            console.error('Error al subir archivo:', error.result.error.message);
          });
        };
      });
    }, (error) => {
      console.error('Error al inicializar la API de Google Drive:', error);
    });
  }

  // Cargar la API de Google Drive y autenticar al usuario
  gapi.load('client:auth2', () => {
    gapi.auth2.init({
      client_id: CLIENT_ID,
      scope: SCOPES
    }).then(() => {
      initClient();
    });
  });
</script>
  </body>
</html>
