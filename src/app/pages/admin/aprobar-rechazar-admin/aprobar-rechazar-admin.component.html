<body>
  <div class="container bg-light border border-start-0 rounded-4">
    <div class="container text-center">
      <div class="row" style="margin-top: 5%">
        <div class="col-sm-6 mb-3 mb-sm-0">
          <div class="card">
            <div class="card-body">
              <figure
                class="text-center text-dark"
                style="margin-top: 5%; font-style: italic"
              >
                <blockquote class="blockquote text-dark">
                  <h1><strong> INDICADORES</strong></h1>
                </blockquote>
              </figure>

              <div class="form-floating">
                <mat-form-field>
                  <mat-label class="label">Seleccione un indicador</mat-label>
                  <mat-select [(value)]="indicadorSelect">
                    <mat-option
                      *ngFor="let opcion of listaIndicadores"
                      [value]="opcion"
                      onchange="buscarIndicador()"
                    >
                      {{ opcion.nombre }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="card">
            <div class="card-body">
              <figure
                class="text-center text-dark"
                style="margin-top: 5%; font-style: italic"
              >
                <blockquote class="blockquote text-dark">
                  <h1><strong> DETALLES</strong></h1>
                </blockquote>
              </figure>
              <div style="text-align: justify">
                <div class="row">
                  <div class="col">
                    <h3><strong>Nombre:</strong></h3>
                    <h4>{{ indicadorSelect.nombre }}</h4>
                  </div>
                  <div class="col">
                    <h3><strong>Peso:</strong></h3>
                    <h4>{{ indicadorSelect.peso }}</h4>
                  </div>
                </div>
                <h3><strong>Descripción:</strong></h3>
                <h4>{{ indicadorSelect.descripcion }}</h4>
              </div>
            </div>

            <div class="card-footer text-muted">
              <button
                type="button"
                class="btn btn-outline-info"
                (click)="obtenerEvidencia(indicadorSelect.id_indicador)"
              >
                <i class="fas fa-search-plus"></i> <span> </span> Listar
                Evidencia
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <figure
      class="text-center text-dark"
      style="margin-top: 5%; font-style: italic"
    >
      <blockquote class="blockquote text-dark">
        <h1><strong> LISTADO DE EVIDENCIAS</strong></h1>
      </blockquote>
    </figure>

    <div class="container text-center">
      <div class="row justify-content-md-center">
        <div class="col col-lg-3">
          <mat-form-field class="full-width">
            <mat-icon matPrefix class="mat-icon-start custom-search-icon"
              >search</mat-icon
            >
            <input
              name="text"
              matInput
              placeholder="Buscar..."
              class="custom-search-input"
              (input)="filtrar($event)"
            />
          </mat-form-field>
        </div>
        <div class="col-md-auto"></div>
      </div>
    </div>

    <div class="container text-center">
      <div class="mat-elevation-z8" style="margin-bottom: 10%">
        <table mat-table [dataSource]="dataSource2">
          <ng-container matColumnDef="id_evidencia">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let elemento">
              {{ elemento.id_evidencia }}
            </td>
          </ng-container>

          <ng-container matColumnDef="enlace">
            <th mat-header-cell *matHeaderCellDef>ENLACE</th>
            <td mat-cell *matCellDef="let elemento">{{ elemento.enlace }}</td>
          </ng-container>
          <ng-container matColumnDef="nombre">
            <th mat-header-cell *matHeaderCellDef>NOMBRE</th>
            <td mat-cell *matCellDef="let elemento">{{ elemento.nombre }}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>ACCIONES</th>
            <td mat-cell *matCellDef="let element">
              <button
                mat-icon-button
                type="button"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
                style="background-color: rgb(23, 141, 156)"
                (click)="seleccionar(element)"
              >
                <mat-icon>visibility</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columnas"></tr>
          <tr mat-row *matRowDef="let fila; columns: columnas"></tr>
        </table>

        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          aria-label="Select page of periodic elements"
        >
        </mat-paginator>
      </div>
    </div>

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header" style="background-color: rgb(25, 71, 123)">
            <h1
              class="modal-title text-center display-2 fw-bold"
              style="font-family: Arial, sans-serif; color: white"
            >
              EVIDENCIA
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-sm-6">
                <div class="card" style="height: 95%">
                  <div class="card-body">
                    <h2 class="card-title">
                      <i class="fas fa-file-alt" style="margin-right: 10px"></i
                      >DATOS SELECCIONADOS
                    </h2>

                    <br />
                    <hr />

                    <div style="display: flex; flex-wrap: wrap">
                      <mat-form-field
                        style="flex-basis: 50%; padding-right: 10px"
                        appearance="outline"
                      >
                        <mat-label>ID</mat-label>
                        <input
                          disabled
                          name="id"
                          matInput
                          [value]="evidenciaSele.id_evidencia"
                          [(ngModel)]="detalleEvi.evidencia"
                        />
                      </mat-form-field>

                      <mat-form-field
                        style="flex-basis: 50%"
                        appearance="outline"
                      >
                        <mat-label>Nombre</mat-label>
                        <input
                          disabled
                          name="nombre"
                          matInput
                          [value]="evidenciaSele.nombre"
                        />
                      </mat-form-field>
                    </div>

                    <mat-form-field class="full-width" appearance="outline">
                      <mat-label>Enlace</mat-label>
                      <input
                        disabled
                        name="enlace"
                        matInput
                        [value]="evidenciaSele.enlace"
                      />
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="col-sm-6">
                <div class="card">
                  <div class="card-body">
                    <h2 class="card-title">
                      <i class="fas fa-file-alt" style="margin-right: 10px"></i
                      >Detalles
                    </h2>

                    <br />
                    <hr />

                    <div style="display: flex; justify-content: space-between">
                      <div style="width: 45%">
                        <mat-form-field class="full-width" appearance="outline">
                          <mat-label>Fecha de revisión</mat-label>
                          <input
                            disabled
                            name="fecha"
                            matInput
                            [value]="fechaFormateada"
                          />
                        </mat-form-field>
                      </div>

                      <div style="width: 45%">
                        <mat-form-field class="full-width" appearance="outline">
                          <mat-label>Usuario Evaluador</mat-label>
                          <input
                            disabled
                            name="usuario"
                            matInput
                            [value]="user.username"
                          />
                        </mat-form-field>
                      </div>
                    </div>
                    <hr />

                    <div style="display: flex; justify-content: space-between">
                      <div style="width: 45%">
                        <mat-form-field class="full-width" appearance="outline">
                          <mat-label> Estado de Evidencia</mat-label>
                          <input
                            disabled
                            name="estado"
                            matInput
                            matInput
                            [value]="estadoEvi"
                            required
                          />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div>
              <div class="card" style="height: calc(1.5rem * 15 + 3.5rem)">
                <div class="card-body">
                  <h2 class="card-title">
                    <i class="fas fa-pencil-alt" style="margin-right: 10px"></i
                    >OBSERVACIONES
                  </h2>
                  <!----
                  <textarea
                    class="form-control"
                    style="max-height: 60%; overflow-y: auto"
                    *ngIf="mostrar"
                    placeholder="Ingrese alguna observación..........."
                    [(ngModel)]="detalleEvi.observacion"
                    required
                  ></textarea>
                ---->
   <!----
                 
                    <div class="card-header">
                      <i class="fas fa-envelope"></i> Envío de correos
                    </div>
 ---->
                    <div class="card-body"   *ngIf="mostrar"  >
                      <form (ngSubmit)="enviar()">
        

                       
                        <div class="input-group mb-3">
                          <span class="input-group-text" id="basic-addon1" for="toUser" >Para</span>
                          <input   type="email"
                          id="toUser"  name="toUser"
                          required  class="form-control"   
                           placeholder="............"    [(ngModel)]="toUser" required >
                        </div>
                      <div class="form-floating mb-3">
                          <input   type="text"
                          id="subject"
                          name="subject"
                          [(ngModel)]="subject"
                          required  class="form-control"   
                           placeholder="............"  
                          required>
                          <label for="subject">Asunto:</label>
                        </div>

                                          
                        <div style="margin-bottom: 2%">

                          <div class="form-floating">
                            <textarea class="form-control card-textarea" placeholder="Leave a comment here" id="floatingTextarea2" 
                            style="max-height: 60%; overflow-y: auto"
                            placeholder="Ingrese alguna observación..........."
                            [(ngModel)]="detalleEvi.observacion"
                            required
                            id="message"
                            name="message"
                            [(ngModel)]="message"
                            required
                            ></textarea>
                            <label for="message">Comentario</label>
                          </div>
                 
                        </div>

                        <div
                          class="button-group"
                          style="display: flex; justify-content: center"
                        >
                        <!---
                          <button type="submit" class="btn btn-primary">
                            <i class="fas fa-envelope"></i> Enviar
                          </button>---->
                        </div>
                      </form>
                    </div>
                  




                </div>







                <div
                  style="display: flex; justify-content: center; margin: 10px"
                >
                  <button
                    type="button"
                    class="btn btn-warning"
                    style="width: 20%; margin-right: 10px"
                    (click)="Limpiar()"
                  >
                    <i class="fas fa-eraser"></i>
                    <span> </span>
                    Limpiar
                  </button>

                  <button
                    type="button"
                    class="btn btn-success"
                    style="width: 20%; margin-left: 10px; margin-right: 10px"
                    (click)="Aprobado()"
                  >
                    <i class="fas fa-thumbs-up"></i>
                    <span> </span>
                    Aprobar
                  </button>

                  <button
                    type="button"
                    class="btn btn-danger"
                    style="width: 25%; margin-left: 10px"
                    (click)="Rechazado()"
                  >
                    <i class="fas fa-thumbs-down"></i>
                    Rechazar
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer" style="background-color: rgb(25, 71, 123)">
            <button type="button" class="btn btn-primary" (click)="Guardar()" (click)="enviar()">
              <i class="fas fa-save"></i>
              Guardar
            </button>
            <button
              type="button"
              style="margin-left: 5%"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              <i class="fas fa-times"></i> Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<!--
<pre>
  {{ indicadorSelect | json }} 
</pre>
---->
